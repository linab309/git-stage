; generated by Component: ARM Compiler 5.04 update 1 (build 49) Tool: ArmCC [5040049]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\stm32l152-eval\timer.o --asm_dir=.\STM32L152-EVAL\ --list_dir=.\STM32L152-EVAL\ --depend=.\stm32l152-eval\timer.d --cpu=Cortex-M3 --apcs=interwork -O3 -I..\inc -I..\..\..\Libraries\CMSIS\Device\ST\STM32L1xx\Include -I..\..\..\Libraries\STM32_USB-FS-Device_Driver\inc -I..\..\..\Libraries\STM32L1xx_StdPeriph_Driver\inc -I..\..\..\Utilities\STM32_EVAL -I..\..\..\Utilities\STM32_EVAL\Common -I..\..\..\Utilities\STM32_EVAL\STM32L152_EVAL -I..\src\user -I..\src\user\include -I..\src\SYSTEM\delay -I..\src\SYSTEM\sys -I..\src\SYSTEM\usart -I..\src\HARDWARE\ADC -I..\src\HARDWARE\BMP -I..\src\HARDWARE\DMA -I..\src\HARDWARE\FLASH -I..\src\HARDWARE\GPS -I..\src\HARDWARE\KEY -I..\src\HARDWARE\PWM -I..\src\HARDWARE\RTC -I..\src\HARDWARE\SPI -I..\src\HARDWARE\USART2 -I..\src\HARDWARE\TIMER -I..\src\EX -I..\src\USMART -I..\..\..\Libraries\CMSIS\Include -I..\src\ff11a\src -I..\src\ff11a\src\option -I..\src\HARDWARE\LED -I..\src\HARDWARE\OLED -I..\src\ff11a\src -I..\src\ff11a\src\option -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\4.1.0\CMSIS\Include -IC:\Keil_v5\ARM\Inc\ST\STM32L1xx -D__MICROLIB -DUSE_STDPERIPH_DRIVER -DSTM32L1XX_MD -DUSE_STM32L152_EVAL ..\src\HARDWARE\TIMER\timer.c]
                          THUMB

                          AREA ||i.TIM3_IRQHandler||, CODE, READONLY, ALIGN=2

                  TIM3_IRQHandler PROC
;;;208    //��ʱ��3�жϷ������
;;;209    void TIM3_IRQHandler(void)
000000  b570              PUSH     {r4-r6,lr}
;;;210    {
;;;211        static u8 static_rtc_cnt = 0;
;;;212    
;;;213    	if(TIM3->SR&0X0001)//����ж�
000002  4d21              LDR      r5,|L1.136|
000004  8828              LDRH     r0,[r5,#0]
000006  07c0              LSLS     r0,r0,#31
000008  d032              BEQ      |L1.112|
;;;214    	{
;;;215    
;;;216            timer_when_user_press_key_type();
00000a  f7fffffe          BL       timer_when_user_press_key_type
;;;217            timer_lower2_type();
00000e  f7fffffe          BL       timer_lower2_type
;;;218            timer_guji_type();
000012  f7fffffe          BL       timer_guji_type
;;;219            timer_powermanage_type();
000016  f7fffffe          BL       timer_powermanage_type
;;;220            timer_save_map_type();
00001a  f7fffffe          BL       timer_save_map_type
;;;221    
;;;222           	if(timer_1s_cnt == 100)
00001e  4c1b              LDR      r4,|L1.140|
000020  88e0              LDRH     r0,[r4,#6]  ; timer_1s_cnt
000022  2864              CMP      r0,#0x64
000024  d001              BEQ      |L1.42|
000026  1c40              ADDS     r0,r0,#1
;;;223            {
;;;224    
;;;225           	}
;;;226    		else
;;;227    			timer_1s_cnt++;
000028  80e0              STRH     r0,[r4,#6]
                  |L1.42|
;;;228    
;;;229            if(system_flag_table->batt_change_ok_cnt)
00002a  4819              LDR      r0,|L1.144|
00002c  2600              MOVS     r6,#0
00002e  6800              LDR      r0,[r0,#0]  ; system_flag_table
000030  6c01              LDR      r1,[r0,#0x40]
000032  b121              CBZ      r1,|L1.62|
;;;230            {
;;;231                if(system_flag_table->charger_connected == 1)
000034  f890202d          LDRB     r2,[r0,#0x2d]
000038  2a01              CMP      r2,#1
00003a  d008              BEQ      |L1.78|
;;;232                {
;;;233                    system_flag_table->batt_change_ok_cnt--;
;;;234                    if(system_flag_table->batt_change_ok_cnt == 0)
;;;235                    {
;;;236                         system_flag_table->batt_Status  =  BATT_CHARG_OK ;
;;;237                    }
;;;238                }
;;;239                else
;;;240                {
;;;241                    system_flag_table->batt_change_ok_cnt = 0;    
00003c  6406              STR      r6,[r0,#0x40]
                  |L1.62|
;;;242                }
;;;243            }
;;;244        
;;;245            if(button_100_time)
00003e  7860              LDRB     r0,[r4,#1]  ; button_100_time
000040  b178              CBZ      r0,|L1.98|
000042  1e40              SUBS     r0,r0,#1
;;;246            {
;;;247                button_100_time --;
000044  f01000ff          ANDS     r0,r0,#0xff
000048  7060              STRB     r0,[r4,#1]
;;;248                if(button_100_time == 0)
00004a  d007              BEQ      |L1.92|
00004c  e009              B        |L1.98|
                  |L1.78|
00004e  1e49              SUBS     r1,r1,#1
000050  6401              STR      r1,[r0,#0x40]         ;234
000052  d1f4              BNE      |L1.62|
000054  2105              MOVS     r1,#5                 ;236
000056  f880102c          STRB     r1,[r0,#0x2c]         ;236
00005a  e7f0              B        |L1.62|
                  |L1.92|
;;;249                    Button_key_perss(0);
00005c  2000              MOVS     r0,#0
00005e  f7fffffe          BL       Button_key_perss
                  |L1.98|
;;;250            }
;;;251            
;;;252            if(static_rtc_cnt == 10)
000062  7920              LDRB     r0,[r4,#4]  ; static_rtc_cnt
000064  280a              CMP      r0,#0xa
000066  d008              BEQ      |L1.122|
000068  1c40              ADDS     r0,r0,#1
;;;253            {
;;;254                static_rtc_cnt = 0;
;;;255                RTC_TimeShow();
;;;256                RTC_DateShow();
;;;257            }
;;;258            else
;;;259                static_rtc_cnt++;
00006a  7120              STRB     r0,[r4,#4]
                  |L1.108|
;;;260    
;;;261         
;;;262    
;;;263             timer_flag = 1;
00006c  2001              MOVS     r0,#1
00006e  7020              STRB     r0,[r4,#0]
                  |L1.112|
;;;264    
;;;265    	}
;;;266    
;;;267    	TIM3->SR&=~(1<<0);//����жϱ�־λ
000070  8828              LDRH     r0,[r5,#0]
000072  f0200001          BIC      r0,r0,#1
000076  8028              STRH     r0,[r5,#0]
;;;268    }
000078  bd70              POP      {r4-r6,pc}
                  |L1.122|
00007a  7126              STRB     r6,[r4,#4]            ;254
00007c  f7fffffe          BL       RTC_TimeShow
000080  f7fffffe          BL       RTC_DateShow
000084  e7f2              B        |L1.108|
;;;269    //ͨ�ö�ʱ���жϳ�ʼ��
                          ENDP

000086  0000              DCW      0x0000
                  |L1.136|
                          DCD      0x40000410
                  |L1.140|
                          DCD      ||.data||
                  |L1.144|
                          DCD      system_flag_table

                          AREA ||i.Timer_task||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_percent
                          REQUIRE _printf_d
                          REQUIRE _printf_int_dec
                          REQUIRE _printf_x
                          REQUIRE _printf_longlong_hex
                  Timer_task PROC
;;;289    
;;;290    void Timer_task(void)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;291    {
;;;292        static u8 timer_cnt = 0;
;;;293        static u16 timer_bmp085_cnt = 0;
;;;294    
;;;295    
;;;296    #ifdef NEED_COM_TO_PC    
;;;297        extern u8 upload;
;;;298        extern u8 send_status ;
;;;299        extern u8 send_status_flag;
;;;300    #endif    
;;;301        //extern u32 Flash_Index;
;;;302        u8 user_key =0;
;;;303    
;;;304        if(timer_flag)
000004  4c5c              LDR      r4,|L2.376|
000006  7820              LDRB     r0,[r4,#0]  ; timer_flag
000008  2800              CMP      r0,#0                 ;291
00000a  d00b              BEQ      |L2.36|
;;;305        {
;;;306            timer_flag = 0;
00000c  2500              MOVS     r5,#0
00000e  7025              STRB     r5,[r4,#0]
;;;307        
;;;308            if(timer_cnt == 5)/**/
000010  7960              LDRB     r0,[r4,#5]  ; timer_cnt
000012  2805              CMP      r0,#5
000014  d008              BEQ      |L2.40|
000016  1c40              ADDS     r0,r0,#1
;;;309            {
;;;310                user_key = KEY_Scan();
;;;311                menu_keyprocess(user_key);
;;;312                user_key = 0;
;;;313                timer_cnt = 0;
;;;314                write_flash();
;;;315    
;;;316    
;;;317                if(USB_CONNECT == 1)
;;;318                {
;;;319    
;;;320                    if(system_power_flag == SYSTEM_POWER_STANBY)
;;;321                        GPS_power_ctrl(0);
;;;322    
;;;323                    if(usb_delay_timer_poweron)
;;;324                    {
;;;325                        v1000_debug("\r\n usb_delay_timer_poweron:%d",usb_delay_timer_poweron);
;;;326                        usb_delay_timer_poweron--;
;;;327                        if(usb_delay_timer_poweron == 0)
;;;328                        {
;;;329                            system_flag_table->usb_standy_poweron_flag = 1;
;;;330                            menu_keyprocess(5);
;;;331    #if 0                        
;;;332                            if(system_flag_table->guji_record.auto_recoed_flag == 1)
;;;333                            {
;;;334                                change_to_runmode_recoder(5);
;;;335                            }
;;;336    #endif
;;;337                        }
;;;338                    }
;;;339                    usb_delay_timer_poweroff =0;
;;;340                }
;;;341                else
;;;342                {
;;;343                    usb_delay_timer_poweron = 0;
;;;344                    if(usb_delay_timer_poweroff)
;;;345                    {
;;;346               
;;;347                        usb_delay_timer_poweroff--;
;;;348                        if(usb_delay_timer_poweroff == 0)
;;;349                        {
;;;350                            system_flag_table->usb_standy_poweron_flag = 0;
;;;351                            Choose_power_mode(MCU_STBY);
;;;352                            system_power_flag = SYSTEM_POWER_STANBY;
;;;353                        }
;;;354                    }
;;;355                }
;;;356    
;;;357               if(USB_CONNECT == 1)
;;;358                {
;;;359                    if(system_flag_table->charger_connected == 0)
;;;360                    {    
;;;361                        if((system_flag_table->usb_powerdown_flash == 1)&&(system_power_flag == SYSTEM_POWER_STANBY))
;;;362                        {                
;;;363                            usb_delay_timer_poweron = 30;
;;;364                            Choose_power_mode(MCU_RUN_USB);
;;;365                            change_clk_need_int(1);
;;;366                           // USB_Init();
;;;367                           // USB_Interrupts_Config();
;;;368                            v1000_debug("\r\n usb_delay_timer_poweron :%x",usb_delay_timer_poweron);
;;;369                        }
;;;370                        else
;;;371                        {
;;;372                            Choose_power_mode(MCU_RUN_USB);
;;;373                            change_clk_need_int(1);
;;;374                            USB_Init();
;;;375                            USB_Interrupts_Config();
;;;376                            menu_keyprocess(0xff);
;;;377                            //OLED_Clear();
;;;378                            OLED_Display_On();                            		
;;;379                            //GPS_power_ctrl(0);
;;;380                        }
;;;381    
;;;382          
;;;383                        v1000_debug("\r\n change to 32 mhz");
;;;384                        
;;;385                        if(system_power_flag != SYSTEM_POWER_STANBY)
;;;386                            menu_reflash();
;;;387    
;;;388                    }
;;;389    
;;;390                    system_flag_table->charger_connected = 1;
;;;391    
;;;392                }
;;;393                else
;;;394                {
;;;395    
;;;396                    if(system_flag_table->charger_connected == 1)
;;;397                    {
;;;398                        v1000_debug("\r\n change to 16 mhz  :%d \r\n",system_flag_table->usb_standy_poweron_flag );
;;;399                        USB_Interrupts_Config_disable();
;;;400                        system_flag_table->charger_connected = 0;
;;;401                        system_flag_table->usbdisk_flag = 0;
;;;402                        if(system_flag_table->usb_standy_poweron_flag == 1)
;;;403                        {
;;;404                            //system_flag_table->usb_standy_poweron_flag = 0;
;;;405                            usb_delay_timer_poweroff = 30;
;;;406                        }
;;;407                
;;;408                        if((system_power_flag == 2)&&(system_flag_table->run_mode == 0))
;;;409                        {
;;;410                            Choose_power_mode(MCU_LP_RUN);
;;;411                           //menu_keyprocess(0xff);
;;;412                        }
;;;413                        else if(system_power_flag == 1)
;;;414                        {
;;;415                            Choose_power_mode(MCU_RUN);
;;;416                            change_clk_need_int(0);
;;;417                
;;;418                        }
;;;419                        if(system_power_flag != SYSTEM_POWER_STANBY)
;;;420                            menu_reflash();
;;;421    
;;;422                        menu_keyprocess(0xff);
;;;423                        read_poi_file();
;;;424                    }
;;;425    
;;;426    
;;;427                 }
;;;428            }
;;;429            else
;;;430            {
;;;431                timer_cnt ++;
000018  7160              STRB     r0,[r4,#5]
                  |L2.26|
;;;432            }
;;;433        
;;;434            if(timer_bmp085_cnt == 100)
00001a  8a20              LDRH     r0,[r4,#0x10]  ; timer_bmp085_cnt
00001c  2864              CMP      r0,#0x64
00001e  d079              BEQ      |L2.276|
000020  1c40              ADDS     r0,r0,#1
;;;435            {
;;;436                timer_bmp085_cnt = 0;
;;;437                //v1000_debug("\r\n timer_bmp085_cnt\n");
;;;438    
;;;439                BMP085_get_process();
;;;440    
;;;441            }
;;;442            else
;;;443                 timer_bmp085_cnt ++;
000022  8220              STRH     r0,[r4,#0x10]
                  |L2.36|
;;;444        
;;;445    
;;;446        }
;;;447    }
000024  e8bd87f0          POP      {r4-r10,pc}
                  |L2.40|
000028  f7fffffe          BL       KEY_Scan
00002c  f7fffffe          BL       menu_keyprocess
000030  7165              STRB     r5,[r4,#5]            ;313
000032  f7fffffe          BL       write_flash
000036  f8df8144          LDR      r8,|L2.380|
00003a  f8d80200          LDR      r0,[r8,#0x200]        ;317
00003e  4e50              LDR      r6,|L2.384|
000040  4f50              LDR      r7,|L2.388|
000042  f04f0901          MOV      r9,#1                 ;329
000046  2801              CMP      r0,#1                 ;317
000048  d008              BEQ      |L2.92|
00004a  81a5              STRH     r5,[r4,#0xc]          ;343
00004c  89e0              LDRH     r0,[r4,#0xe]          ;344  ; usb_delay_timer_poweroff
00004e  b320              CBZ      r0,|L2.154|
000050  1e40              SUBS     r0,r0,#1              ;344
000052  0400              LSLS     r0,r0,#16             ;347
000054  0c00              LSRS     r0,r0,#16             ;347
000056  81e0              STRH     r0,[r4,#0xe]          ;347
000058  d018              BEQ      |L2.140|
00005a  e01e              B        |L2.154|
                  |L2.92|
00005c  7838              LDRB     r0,[r7,#0]            ;320  ; system_power_flag
00005e  b910              CBNZ     r0,|L2.102|
000060  2000              MOVS     r0,#0                 ;321
000062  f7fffffe          BL       GPS_power_ctrl
                  |L2.102|
000066  89a1              LDRH     r1,[r4,#0xc]          ;323  ; usb_delay_timer_poweron
000068  b171              CBZ      r1,|L2.136|
00006a  a047              ADR      r0,|L2.392|
00006c  f7fffffe          BL       __2printf
000070  89a0              LDRH     r0,[r4,#0xc]          ;326  ; usb_delay_timer_poweron
000072  1e40              SUBS     r0,r0,#1              ;326
000074  0400              LSLS     r0,r0,#16             ;326
000076  0c00              LSRS     r0,r0,#16             ;326
000078  81a0              STRH     r0,[r4,#0xc]          ;326
00007a  d105              BNE      |L2.136|
00007c  6831              LDR      r1,[r6,#0]            ;329  ; system_flag_table
00007e  2005              MOVS     r0,#5                 ;330
000080  f8819033          STRB     r9,[r1,#0x33]         ;329
000084  f7fffffe          BL       menu_keyprocess
                  |L2.136|
000088  81e5              STRH     r5,[r4,#0xe]          ;339
00008a  e006              B        |L2.154|
                  |L2.140|
00008c  6830              LDR      r0,[r6,#0]            ;350  ; system_flag_table
00008e  f8805033          STRB     r5,[r0,#0x33]         ;350
000092  2006              MOVS     r0,#6                 ;351
000094  f7fffffe          BL       Choose_power_mode
000098  703d              STRB     r5,[r7,#0]            ;352
                  |L2.154|
00009a  f8d80200          LDR      r0,[r8,#0x200]        ;357
00009e  f04f081e          MOV      r8,#0x1e              ;363
0000a2  2801              CMP      r0,#1                 ;357
0000a4  6830              LDR      r0,[r6,#0]            ;396  ; system_flag_table
0000a6  f890102d          LDRB     r1,[r0,#0x2d]         ;396
0000aa  d012              BEQ      |L2.210|
0000ac  2901              CMP      r1,#1                 ;396
0000ae  d1b4              BNE      |L2.26|
0000b0  f8901033          LDRB     r1,[r0,#0x33]         ;398
0000b4  a03c              ADR      r0,|L2.424|
0000b6  f7fffffe          BL       __2printf
0000ba  f7fffffe          BL       USB_Interrupts_Config_disable
0000be  6830              LDR      r0,[r6,#0]            ;400  ; system_flag_table
0000c0  f880502d          STRB     r5,[r0,#0x2d]         ;400
0000c4  f8805038          STRB     r5,[r0,#0x38]         ;401
0000c8  f8901033          LDRB     r1,[r0,#0x33]         ;402
0000cc  2901              CMP      r1,#1                 ;402
0000ce  d02f              BEQ      |L2.304|
0000d0  e030              B        |L2.308|
                  |L2.210|
0000d2  b9d9              CBNZ     r1,|L2.268|
0000d4  f8900030          LDRB     r0,[r0,#0x30]         ;361
0000d8  2801              CMP      r0,#1                 ;361
0000da  d101              BNE      |L2.224|
0000dc  7838              LDRB     r0,[r7,#0]            ;361  ; system_power_flag
0000de  b1d0              CBZ      r0,|L2.278|
                  |L2.224|
0000e0  2007              MOVS     r0,#7                 ;372
0000e2  f7fffffe          BL       Choose_power_mode
0000e6  2001              MOVS     r0,#1                 ;373
0000e8  f7fffffe          BL       change_clk_need_int
0000ec  f7fffffe          BL       USB_Init
0000f0  f7fffffe          BL       USB_Interrupts_Config
0000f4  20ff              MOVS     r0,#0xff              ;376
0000f6  f7fffffe          BL       menu_keyprocess
0000fa  f7fffffe          BL       OLED_Display_On
                  |L2.254|
0000fe  a031              ADR      r0,|L2.452|
000100  f7fffffe          BL       __2printf
000104  7838              LDRB     r0,[r7,#0]            ;385  ; system_power_flag
000106  b108              CBZ      r0,|L2.268|
000108  f7fffffe          BL       menu_reflash
                  |L2.268|
00010c  6831              LDR      r1,[r6,#0]            ;390  ; system_flag_table
00010e  f881902d          STRB     r9,[r1,#0x2d]         ;390
000112  e782              B        |L2.26|
                  |L2.276|
000114  e02a              B        |L2.364|
                  |L2.278|
000116  f8a4800c          STRH     r8,[r4,#0xc]          ;363
00011a  2007              MOVS     r0,#7                 ;364
00011c  f7fffffe          BL       Choose_power_mode
000120  2001              MOVS     r0,#1                 ;365
000122  f7fffffe          BL       change_clk_need_int
000126  89a1              LDRH     r1,[r4,#0xc]          ;368  ; usb_delay_timer_poweron
000128  a02b              ADR      r0,|L2.472|
00012a  f7fffffe          BL       __2printf
00012e  e7e6              B        |L2.254|
                  |L2.304|
000130  f8a4800e          STRH     r8,[r4,#0xe]          ;405
                  |L2.308|
000134  7839              LDRB     r1,[r7,#0]            ;408  ; system_power_flag
000136  2902              CMP      r1,#2                 ;408
000138  d002              BEQ      |L2.320|
00013a  2901              CMP      r1,#1                 ;413
00013c  d006              BEQ      |L2.332|
00013e  e00b              B        |L2.344|
                  |L2.320|
000140  7800              LDRB     r0,[r0,#0]            ;408
000142  b958              CBNZ     r0,|L2.348|
000144  2002              MOVS     r0,#2                 ;410
000146  f7fffffe          BL       Choose_power_mode
00014a  e005              B        |L2.344|
                  |L2.332|
00014c  2000              MOVS     r0,#0                 ;415
00014e  f7fffffe          BL       Choose_power_mode
000152  2000              MOVS     r0,#0                 ;416
000154  f7fffffe          BL       change_clk_need_int
                  |L2.344|
000158  7838              LDRB     r0,[r7,#0]            ;419  ; system_power_flag
00015a  b108              CBZ      r0,|L2.352|
                  |L2.348|
00015c  f7fffffe          BL       menu_reflash
                  |L2.352|
000160  20ff              MOVS     r0,#0xff              ;422
000162  f7fffffe          BL       menu_keyprocess
000166  f7fffffe          BL       read_poi_file
00016a  e756              B        |L2.26|
                  |L2.364|
00016c  8225              STRH     r5,[r4,#0x10]         ;436
00016e  e8bd47f0          POP      {r4-r10,lr}           ;439
000172  f7ffbffe          B.W      BMP085_get_process
;;;448    
                          ENDP

000176  0000              DCW      0x0000
                  |L2.376|
                          DCD      ||.data||
                  |L2.380|
                          DCD      0x42400000
                  |L2.384|
                          DCD      system_flag_table
                  |L2.388|
                          DCD      system_power_flag
                  |L2.392|
000188  0d0a2075          DCB      "\r\n usb_delay_timer_poweron:%d",0
00018c  73625f64
000190  656c6179
000194  5f74696d
000198  65725f70
00019c  6f776572
0001a0  6f6e3a25
0001a4  6400    
0001a6  00                DCB      0
0001a7  00                DCB      0
                  |L2.424|
0001a8  0d0a2063          DCB      "\r\n change to 16 mhz  :%d \r\n",0
0001ac  68616e67
0001b0  6520746f
0001b4  20313620
0001b8  6d687a20
0001bc  203a2564
0001c0  200d0a00
                  |L2.452|
0001c4  0d0a2063          DCB      "\r\n change to 32 mhz",0
0001c8  68616e67
0001cc  6520746f
0001d0  20333220
0001d4  6d687a00
                  |L2.472|
0001d8  0d0a2075          DCB      "\r\n usb_delay_timer_poweron :%x",0
0001dc  73625f64
0001e0  656c6179
0001e4  5f74696d
0001e8  65725f70
0001ec  6f776572
0001f0  6f6e203a
0001f4  257800  
0001f7  00                DCB      0

                          AREA ||i.Timerx_Init||, CODE, READONLY, ALIGN=2

                  Timerx_Init PROC
;;;274    
;;;275    void Timerx_Init(u16 arr,u16 psc)
000000  4a0d              LDR      r2,|L3.56|
;;;276    {
;;;277    	RCC->APB1ENR|=1<<1;//TIM3ʱ��ʹ��
000002  6813              LDR      r3,[r2,#0]
000004  f0430302          ORR      r3,r3,#2
000008  6013              STR      r3,[r2,#0]
;;;278     	TIM3->ARR=arr;  //�趨�������Զ���װֵ//�պ�1ms
00000a  4a0c              LDR      r2,|L3.60|
00000c  6010              STR      r0,[r2,#0]
;;;279    	TIM3->PSC=psc;  //Ԥ��Ƶ��7200,�õ�10Khz�ļ���ʱ��
00000e  1f10              SUBS     r0,r2,#4
000010  8001              STRH     r1,[r0,#0]
;;;280    	//����������Ҫͬʱ���òſ���ʹ���ж�
;;;281    	TIM3->DIER|=1<<0;   //���������ж�
000012  480a              LDR      r0,|L3.60|
000014  3820              SUBS     r0,r0,#0x20
000016  8801              LDRH     r1,[r0,#0]
000018  f0410101          ORR      r1,r1,#1
00001c  8001              STRH     r1,[r0,#0]
;;;282    //	TIM3->DIER|=1<<6;   //���������ж�
;;;283    	TIM3->CR1|=0x01;    //ʹ�ܶ�ʱ��3
00001e  4807              LDR      r0,|L3.60|
000020  382c              SUBS     r0,r0,#0x2c
000022  8801              LDRH     r1,[r0,#0]
000024  f0410101          ORR      r1,r1,#1
000028  8001              STRH     r1,[r0,#0]
;;;284      	MY_NVIC_Init(1,3,TIM3_IRQn,2);//��ռ1�������ȼ�3����2
00002a  2302              MOVS     r3,#2
00002c  221d              MOVS     r2,#0x1d
00002e  2103              MOVS     r1,#3
000030  2001              MOVS     r0,#1
000032  f7ffbffe          B.W      MY_NVIC_Init
;;;285    }
;;;286    
                          ENDP

000036  0000              DCW      0x0000
                  |L3.56|
                          DCD      0x40023824
                  |L3.60|
                          DCD      0x4000042c

                          AREA ||i.arriving_sound_proess||, CODE, READONLY, ALIGN=2

                  arriving_sound_proess PROC
;;;479    
;;;480    void arriving_sound_proess(void)
000000  b570              PUSH     {r4-r6,lr}
;;;481    {
;;;482        if(Arriving_sound_flag != 0 && Arriving_sound_flag != 0xff)
000002  4c15              LDR      r4,|L4.88|
000004  7820              LDRB     r0,[r4,#0]  ; Arriving_sound_flag
000006  2800              CMP      r0,#0                 ;481
000008  d00e              BEQ      |L4.40|
00000a  28ff              CMP      r0,#0xff
00000c  d00c              BEQ      |L4.40|
00000e  1c40              ADDS     r0,r0,#1
;;;483        {
;;;484            Arriving_sound_flag++;
000010  b2c0              UXTB     r0,r0
000012  2600              MOVS     r6,#0
;;;485            if(Arriving_sound_flag == 2|| Arriving_sound_flag == 4 || Arriving_sound_flag == 6)
;;;486            {
;;;487                LED0 = 1;
000014  4d11              LDR      r5,|L4.92|
000016  7020              STRB     r0,[r4,#0]            ;484
000018  2802              CMP      r0,#2                 ;485
00001a  d006              BEQ      |L4.42|
00001c  2804              CMP      r0,#4                 ;485
00001e  d004              BEQ      |L4.42|
000020  2806              CMP      r0,#6                 ;485
000022  d002              BEQ      |L4.42|
;;;488                di_and_flash_empet(2);
;;;489                LED0 = 0;/*��Ҫ������Ӧ̫��ʱ��*/
;;;490                delay_ms(150);
;;;491                di_and_flash_empet(2);
;;;492                if(Arriving_sound_flag == 6)
;;;493                {
;;;494                   LED0 = 0;
;;;495                   Arriving_sound_flag = 0xff;
;;;496                }
;;;497        
;;;498             }
;;;499             else
;;;500                LED0 = 0;
000024  f8c562b8          STR      r6,[r5,#0x2b8]
                  |L4.40|
;;;501        
;;;502          }
;;;503    
;;;504    }
000028  bd70              POP      {r4-r6,pc}
                  |L4.42|
00002a  2001              MOVS     r0,#1                 ;487
00002c  f8c502b8          STR      r0,[r5,#0x2b8]        ;487
000030  2002              MOVS     r0,#2                 ;488
000032  f7fffffe          BL       di_and_flash_empet
000036  f8c562b8          STR      r6,[r5,#0x2b8]        ;489
00003a  2096              MOVS     r0,#0x96              ;490
00003c  f7fffffe          BL       delay_ms
000040  2002              MOVS     r0,#2                 ;491
000042  f7fffffe          BL       di_and_flash_empet
000046  7820              LDRB     r0,[r4,#0]            ;492  ; Arriving_sound_flag
000048  2806              CMP      r0,#6                 ;492
00004a  d1ed              BNE      |L4.40|
00004c  f8c562b8          STR      r6,[r5,#0x2b8]        ;494
000050  20ff              MOVS     r0,#0xff              ;495
000052  7020              STRB     r0,[r4,#0]            ;495
000054  bd70              POP      {r4-r6,pc}
;;;505    void powerlow_proess(void)
                          ENDP

000056  0000              DCW      0x0000
                  |L4.88|
                          DCD      Arriving_sound_flag
                  |L4.92|
                          DCD      0x42400000

                          AREA ||i.gps_data_receiver||, CODE, READONLY, ALIGN=2

                  gps_data_receiver PROC
;;;569    
;;;570    void gps_data_receiver(void)
000000  b570              PUSH     {r4-r6,lr}
;;;571    {
;;;572        u16 rxlen = 0;
;;;573    
;;;574        if(USART2_RX_STA&0X8000)        //���յ�һ��������
000002  4d1a              LDR      r5,|L5.108|
000004  8828              LDRH     r0,[r5,#0]  ; USART2_RX_STA
000006  0401              LSLS     r1,r0,#16
000008  d523              BPL      |L5.82|
;;;575        {
;;;576            //��ʾ��Ϣ
;;;577            rxlen = USART2_RX_STA&0X7FFF;   //�õ����ݳ���
;;;578            
;;;579    #ifdef NEED_COM_TO_PC   
;;;580    
;;;581            for(i=0;i<rxlen;i++)
;;;582            {
;;;583                USART1_TX_BUF[i]=USART2_RX_BUF[i];
;;;584             
;;;585                if(gps_v1000_debug_status == 0)
;;;586                {
;;;587                    USART_To_USB_Send_Data(USART1_TX_BUF[i]);
;;;588    
;;;589                }
;;;590    
;;;591            }
;;;592    #endif           
;;;593        
;;;594            USART2_RX_BUF[rxlen] = 0;           //�Զ����ӽ�����
00000a  4919              LDR      r1,|L5.112|
00000c  f3c0000e          UBFX     r0,r0,#0,#15          ;577
;;;595            //v1000_debug("%s",USART2_RX_BUF);        
;;;596            //memset(gpsx,0,sizeof(nmea_msg));
;;;597            GPS_Analysis(gpsx,(u8*)USART2_RX_BUF);//�����ַ���
000010  4c18              LDR      r4,|L5.116|
000012  2600              MOVS     r6,#0                 ;594
000014  540e              STRB     r6,[r1,r0]            ;594
000016  6820              LDR      r0,[r4,#0]  ; gpsx
000018  f7fffffe          BL       GPS_Analysis
;;;598            USART2_RX_STA=0;           //������һ�ν���
;;;599            
;;;600            if(average_speed == 0xffff)
00001c  4816              LDR      r0,|L5.120|
00001e  802e              STRH     r6,[r5,#0]            ;598
000020  69c1              LDR      r1,[r0,#0x1c]  ; average_speed
000022  f5a1427f          SUB      r2,r1,#0xff00
000026  3aff              SUBS     r2,r2,#0xff
000028  d014              BEQ      |L5.84|
;;;601                average_speed = gpsx->speed;
;;;602            else
;;;603                average_speed =(average_speed + gpsx->speed)/2;
00002a  6822              LDR      r2,[r4,#0]  ; gpsx
00002c  f8d22080          LDR      r2,[r2,#0x80]
000030  4411              ADD      r1,r1,r2
000032  0849              LSRS     r1,r1,#1
                  |L5.52|
;;;604    
;;;605    #if 0
;;;606            {
;;;607                v1000_debug("\nDMA DATA:");
;;;608                USART_DMACmd(USART1, USART_DMAReq_Tx, ENABLE);           //ʹ�ܴ���1��DMA����
;;;609                MYDMA_Enable(DMA1_Channel4);//��ʼһ��DMA���䣡
;;;610            }
;;;611    #endif
;;;612            guji_Distance();
000034  61c1              STR      r1,[r0,#0x1c]  ; average_speed
000036  f7fffffe          BL       guji_Distance
;;;613            menu_3d_seq();
00003a  f7fffffe          BL       menu_3d_seq
;;;614    
;;;615            if(rtc_set_flag == 1)
00003e  480f              LDR      r0,|L5.124|
000040  7801              LDRB     r1,[r0,#0]  ; rtc_set_flag
000042  2901              CMP      r1,#1
;;;616            {
;;;617                if(gpsx->svnum >= 3)
;;;618                {
;;;619                    rtc_set_flag = 0;            
;;;620                     check_time();
;;;621                }
;;;622            }
;;;623            else
;;;624            {
;;;625                if(gpsx->svnum < 2)
000044  6821              LDR      r1,[r4,#0]  ; gpsx
000046  7809              LDRB     r1,[r1,#0]
000048  d008              BEQ      |L5.92|
00004a  2902              CMP      r1,#2
00004c  d201              BCS      |L5.82|
;;;626                {
;;;627                    rtc_set_flag = 1;
00004e  2101              MOVS     r1,#1
000050  7001              STRB     r1,[r0,#0]
                  |L5.82|
;;;628                }
;;;629    
;;;630            }
;;;631        }
;;;632    
;;;633    }
000052  bd70              POP      {r4-r6,pc}
                  |L5.84|
000054  6821              LDR      r1,[r4,#0]            ;601  ; gpsx
000056  f8d11080          LDR      r1,[r1,#0x80]         ;601
00005a  e7eb              B        |L5.52|
                  |L5.92|
00005c  2903              CMP      r1,#3                 ;617
00005e  d3f8              BCC      |L5.82|
000060  7006              STRB     r6,[r0,#0]            ;619
000062  e8bd4070          POP      {r4-r6,lr}            ;620
000066  f7ffbffe          B.W      check_time
;;;634    
                          ENDP

00006a  0000              DCW      0x0000
                  |L5.108|
                          DCD      USART2_RX_STA
                  |L5.112|
                          DCD      USART2_RX_BUF
                  |L5.116|
                          DCD      gpsx
                  |L5.120|
                          DCD      ||.data||
                  |L5.124|
                          DCD      rtc_set_flag

                          AREA ||i.handler_timer_1s||, CODE, READONLY, ALIGN=2

                  handler_timer_1s PROC
;;;538    
;;;539    u8 handler_timer_1s(void)
000000  b510              PUSH     {r4,lr}
;;;540    {
;;;541        
;;;542        if(timer_1s_cnt == 100)
000002  4c10              LDR      r4,|L6.68|
000004  88e0              LDRH     r0,[r4,#6]  ; timer_1s_cnt
000006  2864              CMP      r0,#0x64
000008  d10a              BNE      |L6.32|
;;;543        {
;;;544            timer_1s_cnt = 0;
00000a  2000              MOVS     r0,#0
00000c  80e0              STRH     r0,[r4,#6]
;;;545    
;;;546            vddmv_adc_proess();
00000e  f7fffffe          BL       vddmv_adc_proess
;;;547    
;;;548            if(system_power_flag == SYSTEM_POWER_STANBY)
000012  480d              LDR      r0,|L6.72|
000014  7800              LDRB     r0,[r0,#0]  ; system_power_flag
000016  b128              CBZ      r0,|L6.36|
;;;549            {
;;;550                //v1000_debug("vddmv_adc_proess \r\n");
;;;551                if((USB_CONNECT == 0)&&(usb_delay_timer_poweron == 0)&&(KEY2 == 0))
;;;552                {
;;;553                    system_power_flag = SYSTEM_POWER_STANBY;
;;;554                    Choose_power_mode(MCU_STBY);
;;;555                }
;;;556                return 1;
;;;557            }
;;;558            else
;;;559            {
;;;560                arriving_sound_proess();
000018  f7fffffe          BL       arriving_sound_proess
;;;561                powerlow_proess();
00001c  f7fffffe          BL       powerlow_proess
                  |L6.32|
;;;562                #ifdef baoyu
;;;563                   baoyu_1s_timer_proess(); 
;;;564                #endif
;;;565            }
;;;566        }
;;;567       return 0;    
000020  2000              MOVS     r0,#0
;;;568    }
000022  bd10              POP      {r4,pc}
                  |L6.36|
000024  4809              LDR      r0,|L6.76|
000026  f8d00200          LDR      r0,[r0,#0x200]        ;551
00002a  89a1              LDRH     r1,[r4,#0xc]          ;551  ; usb_delay_timer_poweron
00002c  4308              ORRS     r0,r0,r1              ;551
00002e  d106              BNE      |L6.62|
000030  4807              LDR      r0,|L6.80|
000032  f8d00234          LDR      r0,[r0,#0x234]        ;551
000036  b910              CBNZ     r0,|L6.62|
000038  2006              MOVS     r0,#6                 ;554
00003a  f7fffffe          BL       Choose_power_mode
                  |L6.62|
00003e  2001              MOVS     r0,#1                 ;556
000040  bd10              POP      {r4,pc}
;;;569    
                          ENDP

000042  0000              DCW      0x0000
                  |L6.68|
                          DCD      ||.data||
                  |L6.72|
                          DCD      system_power_flag
                  |L6.76|
                          DCD      0x42400000
                  |L6.80|
                          DCD      0x42410000

                          AREA ||i.main_porcess||, CODE, READONLY, ALIGN=2

                  main_porcess PROC
;;;634    
;;;635    void main_porcess(void)
000000  b570              PUSH     {r4-r6,lr}
;;;636    {
;;;637        u8 ret =0;
;;;638    #ifdef NEED_COM_TO_PC    
;;;639        extern u8 gps_v1000_debug_status ;
;;;640    #endif
;;;641    
;;;642        gps_data_receiver();
000002  f7fffffe          BL       gps_data_receiver
;;;643    
;;;644        ret = handler_timer_1s();
000006  f7fffffe          BL       handler_timer_1s
00000a  4604              MOV      r4,r0
;;;645    
;;;646        if(system_flag_table->run_mode == 1)
00000c  4810              LDR      r0,|L7.80|
00000e  2500              MOVS     r5,#0
000010  6800              LDR      r0,[r0,#0]  ; system_flag_table
000012  7801              LDRB     r1,[r0,#0]
000014  2901              CMP      r1,#1
000016  d107              BNE      |L7.40|
;;;647        {
;;;648            if(system_flag_table->recored_run_flag == 1)
000018  f8901039          LDRB     r1,[r0,#0x39]
00001c  2901              CMP      r1,#1
00001e  d103              BNE      |L7.40|
;;;649            {
;;;650                system_flag_table->recored_run_flag = 0;
000020  f8805039          STRB     r5,[r0,#0x39]
;;;651                Recording_guji();
000024  f7fffffe          BL       Recording_guji
                  |L7.40|
;;;652        
;;;653            }
;;;654    
;;;655        }
;;;656        
;;;657        if(ret == 1)
000028  2c01              CMP      r4,#1
00002a  d00f              BEQ      |L7.76|
;;;658        {
;;;659            return;
;;;660        }    
;;;661        if(save_tsp_tp_timer == 90000)
00002c  4c09              LDR      r4,|L7.84|
00002e  490a              LDR      r1,|L7.88|
000030  69a0              LDR      r0,[r4,#0x18]  ; save_tsp_tp_timer
000032  4288              CMP      r0,r1
000034  d102              BNE      |L7.60|
;;;662      	{
;;;663      	    save_tsp_tp();
000036  f7fffffe          BL       save_tsp_tp
;;;664    	    save_tsp_tp_timer = 0;
00003a  61a5              STR      r5,[r4,#0x18]  ; save_tsp_tp_timer
                  |L7.60|
;;;665      	}
;;;666    
;;;667        if(save_tsp_s_timer == 15000)
00003c  8920              LDRH     r0,[r4,#8]  ; save_tsp_s_timer
00003e  f5a05168          SUB      r1,r0,#0x3a00
000042  3998              SUBS     r1,r1,#0x98
000044  d102              BNE      |L7.76|
;;;668      	{
;;;669            save_tsp_s();
000046  f7fffffe          BL       save_tsp_s
;;;670    	    save_tsp_s_timer = 0;
00004a  8125              STRH     r5,[r4,#8]
                  |L7.76|
;;;671      	}
;;;672        
;;;673    #ifdef NEED_COM_TO_PC
;;;674        if(send_status_flag == 1)
;;;675        {
;;;676            test_read_flash_and_v1000_debug();
;;;677            send_status_flag = 0;
;;;678        }
;;;679    #endif
;;;680    }
00004c  bd70              POP      {r4-r6,pc}
;;;681    
                          ENDP

00004e  0000              DCW      0x0000
                  |L7.80|
                          DCD      system_flag_table
                  |L7.84|
                          DCD      ||.data||
                  |L7.88|
                          DCD      0x00015f90

                          AREA ||i.powerlow_proess||, CODE, READONLY, ALIGN=2

                  powerlow_proess PROC
;;;504    }
;;;505    void powerlow_proess(void)
000000  b538              PUSH     {r3-r5,lr}
;;;506    {
;;;507        if(system_flag_table->To_lower_timercnt)
000002  4c18              LDR      r4,|L8.100|
000004  6821              LDR      r1,[r4,#0]  ; system_flag_table
000006  8f88              LDRH     r0,[r1,#0x3c]
000008  2800              CMP      r0,#0                 ;506
00000a  d02a              BEQ      |L8.98|
00000c  1e40              SUBS     r0,r0,#1              ;506
;;;508        {
;;;509            system_flag_table->To_lower_timercnt--;
00000e  0400              LSLS     r0,r0,#16
000010  0c00              LSRS     r0,r0,#16
000012  8788              STRH     r0,[r1,#0x3c]
;;;510            if(system_flag_table->To_lower_timercnt == 0)
000014  d125              BNE      |L8.98|
;;;511            {
;;;512                OLED_Fill(0, 0, 127, 63, 0);
000016  233f              MOVS     r3,#0x3f
000018  227f              MOVS     r2,#0x7f
00001a  4601              MOV      r1,r0
00001c  9000              STR      r0,[sp,#0]
00001e  f7fffffe          BL       OLED_Fill
;;;513                if((system_flag_table->run_mode == 0)&&(usb_delay_timer_poweron == 0))
000022  6820              LDR      r0,[r4,#0]  ; system_flag_table
000024  7801              LDRB     r1,[r0,#0]
000026  4810              LDR      r0,|L8.104|
000028  8980              LDRH     r0,[r0,#0xc]  ; usb_delay_timer_poweron
00002a  4301              ORRS     r1,r1,r0
;;;514                {
;;;515                    if(system_power_flag == SYSTEM_POWER_STANBY)
00002c  480f              LDR      r0,|L8.108|
00002e  d005              BEQ      |L8.60|
;;;516                    {
;;;517                        if(USB_CONNECT  == 0)
;;;518                        {
;;;519    
;;;520                            Choose_power_mode(MCU_STBY);
;;;521                        }
;;;522                    }
;;;523                    else
;;;524                    {
;;;525                        system_power_flag = 3;
;;;526                        if(USB_CONNECT  == 0)
;;;527                        {
;;;528                             Choose_power_mode(MCU_LP_RUN);
;;;529                        }
;;;530                    }
;;;531                }
;;;532                else
;;;533                    system_power_flag = 2;
000030  2102              MOVS     r1,#2
000032  7001              STRB     r1,[r0,#0]
                  |L8.52|
;;;534                OLED_Refresh_Gram();
000034  e8bd4038          POP      {r3-r5,lr}
000038  f7ffbffe          B.W      OLED_Refresh_Gram
                  |L8.60|
00003c  7802              LDRB     r2,[r0,#0]            ;515  ; system_power_flag
00003e  490c              LDR      r1,|L8.112|
000040  b14a              CBZ      r2,|L8.86|
000042  2203              MOVS     r2,#3                 ;525
000044  7002              STRB     r2,[r0,#0]            ;525
000046  f8d10200          LDR      r0,[r1,#0x200]        ;526
00004a  2800              CMP      r0,#0                 ;526
00004c  d1f2              BNE      |L8.52|
00004e  2002              MOVS     r0,#2                 ;528
                  |L8.80|
000050  f7fffffe          BL       Choose_power_mode
000054  e7ee              B        |L8.52|
                  |L8.86|
000056  f8d10200          LDR      r0,[r1,#0x200]        ;517
00005a  2800              CMP      r0,#0                 ;517
00005c  d1ea              BNE      |L8.52|
00005e  2006              MOVS     r0,#6                 ;520
000060  e7f6              B        |L8.80|
                  |L8.98|
;;;535            }
;;;536        }
;;;537    }
000062  bd38              POP      {r3-r5,pc}
;;;538    
                          ENDP

                  |L8.100|
                          DCD      system_flag_table
                  |L8.104|
                          DCD      ||.data||
                  |L8.108|
                          DCD      system_power_flag
                  |L8.112|
                          DCD      0x42400000

                          AREA ||i.timer_guji_type||, CODE, READONLY, ALIGN=2

                  timer_guji_type PROC
;;;129    
;;;130    void timer_guji_type(void)
000000  4809              LDR      r0,|L9.40|
;;;131    {
;;;132        if(guji_mode >= RECORED_START_DOING)
000002  2100              MOVS     r1,#0
000004  7802              LDRB     r2,[r0,#0]  ; guji_mode
;;;133        {
;;;134           guji_1s_time++;
000006  4809              LDR      r0,|L9.44|
000008  2a02              CMP      r2,#2                 ;132
00000a  d30b              BCC      |L9.36|
00000c  7882              LDRB     r2,[r0,#2]  ; guji_1s_time
00000e  1c52              ADDS     r2,r2,#1
000010  b2d2              UXTB     r2,r2
000012  7082              STRB     r2,[r0,#2]
;;;135           if(guji_1s_time == 100)
000014  2a64              CMP      r2,#0x64
000016  d104              BNE      |L9.34|
;;;136           {
;;;137               guji_1s_time  = 0;
000018  7081              STRB     r1,[r0,#2]
;;;138               tatol_time += 1;
00001a  4805              LDR      r0,|L9.48|
00001c  6801              LDR      r1,[r0,#0]  ; tatol_time
00001e  1c49              ADDS     r1,r1,#1
000020  6001              STR      r1,[r0,#0]  ; tatol_time
                  |L9.34|
;;;139           }
;;;140        
;;;141        }
;;;142        else
;;;143        {
;;;144              guji_1s_time  = 0;
;;;145        }
;;;146           
;;;147    
;;;148    }
000022  4770              BX       lr
                  |L9.36|
000024  7081              STRB     r1,[r0,#2]            ;144
000026  4770              BX       lr
;;;149    
                          ENDP

                  |L9.40|
                          DCD      guji_mode
                  |L9.44|
                          DCD      ||.data||
                  |L9.48|
                          DCD      tatol_time

                          AREA ||i.timer_lower2_type||, CODE, READONLY, ALIGN=2

                  timer_lower2_type PROC
;;;69     
;;;70     void timer_lower2_type(void)
000000  b538              PUSH     {r3-r5,lr}
;;;71     {
;;;72         if((system_power_flag == SYSTEM_POWER_LOW_2)&&(system_flag_table->run_mode == 0))
000002  482a              LDR      r0,|L10.172|
000004  2500              MOVS     r5,#0
;;;73         {
;;;74             flash_led_low_power_timer ++;
000006  4c2a              LDR      r4,|L10.176|
000008  7800              LDRB     r0,[r0,#0]            ;72  ; system_power_flag
00000a  2803              CMP      r0,#3                 ;72
00000c  d103              BNE      |L10.22|
00000e  4829              LDR      r0,|L10.180|
000010  6800              LDR      r0,[r0,#0]            ;72  ; system_flag_table
000012  7800              LDRB     r0,[r0,#0]            ;72
000014  b110              CBZ      r0,|L10.28|
                  |L10.22|
;;;75             if(flash_led_flag == 0)
;;;76             {
;;;77                 if(flash_led_low_power_timer == 350)
;;;78                 {
;;;79                     flash_led_low_power_timer = 0;
;;;80                     //LED0=1;
;;;81                     Movie_Show_Img(58,24,Bmp_stanby_1);
;;;82                     OLED_Refresh_Gram();//������ʾ
;;;83                     flash_led_flag =1;
;;;84                 }
;;;85             }
;;;86             else if(flash_led_flag == 1)
;;;87             {
;;;88                 if(flash_led_low_power_timer == 10)
;;;89                 {
;;;90                     flash_led_low_power_timer = 0;
;;;91                     OLED_Clear();
;;;92                     OLED_Fill(58, 24, 70, 36, 0);
;;;93                     OLED_Refresh_Gram();//������ʾ
;;;94                     flash_led_flag = 2;
;;;95                 }
;;;96             }
;;;97             else if(flash_led_flag == 2)
;;;98             {
;;;99                 if(flash_led_low_power_timer == 20)
;;;100                {
;;;101                    flash_led_low_power_timer = 0;
;;;102                    OLED_Clear();
;;;103                    Movie_Show_Img(58,24,Bmp_stanby_1);
;;;104                    OLED_Refresh_Gram();//������ʾ
;;;105                    flash_led_flag = 3;
;;;106                }
;;;107            }
;;;108            else if(flash_led_flag == 3)
;;;109            {
;;;110                if(flash_led_low_power_timer == 10)
;;;111                {
;;;112                    flash_led_low_power_timer = 0;
;;;113                    OLED_Clear();
;;;114                    OLED_Fill(58, 24, 70, 36, 0);
;;;115                    OLED_Refresh_Gram();//������ʾ
;;;116                    flash_led_flag = 0;
;;;117                }
;;;118             }
;;;119         }
;;;120         else
;;;121         {
;;;122             flash_led_flag = 0;
000016  70e5              STRB     r5,[r4,#3]
;;;123             flash_led_low_power_timer = 0;
000018  8165              STRH     r5,[r4,#0xa]
                  |L10.26|
;;;124         }
;;;125    
;;;126    
;;;127    }
00001a  bd38              POP      {r3-r5,pc}
                  |L10.28|
00001c  8960              LDRH     r0,[r4,#0xa]          ;74  ; flash_led_low_power_timer
00001e  1c40              ADDS     r0,r0,#1              ;74
000020  b280              UXTH     r0,r0                 ;74
000022  8160              STRH     r0,[r4,#0xa]          ;74
000024  78e1              LDRB     r1,[r4,#3]            ;75  ; flash_led_flag
000026  b1a9              CBZ      r1,|L10.84|
000028  2901              CMP      r1,#1                 ;86
00002a  d020              BEQ      |L10.110|
00002c  2902              CMP      r1,#2                 ;97
00002e  d02f              BEQ      |L10.144|
000030  2903              CMP      r1,#3                 ;108
000032  d1f2              BNE      |L10.26|
000034  280a              CMP      r0,#0xa               ;110
000036  d1f0              BNE      |L10.26|
000038  8165              STRH     r5,[r4,#0xa]          ;112
00003a  f7fffffe          BL       OLED_Clear
00003e  2324              MOVS     r3,#0x24              ;114
000040  2246              MOVS     r2,#0x46              ;114
000042  2118              MOVS     r1,#0x18              ;114
000044  203a              MOVS     r0,#0x3a              ;114
000046  9500              STR      r5,[sp,#0]            ;114
000048  f7fffffe          BL       OLED_Fill
00004c  f7fffffe          BL       OLED_Refresh_Gram
000050  70e5              STRB     r5,[r4,#3]            ;116
                  |L10.82|
000052  bd38              POP      {r3-r5,pc}
                  |L10.84|
000054  f5b07faf          CMP      r0,#0x15e             ;77
000058  d1fb              BNE      |L10.82|
00005a  8165              STRH     r5,[r4,#0xa]          ;79
00005c  4a16              LDR      r2,|L10.184|
00005e  2118              MOVS     r1,#0x18              ;81
000060  203a              MOVS     r0,#0x3a              ;81
000062  f7fffffe          BL       Movie_Show_Img
000066  f7fffffe          BL       OLED_Refresh_Gram
00006a  2001              MOVS     r0,#1                 ;83
00006c  e00e              B        |L10.140|
                  |L10.110|
00006e  280a              CMP      r0,#0xa               ;88
000070  d1ef              BNE      |L10.82|
000072  8165              STRH     r5,[r4,#0xa]          ;90
000074  f7fffffe          BL       OLED_Clear
000078  2324              MOVS     r3,#0x24              ;92
00007a  2246              MOVS     r2,#0x46              ;92
00007c  2118              MOVS     r1,#0x18              ;92
00007e  203a              MOVS     r0,#0x3a              ;92
000080  9500              STR      r5,[sp,#0]            ;92
000082  f7fffffe          BL       OLED_Fill
000086  f7fffffe          BL       OLED_Refresh_Gram
00008a  2002              MOVS     r0,#2                 ;94
                  |L10.140|
00008c  70e0              STRB     r0,[r4,#3]            ;83
                  |L10.142|
00008e  bd38              POP      {r3-r5,pc}
                  |L10.144|
000090  2814              CMP      r0,#0x14              ;99
000092  d1fc              BNE      |L10.142|
000094  8165              STRH     r5,[r4,#0xa]          ;101
000096  f7fffffe          BL       OLED_Clear
00009a  4a07              LDR      r2,|L10.184|
00009c  2118              MOVS     r1,#0x18              ;103
00009e  203a              MOVS     r0,#0x3a              ;103
0000a0  f7fffffe          BL       Movie_Show_Img
0000a4  f7fffffe          BL       OLED_Refresh_Gram
0000a8  2003              MOVS     r0,#3                 ;105
0000aa  e7ef              B        |L10.140|
;;;128    
                          ENDP

                  |L10.172|
                          DCD      system_power_flag
                  |L10.176|
                          DCD      ||.data||
                  |L10.180|
                          DCD      system_flag_table
                  |L10.184|
                          DCD      Bmp_stanby_1

                          AREA ||i.timer_powermanage_type||, CODE, READONLY, ALIGN=2

                  timer_powermanage_type PROC
;;;150    
;;;151    void timer_powermanage_type(void)
000000  4806              LDR      r0,|L11.28|
;;;152    {
;;;153        if(powerdonw_resume_timer)
000002  8a41              LDRH     r1,[r0,#0x12]  ; powerdonw_resume_timer
000004  2900              CMP      r1,#0                 ;152
000006  d007              BEQ      |L11.24|
000008  1e49              SUBS     r1,r1,#1              ;152
;;;154        {
;;;155            powerdonw_resume_timer--;
00000a  0409              LSLS     r1,r1,#16
00000c  0c09              LSRS     r1,r1,#16
00000e  8241              STRH     r1,[r0,#0x12]
;;;156            if(powerdonw_resume_timer == 0)
000010  d102              BNE      |L11.24|
;;;157                menu_keyprocess(1);
000012  2001              MOVS     r0,#1
000014  f7ffbffe          B.W      menu_keyprocess
                  |L11.24|
;;;158        }
;;;159    
;;;160    }
000018  4770              BX       lr
;;;161    
                          ENDP

00001a  0000              DCW      0x0000
                  |L11.28|
                          DCD      ||.data||

                          AREA ||i.timer_save_map_type||, CODE, READONLY, ALIGN=2

                  timer_save_map_type PROC
;;;163    
;;;164    void timer_save_map_type(void)
000000  4907              LDR      r1,|L12.32|
;;;165    {
;;;166        if(save_tsp_tp_timer == 90000)
000002  4a08              LDR      r2,|L12.36|
000004  6988              LDR      r0,[r1,#0x18]  ; save_tsp_tp_timer
000006  4290              CMP      r0,r2
000008  d001              BEQ      |L12.14|
00000a  1c40              ADDS     r0,r0,#1              ;165
;;;167        {
;;;168        }
;;;169        else
;;;170            save_tsp_tp_timer++;
00000c  6188              STR      r0,[r1,#0x18]  ; save_tsp_tp_timer
                  |L12.14|
;;;171        
;;;172        if(save_tsp_s_timer == 15000)
00000e  8908              LDRH     r0,[r1,#8]  ; save_tsp_s_timer
000010  f5a05268          SUB      r2,r0,#0x3a00
000014  3a98              SUBS     r2,r2,#0x98
000016  d001              BEQ      |L12.28|
000018  1c40              ADDS     r0,r0,#1
;;;173        {
;;;174        }
;;;175        else
;;;176            save_tsp_s_timer++;
00001a  8108              STRH     r0,[r1,#8]
                  |L12.28|
;;;177    
;;;178        
;;;179    }
00001c  4770              BX       lr
;;;180    
                          ENDP

00001e  0000              DCW      0x0000
                  |L12.32|
                          DCD      ||.data||
                  |L12.36|
                          DCD      0x00015f90

                          AREA ||i.timer_when_user_press_key_type||, CODE, READONLY, ALIGN=2

                  timer_when_user_press_key_type PROC
;;;180    
;;;181    void timer_when_user_press_key_type(void)
000000  b570              PUSH     {r4-r6,lr}
;;;182    {
;;;183        if(enter_perss == 3)
000002  4911              LDR      r1,|L13.72|
;;;184        {
;;;185            wait_timer_cnt++;
000004  4c11              LDR      r4,|L13.76|
000006  2500              MOVS     r5,#0                 ;183
000008  780a              LDRB     r2,[r1,#0]            ;183  ; enter_perss
00000a  8aa0              LDRH     r0,[r4,#0x14]
00000c  2a03              CMP      r2,#3                 ;183
00000e  d009              BEQ      |L13.36|
;;;186            if(wait_timer_cnt == 300)
;;;187            {
;;;188                wait_timer_cnt = 0;
;;;189                enter_perss =0;
;;;190                OLED_Clear();
;;;191            }
;;;192        }
;;;193        else if (enter_perss == 4)
000010  2a04              CMP      r2,#4
000012  d106              BNE      |L13.34|
;;;194        {
;;;195            if(wait_timer_cnt == 200)
000014  28c8              CMP      r0,#0xc8
000016  d011              BEQ      |L13.60|
;;;196            {
;;;197                enter_perss =0;
;;;198                menu_enter_flash(wait_timer_cnt);
;;;199                wait_timer_cnt = 0;
;;;200            }
;;;201            else
;;;202                menu_enter_flash(wait_timer_cnt);
000018  f7fffffe          BL       menu_enter_flash
                  |L13.28|
;;;203        
;;;204            wait_timer_cnt++;
00001c  8aa0              LDRH     r0,[r4,#0x14]  ; wait_timer_cnt
00001e  1c40              ADDS     r0,r0,#1
000020  82a0              STRH     r0,[r4,#0x14]
                  |L13.34|
;;;205        }
;;;206    
;;;207    }
000022  bd70              POP      {r4-r6,pc}
                  |L13.36|
000024  1c40              ADDS     r0,r0,#1
000026  b280              UXTH     r0,r0                 ;185
000028  82a0              STRH     r0,[r4,#0x14]         ;185
00002a  f5b07f96          CMP      r0,#0x12c             ;186
00002e  d1f8              BNE      |L13.34|
000030  82a5              STRH     r5,[r4,#0x14]         ;188
000032  700d              STRB     r5,[r1,#0]            ;189
000034  e8bd4070          POP      {r4-r6,lr}            ;190
000038  f7ffbffe          B.W      OLED_Clear
                  |L13.60|
00003c  700d              STRB     r5,[r1,#0]            ;197
00003e  f7fffffe          BL       menu_enter_flash
000042  82a5              STRH     r5,[r4,#0x14]         ;199
000044  e7ea              B        |L13.28|
;;;208    //��ʱ��3�жϷ������
                          ENDP

000046  0000              DCW      0x0000
                  |L13.72|
                          DCD      enter_perss
                  |L13.76|
                          DCD      ||.data||

                          AREA ||.data||, DATA, ALIGN=2

                  timer_flag
000000  00                DCB      0x00
                  button_100_time
000001  00                DCB      0x00
                  guji_1s_time
000002  00                DCB      0x00
                  flash_led_flag
000003  00                DCB      0x00
                  static_rtc_cnt
000004  00                DCB      0x00
                  timer_cnt
000005  00                DCB      0x00
                  timer_1s_cnt
000006  0000              DCW      0x0000
                  save_tsp_s_timer
000008  0000              DCW      0x0000
                  flash_led_low_power_timer
00000a  0000              DCW      0x0000
                  usb_delay_timer_poweron
00000c  0000              DCW      0x0000
                  usb_delay_timer_poweroff
00000e  0000              DCW      0x0000
                  timer_bmp085_cnt
000010  0000              DCW      0x0000
                  powerdonw_resume_timer
000012  0000              DCB      0x00,0x00
                  wait_timer_cnt
000014  00000000          DCB      0x00,0x00,0x00,0x00
                  save_tsp_tp_timer
                          DCD      0x00000000
                  average_speed
                          DCD      0x00000000

;*** Start embedded assembler ***

#line 1 "..\\src\\HARDWARE\\TIMER\\timer.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___7_timer_c_72916c15____REV16|
#line 114 "..\\..\\..\\Libraries\\CMSIS\\Include\\core_cmInstr.h"
|__asm___7_timer_c_72916c15____REV16| PROC
#line 115

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___7_timer_c_72916c15____REVSH|
#line 128
|__asm___7_timer_c_72916c15____REVSH| PROC
#line 129

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
