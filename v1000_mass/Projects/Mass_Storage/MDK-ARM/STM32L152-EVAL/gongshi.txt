; generated by Component: ARM Compiler 5.04 update 1 (build 49) Tool: ArmCC [5040049]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\stm32l152-eval\gongshi.o --asm_dir=.\STM32L152-EVAL\ --list_dir=.\STM32L152-EVAL\ --depend=.\stm32l152-eval\gongshi.d --cpu=Cortex-M3 --apcs=interwork -O3 -I..\inc -I..\..\..\Libraries\CMSIS\Device\ST\STM32L1xx\Include -I..\..\..\Libraries\STM32_USB-FS-Device_Driver\inc -I..\..\..\Libraries\STM32L1xx_StdPeriph_Driver\inc -I..\..\..\Utilities\STM32_EVAL -I..\..\..\Utilities\STM32_EVAL\Common -I..\..\..\Utilities\STM32_EVAL\STM32L152_EVAL -I..\src\user -I..\src\user\include -I..\src\SYSTEM\delay -I..\src\SYSTEM\sys -I..\src\SYSTEM\usart -I..\src\HARDWARE\ADC -I..\src\HARDWARE\BMP -I..\src\HARDWARE\DMA -I..\src\HARDWARE\FLASH -I..\src\HARDWARE\GPS -I..\src\HARDWARE\KEY -I..\src\HARDWARE\PWM -I..\src\HARDWARE\RTC -I..\src\HARDWARE\SPI -I..\src\HARDWARE\USART2 -I..\src\HARDWARE\TIMER -I..\src\EX -I..\src\USMART -I..\..\..\Libraries\CMSIS\Include -I..\src\ff11a\src -I..\src\ff11a\src\option -I..\src\HARDWARE\LED -I..\src\HARDWARE\OLED -I..\src\ff11a\src -I..\src\ff11a\src\option -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\4.1.0\CMSIS\Include -IC:\Keil_v5\ARM\Inc\ST\STM32L1xx -D__MICROLIB -DUSE_STDPERIPH_DRIVER -DSTM32L1XX_MD -DUSE_STM32L152_EVAL ..\src\user\gongshi.c]
                          THUMB

                          AREA ||i.GetAngle||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_percent
                          REQUIRE _printf_widthprec
                          REQUIRE _printf_f
                          REQUIRE _printf_fp_dec
                  GetAngle PROC
;;;462    
;;;463     float GetAngle(float longitude1, char longitude1_flag, float latitude1, char latitude1_flag,
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;464                     float longitude2, char longitude2_flag, float latitude2, char latitude2_flag)
;;;465     {
;;;466     float dRotateAngle = atan2(abs(longitude1- longitude2), abs(latitude1- latitude2));
000004  f8dd9030          LDR      r9,[sp,#0x30]
000008  4683              MOV      r11,r0                ;465
00000a  4690              MOV      r8,r2                 ;465
00000c  4649              MOV      r1,r9
00000e  4610              MOV      r0,r2
000010  f8dda028          LDR      r10,[sp,#0x28]
000014  f7fffffe          BL       __aeabi_fsub
000018  f7fffffe          BL       __aeabi_f2iz
00001c  2800              CMP      r0,#0
00001e  da00              BGE      |L1.34|
000020  4240              RSBS     r0,r0,#0
                  |L1.34|
000022  f7fffffe          BL       __aeabi_i2d
000026  4604              MOV      r4,r0
000028  460f              MOV      r7,r1
00002a  4651              MOV      r1,r10
00002c  4658              MOV      r0,r11
00002e  f7fffffe          BL       __aeabi_fsub
000032  f7fffffe          BL       __aeabi_f2iz
;;;467     if (longitude2 >= longitude1)
;;;468     	{
;;;469     	if (latitude2 >= latitude1)
;;;470     		{
;;;471     		}
;;;472    	else
;;;473    		{
;;;474    		dRotateAngle = PI - dRotateAngle;
000036  4d24              LDR      r5,|L1.200|
000038  4e24              LDR      r6,|L1.204|
00003a  2800              CMP      r0,#0                 ;466
00003c  da00              BGE      |L1.64|
00003e  4240              RSBS     r0,r0,#0              ;466
                  |L1.64|
000040  f7fffffe          BL       __aeabi_i2d
000044  4622              MOV      r2,r4                 ;466
000046  463b              MOV      r3,r7                 ;466
000048  f7fffffe          BL       atan2
00004c  f7fffffe          BL       __aeabi_d2f
000050  4604              MOV      r4,r0                 ;466
000052  4651              MOV      r1,r10                ;467
000054  4658              MOV      r0,r11                ;467
000056  f7fffffe          BL       __aeabi_cfcmple
00005a  4641              MOV      r1,r8                 ;469
00005c  4648              MOV      r0,r9                 ;469
00005e  d808              BHI      |L1.114|
000060  f7fffffe          BL       __aeabi_cfrcmple
000064  d919              BLS      |L1.154|
000066  4620              MOV      r0,r4
000068  f7fffffe          BL       __aeabi_f2d
00006c  462a              MOV      r2,r5
00006e  4633              MOV      r3,r6
000070  e007              B        |L1.130|
                  |L1.114|
;;;475    		}
;;;476    	}
;;;477     else
;;;478     	{
;;;479     	if (latitude2 >=latitude1)
000072  f7fffffe          BL       __aeabi_cfrcmple
;;;480    		{
;;;481    		dRotateAngle = 2 * PI - dRotateAngle;
000076  4620              MOV      r0,r4
000078  d806              BHI      |L1.136|
00007a  f7fffffe          BL       __aeabi_f2d
00007e  462a              MOV      r2,r5
000080  4b13              LDR      r3,|L1.208|
                  |L1.130|
000082  f7fffffe          BL       __aeabi_drsub
000086  e005              B        |L1.148|
                  |L1.136|
;;;482    		}
;;;483    	else
;;;484    		{
;;;485    		dRotateAngle = PI + dRotateAngle;
000088  f7fffffe          BL       __aeabi_f2d
00008c  462a              MOV      r2,r5
00008e  4633              MOV      r3,r6
000090  f7fffffe          BL       __aeabi_dadd
                  |L1.148|
000094  f7fffffe          BL       __aeabi_d2f
000098  4604              MOV      r4,r0                 ;481
                  |L1.154|
;;;486    		}
;;;487    	}
;;;488     	dRotateAngle = dRotateAngle * 180 / PI;
00009a  490e              LDR      r1,|L1.212|
00009c  4620              MOV      r0,r4
00009e  f7fffffe          BL       __aeabi_fmul
0000a2  f7fffffe          BL       __aeabi_f2d
0000a6  462a              MOV      r2,r5
0000a8  4633              MOV      r3,r6
0000aa  f7fffffe          BL       __aeabi_ddiv
0000ae  f7fffffe          BL       __aeabi_d2f
0000b2  4604              MOV      r4,r0
;;;489    	 v1000_debug("\r\n dRotateAngle  %.1f",dRotateAngle);
0000b4  f7fffffe          BL       __aeabi_f2d
0000b8  4602              MOV      r2,r0
0000ba  460b              MOV      r3,r1
0000bc  a006              ADR      r0,|L1.216|
0000be  f7fffffe          BL       __2printf
;;;490     return dRotateAngle;
0000c2  4620              MOV      r0,r4
;;;491     }
0000c4  e8bd9ff0          POP      {r4-r12,pc}
;;;492    
                          ENDP

                  |L1.200|
                          DCD      0xf01b866e
                  |L1.204|
                          DCD      0x400921f9
                  |L1.208|
                          DCD      0x401921f9
                  |L1.212|
                          DCD      0x43340000
                  |L1.216|
0000d8  0d0a2064          DCB      "\r\n dRotateAngle  %.1f",0
0000dc  526f7461
0000e0  7465416e
0000e4  676c6520
0000e8  20252e31
0000ec  6600    
0000ee  00                DCB      0
0000ef  00                DCB      0

                          AREA ||i.GetSunMoonTime||, CODE, READONLY, ALIGN=1

                  GetSunMoonTime PROC
;;;1322   
;;;1323   void GetSunMoonTime(float dbLon,float dbLat,int year,int month,int day,float TimeZone,PSunMoonTime pTime)
000000  b5fe              PUSH     {r1-r7,lr}
;;;1324   {
000002  4605              MOV      r5,r0
000004  469c              MOV      r12,r3
000006  e9dd0708          LDRD     r0,r7,[sp,#0x20]
00000a  460c              MOV      r4,r1
;;;1325   	float mjdd = mjd(day,month,year,0);
00000c  2300              MOVS     r3,#0
00000e  4661              MOV      r1,r12
000010  9e0a              LDR      r6,[sp,#0x28]
000012  f7fffffe          BL       mjd
;;;1326   
;;;1327   //	find_sun_and_twi_events_for_date(mjdd,TimeZone,dbLon,dbLat,0,0,pTime);
;;;1328   	find_moonrise_set(mjdd, TimeZone, dbLon,dbLat,0,0,pTime);
000016  2100              MOVS     r1,#0
000018  9100              STR      r1,[sp,#0]
00001a  e9cd1601          STRD     r1,r6,[sp,#4]
00001e  4623              MOV      r3,r4
000020  462a              MOV      r2,r5
000022  4639              MOV      r1,r7
000024  f7fffffe          BL       find_moonrise_set
;;;1329   }
000028  bdfe              POP      {r1-r7,pc}
;;;1330   
                          ENDP


                          AREA ||i.find_moonrise_set||, CODE, READONLY, ALIGN=2

                  find_moonrise_set PROC
;;;1082   
;;;1083   void find_moonrise_set(float mjd, float tz, float glong, float glat,int dls,int ST,PSunMoonTime moonTimes)
000000  e92d4fff          PUSH     {r0-r11,lr}
;;;1084   {
000004  b08f              SUB      sp,sp,#0x3c
;;;1085   	//  Im using a separate function for moonrise/set to allow for different tabulations
;;;1086   	//  of moonrise and sun events ie weekly for sun and daily for moon. The logic of
;;;1087   	//  the function is identical to find_sun_and_twi_events_for_date()
;;;1088   	float  sglat, date, ym, yz,  utrise = 0.0, utset = 0.0,sinho,cglat,ye;
000006  2000              MOVS     r0,#0
000008  9c1e              LDR      r4,[sp,#0x78]
;;;1089   	float yp, nz,  hour, z1, z2,  rads = 0.0174532925;
00000a  4d71              LDR      r5,|L3.464|
00000c  9006              STR      r0,[sp,#0x18]         ;1088
;;;1090   	char rise, sett;
;;;1091   	float *quadout;
;;;1092   
;;;1093   	sinho = sin(rads * 8/60);		//moonrise taken as centre of moon at +8 arcmin
00000e  9005              STR      r0,[sp,#0x14]
000010  461e              MOV      r6,r3                 ;1084
000012  2103              MOVS     r1,#3
000014  4628              MOV      r0,r5
000016  f7fffffe          BL       __ARM_scalbnf
00001a  496e              LDR      r1,|L3.468|
00001c  f7fffffe          BL       __aeabi_fdiv
000020  f7fffffe          BL       __aeabi_f2d
000024  f7fffffe          BL       ||sin||
000028  f7fffffe          BL       __aeabi_d2f
;;;1094   	sglat = sin(rads * glat);
00002c  9003              STR      r0,[sp,#0xc]
00002e  4631              MOV      r1,r6
000030  4628              MOV      r0,r5
000032  f7fffffe          BL       __aeabi_fmul
000036  f7fffffe          BL       __aeabi_f2d
00003a  460f              MOV      r7,r1
00003c  4605              MOV      r5,r0
00003e  f7fffffe          BL       ||sin||
000042  f7fffffe          BL       __aeabi_d2f
000046  4606              MOV      r6,r0
000048  4628              MOV      r0,r5
00004a  4639              MOV      r1,r7
;;;1095   	cglat = cos(rads * glat);
00004c  f7fffffe          BL       ||cos||
000050  f7fffffe          BL       __aeabi_d2f
000054  4605              MOV      r5,r0
;;;1096   	date = mjd - tz/24;
000056  4960              LDR      r1,|L3.472|
000058  9810              LDR      r0,[sp,#0x40]
00005a  f7fffffe          BL       __aeabi_fdiv
00005e  990f              LDR      r1,[sp,#0x3c]
000060  f7fffffe          BL       __aeabi_frsub
;;;1097   	rise = FALSE;
;;;1098   	sett = FALSE;
;;;1099   //	above = FALSE;
;;;1100   	hour = 1.0;
;;;1101   	ym = sin_alt(1, date, hour - 1.0, glong, cglat, sglat) - sinho;
000064  9004              STR      r0,[sp,#0x10]
000066  f04f587e          MOV      r8,#0x3f800000        ;1100
00006a  e88d0160          STM      sp,{r5,r6,r8}
00006e  f04f0b00          MOV      r11,#0                ;1097
000072  465f              MOV      r7,r11                ;1098
000074  465a              MOV      r2,r11
000076  2001              MOVS     r0,#1
000078  9b11              LDR      r3,[sp,#0x44]
00007a  9904              LDR      r1,[sp,#0x10]
00007c  f7fffffe          BL       sin_alt
000080  9903              LDR      r1,[sp,#0xc]
000082  f7fffffe          BL       __aeabi_fsub
000086  4681              MOV      r9,r0
                  |L3.136|
000088  e9cd5600          STRD     r5,r6,[sp,#0]
;;;1102   //	if (ym > 0.0) above = TRUE;
;;;1103   	while(hour < 25 && (sett == FALSE || rise == FALSE))
;;;1104   	{
;;;1105   		yz = sin_alt(1, date, hour, glong, cglat, sglat) - sinho;
00008c  2001              MOVS     r0,#1
00008e  9b11              LDR      r3,[sp,#0x44]
000090  9a02              LDR      r2,[sp,#8]
000092  9904              LDR      r1,[sp,#0x10]
000094  f7fffffe          BL       sin_alt
000098  9903              LDR      r1,[sp,#0xc]
00009a  f7fffffe          BL       __aeabi_fsub
00009e  4682              MOV      r10,r0
;;;1106   		yp = sin_alt(1, date, hour + 1.0, glong, cglat, sglat) - sinho;
0000a0  f04f517e          MOV      r1,#0x3f800000
0000a4  9802              LDR      r0,[sp,#8]
0000a6  f7fffffe          BL       __aeabi_fadd
0000aa  e9cd5600          STRD     r5,r6,[sp,#0]
0000ae  4602              MOV      r2,r0
0000b0  2001              MOVS     r0,#1
0000b2  9b11              LDR      r3,[sp,#0x44]
0000b4  9904              LDR      r1,[sp,#0x10]
0000b6  f7fffffe          BL       sin_alt
0000ba  9903              LDR      r1,[sp,#0xc]
0000bc  f7fffffe          BL       __aeabi_fsub
0000c0  4680              MOV      r8,r0
;;;1107   		quadout = quad(ym, yz, yp);
0000c2  4602              MOV      r2,r0
0000c4  4651              MOV      r1,r10
0000c6  4648              MOV      r0,r9
0000c8  f7fffffe          BL       quad
0000cc  e9d01200          LDRD     r1,r2,[r0,#0]
;;;1108   		nz = quadout[0];
;;;1109   		z1 = quadout[1];
0000d0  4692              MOV      r10,r2
;;;1110   		z2 = quadout[2];
0000d2  6882              LDR      r2,[r0,#8]
;;;1111   //		xe = quadout[3];
;;;1112   		ye = quadout[4];
0000d4  9200              STR      r2,[sp,#0]
0000d6  6900              LDR      r0,[r0,#0x10]
;;;1113   		// case when one event is found in the interval
;;;1114   		if (nz == 1) {
0000d8  f1b15f7e          CMP      r1,#0x3f800000
0000dc  d003              BEQ      |L3.230|
;;;1115   			if (ym < 0.0) {
;;;1116   				utrise = hour + z1;
;;;1117   				rise = TRUE;
;;;1118   			}
;;;1119   			else {
;;;1120   				utset = hour + z1;
;;;1121   				sett = TRUE;
;;;1122   			}
;;;1123   		} // end of nz = 1 case
;;;1124   
;;;1125   		// case where two events are found in this interval
;;;1126   		// (rare but whole reason we are not using simple iteration)
;;;1127   		if (nz == 2) {
0000de  f1b14f80          CMP      r1,#0x40000000
0000e2  d010              BEQ      |L3.262|
0000e4  e023              B        |L3.302|
                  |L3.230|
0000e6  9802              LDR      r0,[sp,#8]            ;1115
0000e8  f1194fff          CMN      r9,#0x7f800000        ;1115
0000ec  4651              MOV      r1,r10                ;1120
0000ee  d305              BCC      |L3.252|
0000f0  f7fffffe          BL       __aeabi_fadd
0000f4  f04f0b01          MOV      r11,#1                ;1117
0000f8  9006              STR      r0,[sp,#0x18]         ;1117
0000fa  e018              B        |L3.302|
                  |L3.252|
0000fc  f7fffffe          BL       __aeabi_fadd
000100  2701              MOVS     r7,#1                 ;1121
000102  9005              STR      r0,[sp,#0x14]         ;1121
000104  e013              B        |L3.302|
                  |L3.262|
;;;1128   			if (ye < 0.0) {
000106  f1104fff          CMN      r0,#0x7f800000
00010a  d306              BCC      |L3.282|
;;;1129   				utrise = hour + z2;
00010c  4611              MOV      r1,r2
00010e  9802              LDR      r0,[sp,#8]
000110  f7fffffe          BL       __aeabi_fadd
;;;1130   				utset = hour + z1;
000114  4651              MOV      r1,r10
000116  9006              STR      r0,[sp,#0x18]
000118  e005              B        |L3.294|
                  |L3.282|
;;;1131   			}
;;;1132   			else {
;;;1133   				utrise = hour + z1;
00011a  4651              MOV      r1,r10
00011c  9802              LDR      r0,[sp,#8]
00011e  f7fffffe          BL       __aeabi_fadd
;;;1134   				utset = hour + z2;
000122  9900              LDR      r1,[sp,#0]
000124  9006              STR      r0,[sp,#0x18]
                  |L3.294|
000126  9802              LDR      r0,[sp,#8]            ;1130
000128  f7fffffe          BL       __aeabi_fadd
00012c  9005              STR      r0,[sp,#0x14]         ;1130
                  |L3.302|
;;;1135   			}
;;;1136   		}
;;;1137   
;;;1138   		// set up the next search interval
;;;1139   		ym = yp;
00012e  46c1              MOV      r9,r8
;;;1140   		hour += 2.0;
000130  f04f4180          MOV      r1,#0x40000000
000134  9802              LDR      r0,[sp,#8]
000136  f7fffffe          BL       __aeabi_fadd
00013a  4928              LDR      r1,|L3.476|
00013c  9002              STR      r0,[sp,#8]            ;1103
00013e  4288              CMP      r0,r1                 ;1103
000140  da04              BGE      |L3.332|
000142  2f00              CMP      r7,#0                 ;1103
000144  d0a0              BEQ      |L3.136|
000146  f1bb0f00          CMP      r11,#0                ;1103
00014a  d09d              BEQ      |L3.136|
                  |L3.332|
;;;1141   	} // end of while loop
;;;1142   
;;;1143   	if (rise == TRUE || sett == TRUE )
;;;1144   	{
;;;1145   		if (rise == TRUE)
;;;1146   		{
;;;1147   			if (ST == 0)moonTimes->dbMoonRise = utrise+dls;
;;;1148   			else moonTimes->dbMoonRise = lmst(mjd+(utrise-tz)/24, glong);
;;;1149   		}
;;;1150   		else    moonTimes->dbMoonRise = -1;
00014c  4d24              LDR      r5,|L3.480|
00014e  f1bb0f01          CMP      r11,#1                ;1143
000152  d003              BEQ      |L3.348|
000154  2f01              CMP      r7,#1                 ;1143
000156  d021              BEQ      |L3.412|
;;;1151   		if (sett == TRUE)
;;;1152   		{
;;;1153   			if (ST == 0)moonTimes->dbMoonSet = utset+dls;
;;;1154   			else moonTimes->dbMoonSet = lmst(mjd+(utset-tz)/24, glong);
;;;1155   		}
;;;1156   		else	moonTimes->dbMoonSet = -1;
;;;1157   	}
;;;1158   	else	moonTimes->dbMoonSet = -2;
000158  01e8              LSLS     r0,r5,#7
00015a  e036              B        |L3.458|
                  |L3.348|
00015c  981d              LDR      r0,[sp,#0x74]         ;1145
00015e  b180              CBZ      r0,|L3.386|
000160  9910              LDR      r1,[sp,#0x40]         ;1148
000162  9806              LDR      r0,[sp,#0x18]         ;1148
000164  f7fffffe          BL       __aeabi_fsub
000168  491b              LDR      r1,|L3.472|
00016a  f7fffffe          BL       __aeabi_fdiv
00016e  990f              LDR      r1,[sp,#0x3c]         ;1148
000170  f7fffffe          BL       __aeabi_fadd
000174  9911              LDR      r1,[sp,#0x44]         ;1148
000176  f7fffffe          BL       lmst
00017a  6020              STR      r0,[r4,#0]            ;1151
00017c  2f01              CMP      r7,#1                 ;1151
00017e  d00e              BEQ      |L3.414|
000180  e008              B        |L3.404|
                  |L3.386|
000182  981c              LDR      r0,[sp,#0x70]         ;1147
000184  f7fffffe          BL       __aeabi_i2f
000188  9906              LDR      r1,[sp,#0x18]         ;1147
00018a  f7fffffe          BL       __aeabi_fadd
00018e  6020              STR      r0,[r4,#0]            ;1151
000190  2f01              CMP      r7,#1                 ;1151
000192  d014              BEQ      |L3.446|
                  |L3.404|
000194  6065              STR      r5,[r4,#4]            ;1156
                  |L3.406|
;;;1159   }
000196  b013              ADD      sp,sp,#0x4c
000198  e8bd8ff0          POP      {r4-r11,pc}
                  |L3.412|
00019c  6025              STR      r5,[r4,#0]            ;1150
                  |L3.414|
00019e  981d              LDR      r0,[sp,#0x74]         ;1153
0001a0  b168              CBZ      r0,|L3.446|
0001a2  9910              LDR      r1,[sp,#0x40]         ;1154
0001a4  9805              LDR      r0,[sp,#0x14]         ;1154
0001a6  f7fffffe          BL       __aeabi_fsub
0001aa  490b              LDR      r1,|L3.472|
0001ac  f7fffffe          BL       __aeabi_fdiv
0001b0  990f              LDR      r1,[sp,#0x3c]         ;1154
0001b2  f7fffffe          BL       __aeabi_fadd
0001b6  9911              LDR      r1,[sp,#0x44]         ;1154
0001b8  f7fffffe          BL       lmst
0001bc  e005              B        |L3.458|
                  |L3.446|
0001be  981c              LDR      r0,[sp,#0x70]         ;1153
0001c0  f7fffffe          BL       __aeabi_i2f
0001c4  9905              LDR      r1,[sp,#0x14]         ;1153
0001c6  f7fffffe          BL       __aeabi_fadd
                  |L3.458|
0001ca  6060              STR      r0,[r4,#4]            ;1158
0001cc  e7e3              B        |L3.406|
;;;1160   
                          ENDP

0001ce  0000              DCW      0x0000
                  |L3.464|
                          DCD      0x3c8efa35
                  |L3.468|
                          DCD      0x42700000
                  |L3.472|
                          DCD      0x41c00000
                  |L3.476|
                          DCD      0x41c80000
                  |L3.480|
                          DCD      0xbf800000

                          AREA ||i.frac||, CODE, READONLY, ALIGN=2

                  frac PROC
;;;900    
;;;901    float frac(float x)
000000  b510              PUSH     {r4,lr}
;;;902    {
000002  4604              MOV      r4,r0
;;;903    	x -= (int)x;
000004  f7fffffe          BL       __aeabi_f2iz
000008  f7fffffe          BL       __aeabi_i2f
00000c  4621              MOV      r1,r4
00000e  f7fffffe          BL       __aeabi_frsub
;;;904    	return( (x<0) ? x+1.0 : x );
000012  f1104fff          CMN      r0,#0x7f800000
000016  d306              BCC      |L4.38|
000018  f7fffffe          BL       __aeabi_f2d
00001c  2200              MOVS     r2,#0
00001e  4b05              LDR      r3,|L4.52|
000020  f7fffffe          BL       __aeabi_dadd
000024  e001              B        |L4.42|
                  |L4.38|
000026  f7fffffe          BL       __aeabi_f2d
                  |L4.42|
00002a  e8bd4010          POP      {r4,lr}
00002e  f7ffbffe          B.W      __aeabi_d2f
;;;905    }
;;;906    
                          ENDP

000032  0000              DCW      0x0000
                  |L4.52|
                          DCD      0x3ff00000

                          AREA ||i.getDistanceVer1||, CODE, READONLY, ALIGN=2

                  getDistanceVer1 PROC
;;;25     
;;;26     float getDistanceVer1(float lat1, float lng1, float lat2, float lng2)
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;27     {
000004  461f              MOV      r7,r3
000006  4615              MOV      r5,r2
000008  460e              MOV      r6,r1
;;;28     
;;;29        float radLat1 = rad(lat1);
00000a  f7fffffe          BL       ||rad||
00000e  4604              MOV      r4,r0
;;;30     
;;;31        float radLat2 = rad(lat2);
000010  4628              MOV      r0,r5
000012  f7fffffe          BL       ||rad||
000016  4605              MOV      r5,r0
;;;32     
;;;33        float radLng1 = rad(lng1);
000018  4630              MOV      r0,r6
00001a  f7fffffe          BL       ||rad||
00001e  4606              MOV      r6,r0
;;;34     
;;;35        float radLng2 = rad(lng2);
000020  4638              MOV      r0,r7
000022  f7fffffe          BL       ||rad||
000026  4601              MOV      r1,r0
;;;36     
;;;37        float s = acos(sin(radLat1)*sin(radLat2)+cos(radLat1)*cos(radLat2)*cos(radLng1-radLng2));
000028  4630              MOV      r0,r6
00002a  f7fffffe          BL       __aeabi_fsub
00002e  f7fffffe          BL       __aeabi_f2d
000032  f7fffffe          BL       ||cos||
000036  4680              MOV      r8,r0
000038  4689              MOV      r9,r1
00003a  4628              MOV      r0,r5
00003c  f7fffffe          BL       __aeabi_f2d
000040  468b              MOV      r11,r1
000042  4605              MOV      r5,r0
000044  f7fffffe          BL       ||cos||
000048  4606              MOV      r6,r0
00004a  460f              MOV      r7,r1
00004c  4620              MOV      r0,r4
00004e  f7fffffe          BL       __aeabi_f2d
000052  468a              MOV      r10,r1
000054  4604              MOV      r4,r0
000056  f7fffffe          BL       ||cos||
00005a  4632              MOV      r2,r6
00005c  463b              MOV      r3,r7
00005e  f7fffffe          BL       __aeabi_dmul
000062  4642              MOV      r2,r8
000064  464b              MOV      r3,r9
000066  f7fffffe          BL       __aeabi_dmul
00006a  4680              MOV      r8,r0
00006c  460e              MOV      r6,r1
00006e  4628              MOV      r0,r5
000070  4659              MOV      r1,r11
000072  f7fffffe          BL       ||sin||
000076  4605              MOV      r5,r0
000078  460f              MOV      r7,r1
00007a  4620              MOV      r0,r4
00007c  4651              MOV      r1,r10
00007e  f7fffffe          BL       ||sin||
000082  462a              MOV      r2,r5
000084  463b              MOV      r3,r7
000086  f7fffffe          BL       __aeabi_dmul
00008a  4642              MOV      r2,r8
00008c  4633              MOV      r3,r6
00008e  f7fffffe          BL       __aeabi_dadd
000092  f7fffffe          BL       acos
000096  f7fffffe          BL       __aeabi_d2f
;;;38     
;;;39        s = s * EARTH_RADIUS;
00009a  f7fffffe          BL       __aeabi_f2d
00009e  4a04              LDR      r2,|L5.176|
0000a0  4b04              LDR      r3,|L5.180|
0000a2  f7fffffe          BL       __aeabi_dmul
0000a6  e8bd5ff0          POP      {r4-r12,lr}
0000aa  f7ffbffe          B.W      __aeabi_d2f
;;;40     
;;;41        return s;
;;;42     
;;;43     }
;;;44     
                          ENDP

0000ae  0000              DCW      0x0000
                  |L5.176|
                          DCD      0x0624dd2f
                  |L5.180|
                          DCD      0x40b8e301

                          AREA ||i.getDistanceVer2||, CODE, READONLY, ALIGN=2

                  getDistanceVer2 PROC
;;;47     
;;;48     float getDistanceVer2(float lat1, char latitude1_flag,float lng1, char longitude1_flag, float lat2,char latitude2_flag, float lng2,char longitude2_flag)
000000  e92d5fff          PUSH     {r0-r12,lr}
;;;49     
;;;50     {
;;;51     
;;;52         float radLat1 ,radLat2,a,b,s;
;;;53     
;;;54         if(longitude1_flag=='W')
;;;55         {
;;;56             lng1 = 360-lng1;
000004  f8df90fc          LDR      r9,|L6.260|
000008  e9dd480e          LDRD     r4,r8,[sp,#0x38]      ;50
00000c  9f11              LDR      r7,[sp,#0x44]         ;54
00000e  460e              MOV      r6,r1                 ;50
000010  4605              MOV      r5,r0                 ;50
000012  2b57              CMP      r3,#0x57              ;54
000014  d104              BNE      |L6.32|
000016  4648              MOV      r0,r9
000018  9902              LDR      r1,[sp,#8]
00001a  f7fffffe          BL       __aeabi_fsub
00001e  9002              STR      r0,[sp,#8]
                  |L6.32|
;;;57         }
;;;58         if(latitude1_flag=='S')
000020  2e53              CMP      r6,#0x53
000022  d101              BNE      |L6.40|
;;;59         {
;;;60             lat1 = -1*lat1;
000024  f0854500          EOR      r5,r5,#0x80000000
                  |L6.40|
;;;61         }
;;;62         if(latitude2_flag=='S')
000028  f1b80f53          CMP      r8,#0x53
00002c  d101              BNE      |L6.50|
;;;63         {
;;;64             lat2 = -1*lat2;
00002e  f0844400          EOR      r4,r4,#0x80000000
                  |L6.50|
;;;65         }
;;;66         if(longitude2_flag=='W')
000032  2f57              CMP      r7,#0x57
000034  d104              BNE      |L6.64|
;;;67         {
;;;68             lng2 = 360-lng2;
000036  4648              MOV      r0,r9
000038  9910              LDR      r1,[sp,#0x40]
00003a  f7fffffe          BL       __aeabi_fsub
00003e  9010              STR      r0,[sp,#0x40]
                  |L6.64|
;;;69         }
;;;70     
;;;71        radLat1= rad(lat1);
000040  4628              MOV      r0,r5
000042  f7fffffe          BL       ||rad||
000046  4682              MOV      r10,r0
;;;72     
;;;73        radLat2 = rad(lat2);
000048  4620              MOV      r0,r4
00004a  f7fffffe          BL       ||rad||
00004e  4604              MOV      r4,r0
;;;74     
;;;75        a = radLat1 - radLat2;
000050  4601              MOV      r1,r0
000052  4650              MOV      r0,r10
000054  f7fffffe          BL       __aeabi_fsub
000058  4683              MOV      r11,r0
;;;76     
;;;77        b = rad(lng1) - rad(lng2);
00005a  9810              LDR      r0,[sp,#0x40]
00005c  f7fffffe          BL       ||rad||
000060  4605              MOV      r5,r0
000062  9802              LDR      r0,[sp,#8]
000064  f7fffffe          BL       ||rad||
000068  4629              MOV      r1,r5
00006a  f7fffffe          BL       __aeabi_fsub
;;;78     
;;;79        s = 2 * asin(sqrt(pow(sin(a/2),2) + cos(radLat1)*cos(radLat2)*pow(sin(b/2),2)));
00006e  f04f38ff          MOV      r8,#0xffffffff
000072  4641              MOV      r1,r8
000074  f7fffffe          BL       __ARM_scalbnf
000078  f7fffffe          BL       __aeabi_f2d
00007c  f7fffffe          BL       ||sin||
000080  f04f4980          MOV      r9,#0x40000000
000084  2200              MOVS     r2,#0
000086  464b              MOV      r3,r9
000088  f7fffffe          BL       pow
00008c  4605              MOV      r5,r0
00008e  460e              MOV      r6,r1
000090  4620              MOV      r0,r4
000092  f7fffffe          BL       __aeabi_f2d
000096  f7fffffe          BL       ||cos||
00009a  4607              MOV      r7,r0
00009c  460c              MOV      r4,r1
00009e  4650              MOV      r0,r10
0000a0  f7fffffe          BL       __aeabi_f2d
0000a4  f7fffffe          BL       ||cos||
0000a8  463a              MOV      r2,r7
0000aa  4623              MOV      r3,r4
0000ac  f7fffffe          BL       __aeabi_dmul
0000b0  462a              MOV      r2,r5
0000b2  4633              MOV      r3,r6
0000b4  f7fffffe          BL       __aeabi_dmul
0000b8  4605              MOV      r5,r0
0000ba  460c              MOV      r4,r1
0000bc  4641              MOV      r1,r8
0000be  4658              MOV      r0,r11
0000c0  f7fffffe          BL       __ARM_scalbnf
0000c4  f7fffffe          BL       __aeabi_f2d
0000c8  f7fffffe          BL       ||sin||
0000cc  2200              MOVS     r2,#0
0000ce  464b              MOV      r3,r9
0000d0  f7fffffe          BL       pow
0000d4  462a              MOV      r2,r5
0000d6  4623              MOV      r3,r4
0000d8  f7fffffe          BL       __aeabi_dadd
0000dc  f7fffffe          BL       sqrt
0000e0  f7fffffe          BL       asin
0000e4  2201              MOVS     r2,#1
0000e6  f7fffffe          BL       __ARM_scalbn
0000ea  f7fffffe          BL       __aeabi_d2f
;;;80     
;;;81        s = s * EARTH_RADIUS;
0000ee  f7fffffe          BL       __aeabi_f2d
0000f2  4a05              LDR      r2,|L6.264|
0000f4  4b05              LDR      r3,|L6.268|
0000f6  f7fffffe          BL       __aeabi_dmul
0000fa  b004              ADD      sp,sp,#0x10
0000fc  e8bd5ff0          POP      {r4-r12,lr}
000100  f7ffbffe          B.W      __aeabi_d2f
;;;82     
;;;83        return s;
;;;84     
;;;85     }
;;;86     
                          ENDP

                  |L6.260|
                          DCD      0x43b40000
                  |L6.264|
                          DCD      0x0624dd2f
                  |L6.268|
                          DCD      0x40b8e301

                          AREA ||i.get_angle||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_percent
                          REQUIRE _printf_widthprec
                          REQUIRE _printf_f
                          REQUIRE _printf_fp_dec
                  get_angle PROC
;;;104      */
;;;105    float get_angle(float latitude1, char latitude1_flag,float longitude1, char longitude1_flag,
000000  e92d4fff          PUSH     {r0-r11,lr}
;;;106                     float latitude2, char latitude2_flag, float longitude2, char longitude2_flag)
;;;107    {
000004  b081              SUB      sp,sp,#4
000006  4698              MOV      r8,r3
000008  468b              MOV      r11,r1
;;;108    
;;;109        float A_Ec, A_Ed,angle;
;;;110        float A_m_RadLo, A_m_RadLa,B_m_RadLo,B_m_RadLa;
;;;111        float dx,dy,dLo,dLa;
;;;112    
;;;113        A_m_RadLo  = longitude1 * PI / 180.;
00000a  9803              LDR      r0,[sp,#0xc]
00000c  f7fffffe          BL       __aeabi_f2d
000010  4a7c              LDR      r2,|L7.516|
000012  4b7d              LDR      r3,|L7.520|
000014  f7fffffe          BL       __aeabi_dmul
000018  2200              MOVS     r2,#0
00001a  4b7c              LDR      r3,|L7.524|
00001c  f7fffffe          BL       __aeabi_ddiv
000020  f7fffffe          BL       __aeabi_d2f
000024  4606              MOV      r6,r0
;;;114        A_m_RadLa  = latitude1 * PI / 180.;
000026  9801              LDR      r0,[sp,#4]
000028  f7fffffe          BL       __aeabi_f2d
00002c  4a75              LDR      r2,|L7.516|
00002e  4b76              LDR      r3,|L7.520|
000030  f7fffffe          BL       __aeabi_dmul
000034  2200              MOVS     r2,#0
000036  4b75              LDR      r3,|L7.524|
000038  f7fffffe          BL       __aeabi_ddiv
00003c  f7fffffe          BL       __aeabi_d2f
;;;115    
;;;116        A_Ec = Rj + ((Rc - Rj) * (90- latitude1) / 90);
000040  f8df91cc          LDR      r9,|L7.528|
000044  4682              MOV      r10,r0                ;114
000046  464c              MOV      r4,r9
000048  4649              MOV      r1,r9
00004a  9801              LDR      r0,[sp,#4]
00004c  f7fffffe          BL       __aeabi_frsub
000050  4970              LDR      r1,|L7.532|
000052  f7fffffe          BL       __aeabi_fmul
000056  4621              MOV      r1,r4
000058  f7fffffe          BL       __aeabi_fdiv
00005c  496e              LDR      r1,|L7.536|
00005e  f7fffffe          BL       __aeabi_fadd
000062  4605              MOV      r5,r0
;;;117        A_Ed = A_Ec * cos(A_m_RadLa);
000064  4650              MOV      r0,r10
000066  f7fffffe          BL       __aeabi_f2d
00006a  f7fffffe          BL       ||cos||
00006e  4607              MOV      r7,r0
000070  460c              MOV      r4,r1
000072  4628              MOV      r0,r5
000074  f7fffffe          BL       __aeabi_f2d
000078  463a              MOV      r2,r7
00007a  4623              MOV      r3,r4
00007c  f7fffffe          BL       __aeabi_dmul
000080  f7fffffe          BL       __aeabi_d2f
000084  4604              MOV      r4,r0
;;;118    
;;;119    
;;;120        B_m_RadLo  = longitude2 * PI / 180.;
000086  9810              LDR      r0,[sp,#0x40]
000088  f7fffffe          BL       __aeabi_f2d
00008c  4a5d              LDR      r2,|L7.516|
00008e  4b5e              LDR      r3,|L7.520|
000090  f7fffffe          BL       __aeabi_dmul
000094  2200              MOVS     r2,#0
000096  4b5d              LDR      r3,|L7.524|
000098  f7fffffe          BL       __aeabi_ddiv
00009c  f7fffffe          BL       __aeabi_d2f
0000a0  4607              MOV      r7,r0
;;;121        B_m_RadLa  = latitude2 * PI / 180;
0000a2  980e              LDR      r0,[sp,#0x38]
0000a4  f7fffffe          BL       __aeabi_f2d
0000a8  4a56              LDR      r2,|L7.516|
0000aa  4b57              LDR      r3,|L7.520|
0000ac  f7fffffe          BL       __aeabi_dmul
0000b0  2200              MOVS     r2,#0
0000b2  4b56              LDR      r3,|L7.524|
0000b4  f7fffffe          BL       __aeabi_ddiv
0000b8  f7fffffe          BL       __aeabi_d2f
;;;122       // B_Ec = Rj + (Rc - Rj) * (90- latitude2) / 90;
;;;123       // B_Ed = B_Ec * cos(B_m_RadLa);
;;;124    
;;;125        dx = (B_m_RadLo - A_m_RadLo) * A_Ed;
0000bc  9000              STR      r0,[sp,#0]
0000be  4631              MOV      r1,r6
0000c0  4638              MOV      r0,r7
0000c2  f7fffffe          BL       __aeabi_fsub
0000c6  4621              MOV      r1,r4
0000c8  f7fffffe          BL       __aeabi_fmul
0000cc  4604              MOV      r4,r0
;;;126        dy = (B_m_RadLa - A_m_RadLa) * A_Ec;
0000ce  4651              MOV      r1,r10
0000d0  9800              LDR      r0,[sp,#0]
0000d2  f7fffffe          BL       __aeabi_fsub
0000d6  4629              MOV      r1,r5
0000d8  f7fffffe          BL       __aeabi_fmul
0000dc  4601              MOV      r1,r0
;;;127    //   out = sqrt(dx * dx + dy * dy);
;;;128    
;;;129        if( &angle != NULL)
;;;130        {
;;;131            angle = atan(fabs(dx/dy))*180/PI;
0000de  4620              MOV      r0,r4
0000e0  f7fffffe          BL       __aeabi_fdiv
0000e4  f0204000          BIC      r0,r0,#0x80000000
0000e8  f7fffffe          BL       __aeabi_f2d
0000ec  f7fffffe          BL       atan
0000f0  2200              MOVS     r2,#0
0000f2  4b46              LDR      r3,|L7.524|
0000f4  f7fffffe          BL       __aeabi_dmul
0000f8  4a42              LDR      r2,|L7.516|
0000fa  4b43              LDR      r3,|L7.520|
0000fc  f7fffffe          BL       __aeabi_ddiv
000100  f7fffffe          BL       __aeabi_d2f
000104  4604              MOV      r4,r0
;;;132            // 判断象限
;;;133    
;;;134            dLo = longitude2 - longitude1;
000106  9903              LDR      r1,[sp,#0xc]
000108  9810              LDR      r0,[sp,#0x40]
00010a  f7fffffe          BL       __aeabi_fsub
00010e  4606              MOV      r6,r0
;;;135            dLa = latitude2 - latitude1;
000110  990e              LDR      r1,[sp,#0x38]
000112  9801              LDR      r0,[sp,#4]
000114  f7fffffe          BL       __aeabi_frsub
;;;136    
;;;137    
;;;138            if((latitude1_flag=='S')&&(longitude1_flag=='W'))
;;;139            {
;;;140    
;;;141    #if 1
;;;142                            
;;;143                if(dLo <= 0&&dLa >= 0){  
000118  4f40              LDR      r7,|L7.540|
00011a  4605              MOV      r5,r0                 ;135
00011c  f44f0a00          MOV      r10,#0x800000
000120  f1bb0f53          CMP      r11,#0x53             ;138
000124  d003              BEQ      |L7.302|
;;;144                    angle = (90-angle)+90;  
;;;145                }  
;;;146                else if(dLo > 0&&dLa >= 0){  
;;;147                    angle = angle+180.;  
;;;148                }else if(dLo > 0&&dLa < 0){  
;;;149                    angle= (90 -angle)+270;  
;;;150                } 
;;;151                v1000_debug("\r\n angle11 :%.1f \r\n",angle);
;;;152                
;;;153                                        
;;;154    #else
;;;155    
;;;156                if(dLa > 0)//在南边
;;;157                {
;;;158                   if(dLo> 0) //在西边   180--270 -=-- 西南
;;;159                   {
;;;160                       angle = 180 + (90 - angle);
;;;161                   }
;;;162                   else if(dLo <= 0)//  东南    90- 180
;;;163                   {
;;;164                       angle = 90 + (90 - angle);
;;;165                   }
;;;166                }
;;;167               else if(dLa < 0 ) // 北边
;;;168               {
;;;169                   if(dLo >= 0) //在西边   270--360  西北
;;;170                   {
;;;171                       angle = 270 + (90 - angle);
;;;172                   }
;;;173                   else    // 东北
;;;174                   {
;;;175                       angle = (90 - angle);
;;;176                   }
;;;177    
;;;178               }
;;;179               else
;;;180               {
;;;181    
;;;182                   if(dLo > 0) //在西边
;;;183                   {
;;;184                       angle = 270 ;
;;;185                   }
;;;186                   else if(dLo < 0)  // 东
;;;187                   {
;;;188                       angle = 90 ;
;;;189                   }
;;;190    
;;;191               }
;;;192    #endif
;;;193            }
;;;194    
;;;195            if((latitude1_flag=='S')&&(longitude1_flag=='E'))
;;;196            {
;;;197    #if 1
;;;198                            
;;;199                if(dLo > 0&&dLa >= 0){  
;;;200                    angle = (90-angle)+90;  
;;;201                }  
;;;202                else if(dLo <= 0&&dLa >= 0){  
;;;203                    angle = angle+180.;  
;;;204                }else if(dLo < 0&&dLa < 0){  
;;;205                    angle= (90 -angle)+270;  
;;;206                } 
;;;207                v1000_debug("\r\n angle11 :%.1f \r\n",angle);
;;;208    
;;;209                            
;;;210    #else
;;;211    
;;;212                if(dLa > 0)//在南边
;;;213                {
;;;214                   if(dLo < 0) //在西边   180--270 -=-- 西南
;;;215                   {
;;;216                       angle = 180 + (90 - angle);
;;;217                   }
;;;218                   else if(dLo >= 0)//  东南    90- 180
;;;219                   {
;;;220                       angle = 90 + (90 - angle);
;;;221                   }
;;;222                }
;;;223               else if(dLa < 0 ) // 北边
;;;224               {
;;;225                   if(dLo <= 0) //在西边   270--360  西北
;;;226                   {
;;;227                       angle = 270 + (90 - angle);
;;;228                   }
;;;229                   else    // 东北
;;;230                   {
;;;231                       angle = (90 - angle);
;;;232                   }
;;;233    
;;;234               }
;;;235               else
;;;236               {
;;;237    
;;;238                   if(dLo < 0) //在西边
;;;239                   {
;;;240                       angle = 270 ;
;;;241                   }
;;;242                   else if(dLo > 0)  // 东
;;;243                   {
;;;244                       angle = 90 ;
;;;245                   }
;;;246    
;;;247               }
;;;248    #endif
;;;249            }
;;;250    
;;;251            if((latitude1_flag=='N')&&(longitude1_flag=='E'))
000126  f1bb0f4e          CMP      r11,#0x4e
00012a  d019              BEQ      |L7.352|
00012c  e05a              B        |L7.484|
                  |L7.302|
00012e  f1b80f57          CMP      r8,#0x57              ;138
000132  d003              BEQ      |L7.316|
000134  f1b80f45          CMP      r8,#0x45              ;195
000138  d008              BEQ      |L7.332|
00013a  e053              B        |L7.484|
                  |L7.316|
00013c  4556              CMP      r6,r10                ;143
00013e  da02              BGE      |L7.326|
000140  42bd              CMP      r5,r7                 ;143
000142  d330              BCC      |L7.422|
000144  e046              B        |L7.468|
                  |L7.326|
000146  42bd              CMP      r5,r7                 ;146
000148  d336              BCC      |L7.440|
00014a  e03b              B        |L7.452|
                  |L7.332|
00014c  4556              CMP      r6,r10                ;199
00014e  db02              BLT      |L7.342|
000150  42bd              CMP      r5,r7                 ;199
000152  d328              BCC      |L7.422|
000154  e001              B        |L7.346|
                  |L7.342|
000156  42bd              CMP      r5,r7                 ;202
000158  d32e              BCC      |L7.440|
                  |L7.346|
00015a  42be              CMP      r6,r7                 ;204
00015c  d232              BCS      |L7.452|
00015e  e039              B        |L7.468|
                  |L7.352|
000160  f1b80f45          CMP      r8,#0x45
000164  d003              BEQ      |L7.366|
;;;252            {
;;;253    
;;;254                v1000_debug("\r\n dla :%f \r\n",dLa);
;;;255                v1000_debug("\r\n dLo :%f \r\n",dLo);
;;;256                v1000_debug("\r\n angle :%.1f \r\n",angle);
;;;257    #if 1
;;;258    
;;;259                if(dLo > 0&&dLa <= 0){  
;;;260                    angle = (90-angle)+90;  
;;;261                }  
;;;262                else if(dLo <= 0&&dLa < 0){  
;;;263                    angle = angle+180.;  
;;;264                }else if(dLo < 0&&dLa >= 0){  
;;;265                    angle= (90 -angle)+270;  
;;;266                } 
;;;267                v1000_debug("\r\n angle11 :%.1f \r\n",angle);
;;;268    
;;;269    #else
;;;270                if(dLa < 0)//在南边
;;;271                {
;;;272                   if(dLo <= 0) //在西边   180--270 -=-- 西南
;;;273                   {
;;;274                       angle = 180 + (90 - angle);
;;;275                        v1000_debug("\r\n angle11 :%.1f \r\n",angle);
;;;276                   }
;;;277                   else if(dLo > 0)//  东南    90- 180
;;;278                   {
;;;279                       angle = 90 + (90 - angle);
;;;280                        v1000_debug("\r\n angle22 :%.1f \r\n",angle);
;;;281                   }
;;;282                }
;;;283               else if(dLa > 0 ) // 北边
;;;284               {
;;;285                   if(dLo <= 0) //在西边   270--360  西北
;;;286                   {
;;;287                       angle = 270 + (90 - angle);
;;;288                   }
;;;289                   else    // 东北
;;;290                   {
;;;291                       angle = (90 - angle);
;;;292                   }
;;;293    
;;;294               }
;;;295               else
;;;296               {
;;;297    
;;;298                   if(dLo < 0) //在西边
;;;299                   {
;;;300                       angle = 270 ;
;;;301                   }
;;;302                   else if(dLo > 0)  // 东
;;;303                   {
;;;304                       angle = 90 ;
;;;305                   }
;;;306    
;;;307               }
;;;308    #endif           
;;;309            }
;;;310    
;;;311            if((latitude1_flag=='N')&&(longitude1_flag=='W'))
000166  f1b80f57          CMP      r8,#0x57
00016a  d03f              BEQ      |L7.492|
00016c  e03a              B        |L7.484|
                  |L7.366|
00016e  4628              MOV      r0,r5                 ;254
000170  f7fffffe          BL       __aeabi_f2d
000174  4602              MOV      r2,r0                 ;254
000176  460b              MOV      r3,r1                 ;254
000178  a029              ADR      r0,|L7.544|
00017a  f7fffffe          BL       __2printf
00017e  4630              MOV      r0,r6                 ;255
000180  f7fffffe          BL       __aeabi_f2d
000184  4602              MOV      r2,r0                 ;255
000186  460b              MOV      r3,r1                 ;255
000188  a029              ADR      r0,|L7.560|
00018a  f7fffffe          BL       __2printf
00018e  4620              MOV      r0,r4                 ;256
000190  f7fffffe          BL       __aeabi_f2d
000194  4602              MOV      r2,r0                 ;256
000196  460b              MOV      r3,r1                 ;256
000198  a029              ADR      r0,|L7.576|
00019a  f7fffffe          BL       __2printf
00019e  4556              CMP      r6,r10                ;259
0001a0  db08              BLT      |L7.436|
0001a2  4555              CMP      r5,r10                ;259
0001a4  da0b              BGE      |L7.446|
                  |L7.422|
0001a6  4621              MOV      r1,r4                 ;260
0001a8  464c              MOV      r4,r9                 ;260
0001aa  4648              MOV      r0,r9                 ;260
0001ac  f7fffffe          BL       __aeabi_fsub
0001b0  4621              MOV      r1,r4                 ;260
0001b2  e00c              B        |L7.462|
                  |L7.436|
0001b4  42bd              CMP      r5,r7                 ;262
0001b6  d302              BCC      |L7.446|
                  |L7.440|
0001b8  4926              LDR      r1,|L7.596|
0001ba  4620              MOV      r0,r4                 ;263
0001bc  e007              B        |L7.462|
                  |L7.446|
0001be  42be              CMP      r6,r7                 ;264
0001c0  d21d              BCS      |L7.510|
0001c2  e007              B        |L7.468|
                  |L7.452|
0001c4  4621              MOV      r1,r4                 ;265
0001c6  4648              MOV      r0,r9                 ;265
0001c8  f7fffffe          BL       __aeabi_fsub
0001cc  4922              LDR      r1,|L7.600|
                  |L7.462|
;;;312            {
;;;313    
;;;314    #if 1
;;;315                
;;;316                if(dLo <= 0&&dLa <= 0){  
;;;317                    angle = (90-angle)+90;  
;;;318                }  
;;;319                else if(dLo > 0&&dLa < 0){  
;;;320                    angle = angle+180.;  
;;;321                }else if(dLo >= 0&&dLa >= 0){  
;;;322                    angle= (90 -angle)+270;  
0001ce  f7fffffe          BL       __aeabi_fadd
0001d2  4604              MOV      r4,r0
                  |L7.468|
0001d4  4620              MOV      r0,r4                 ;267
0001d6  f7fffffe          BL       __aeabi_f2d
0001da  4602              MOV      r2,r0                 ;267
0001dc  460b              MOV      r3,r1                 ;267
0001de  a01f              ADR      r0,|L7.604|
0001e0  f7fffffe          BL       __2printf
                  |L7.484|
;;;323                } 
;;;324                v1000_debug("\r\n angle11 :%.1f \r\n",angle);
;;;325                
;;;326    #else
;;;327    
;;;328                if(dLa < 0)//在南边
;;;329                {
;;;330                   if(dLo  > 0) //在西边   180--270 -=-- 西南
;;;331                   {
;;;332                       angle = 180 + (90 - angle);
;;;333                   }
;;;334                   else if(dLo  <= 0)//  东南    90- 180
;;;335                   {
;;;336                       angle = 90 + (90 - angle);
;;;337                   }
;;;338                }
;;;339               else if(dLa > 0 ) // 北边
;;;340               {
;;;341                   if(dLo >= 0) //在西边   270--360  西北
;;;342                   {
;;;343                       angle = 270 + (90 - angle);
;;;344                   }
;;;345                   else    // 东北
;;;346                   {
;;;347                       angle = (90 - angle);
;;;348                   }
;;;349    
;;;350               }
;;;351               else
;;;352               {
;;;353    
;;;354                   if(dLo > 0) //在西边
;;;355                   {
;;;356                       angle = 270 ;
;;;357                   }
;;;358                   else if(dLo < 0)  // 东
;;;359                   {
;;;360                       angle = 90 ;
;;;361                   }
;;;362    
;;;363               }
;;;364    #endif           
;;;365            }
;;;366    
;;;367        }
;;;368    
;;;369    
;;;370        //v1000_debug("\r\n angle222  %.1f",angle);
;;;371    
;;;372        return angle;
;;;373    
;;;374    }
0001e4  b005              ADD      sp,sp,#0x14
0001e6  4620              MOV      r0,r4                 ;372
0001e8  e8bd8ff0          POP      {r4-r11,pc}
                  |L7.492|
0001ec  4556              CMP      r6,r10                ;316
0001ee  da02              BGE      |L7.502|
0001f0  4555              CMP      r5,r10                ;316
0001f2  dbd8              BLT      |L7.422|
0001f4  e001              B        |L7.506|
                  |L7.502|
0001f6  42bd              CMP      r5,r7                 ;319
0001f8  d2de              BCS      |L7.440|
                  |L7.506|
0001fa  42be              CMP      r6,r7                 ;321
0001fc  d2ea              BCS      |L7.468|
                  |L7.510|
0001fe  42bd              CMP      r5,r7                 ;321
000200  d2e8              BCS      |L7.468|
000202  e7df              B        |L7.452|
;;;375    
                          ENDP

                  |L7.516|
                          DCD      0xf01b866e
                  |L7.520|
                          DCD      0x400921f9
                  |L7.524|
                          DCD      0x40668000
                  |L7.528|
                          DCD      0x42b40000
                  |L7.532|
                          DCD      0x46a74800
                  |L7.536|
                          DCD      0x4ac1fdea
                  |L7.540|
                          DCD      0x80800000
                  |L7.544|
000220  0d0a2064          DCB      "\r\n dla :%f \r\n",0
000224  6c61203a
000228  2566200d
00022c  0a00    
00022e  00                DCB      0
00022f  00                DCB      0
                  |L7.560|
000230  0d0a2064          DCB      "\r\n dLo :%f \r\n",0
000234  4c6f203a
000238  2566200d
00023c  0a00    
00023e  00                DCB      0
00023f  00                DCB      0
                  |L7.576|
000240  0d0a2061          DCB      "\r\n angle :%.1f \r\n",0
000244  6e676c65
000248  203a252e
00024c  3166200d
000250  0a00    
000252  00                DCB      0
000253  00                DCB      0
                  |L7.596|
                          DCD      0x43340000
                  |L7.600|
                          DCD      0x43870000
                  |L7.604|
00025c  0d0a2061          DCB      "\r\n angle11 :%.1f \r\n",0
000260  6e676c65
000264  3131203a
000268  252e3166
00026c  200d0a00

                          AREA ||i.ipart||, CODE, READONLY, ALIGN=1

                  ipart PROC
;;;967    
;;;968    float ipart(float x)
000000  b510              PUSH     {r4,lr}
;;;969    {//	returns the integer part - like int() in basic
;;;970    	float a;
;;;971    	if (x> 0) a = floor(x);
000002  4604              MOV      r4,r0
000004  f7fffffe          BL       __aeabi_f2d
000008  f5b40f00          CMP      r4,#0x800000
00000c  db02              BLT      |L8.20|
00000e  f7fffffe          BL       floor
000012  e001              B        |L8.24|
                  |L8.20|
;;;972    	else a = ceil(x);
000014  f7fffffe          BL       ceil
                  |L8.24|
000018  e8bd4010          POP      {r4,lr}
00001c  f7ffbffe          B.W      __aeabi_d2f
;;;973    	return a;
;;;974    }
;;;975    
                          ENDP


                          AREA ||i.lmst||, CODE, READONLY, ALIGN=2

                  lmst PROC
;;;984    
;;;985    float lmst(float mjd, float glong)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;986    {
000004  4689              MOV      r9,r1
;;;987    	//  Takes the mjd and the longitude (west negative) and then returns
;;;988    	//  the local sidereal time in hours. Im using Meeus formula 11.4
;;;989    	//  instead of messing about with UTo and so on
;;;990    	float lst, t, d;
;;;991    	d = mjd - 51544.5;
000006  492e              LDR      r1,|L9.192|
000008  f7fffffe          BL       __aeabi_fsub
00000c  4680              MOV      r8,r0
;;;992    	t = d / 36525.0;
00000e  492d              LDR      r1,|L9.196|
000010  f7fffffe          BL       __aeabi_fdiv
000014  4604              MOV      r4,r0
;;;993    	lst = range(280.46061837 + 360.98564736629 * d + 0.000387933 *t*t - t*t*t / 38710000);
000016  4601              MOV      r1,r0
000018  f7fffffe          BL       __aeabi_fmul
00001c  4621              MOV      r1,r4
00001e  f7fffffe          BL       __aeabi_fmul
000022  4929              LDR      r1,|L9.200|
000024  f7fffffe          BL       __aeabi_fdiv
000028  f7fffffe          BL       __aeabi_f2d
00002c  4606              MOV      r6,r0
00002e  460f              MOV      r7,r1
000030  4620              MOV      r0,r4
000032  f7fffffe          BL       __aeabi_f2d
000036  460d              MOV      r5,r1
000038  4604              MOV      r4,r0
00003a  4a24              LDR      r2,|L9.204|
00003c  4b24              LDR      r3,|L9.208|
00003e  f7fffffe          BL       __aeabi_dmul
000042  4622              MOV      r2,r4
000044  462b              MOV      r3,r5
000046  f7fffffe          BL       __aeabi_dmul
00004a  4605              MOV      r5,r0
00004c  460c              MOV      r4,r1
00004e  4640              MOV      r0,r8
000050  f7fffffe          BL       __aeabi_f2d
000054  4a1f              LDR      r2,|L9.212|
000056  4b20              LDR      r3,|L9.216|
000058  f7fffffe          BL       __aeabi_dmul
00005c  4a1f              LDR      r2,|L9.220|
00005e  4b20              LDR      r3,|L9.224|
000060  f7fffffe          BL       __aeabi_dadd
000064  462a              MOV      r2,r5
000066  4623              MOV      r3,r4
000068  f7fffffe          BL       __aeabi_dadd
00006c  4632              MOV      r2,r6
00006e  463b              MOV      r3,r7
000070  f7fffffe          BL       __aeabi_dsub
000074  f7fffffe          BL       __aeabi_d2f
000078  f7fffffe          BL       range
00007c  4605              MOV      r5,r0
;;;994    	lst = lst/15.0 + glong/15.0;
00007e  4648              MOV      r0,r9
000080  f7fffffe          BL       __aeabi_f2d
000084  4e17              LDR      r6,|L9.228|
000086  2200              MOVS     r2,#0
000088  4633              MOV      r3,r6
00008a  f7fffffe          BL       __aeabi_ddiv
00008e  4607              MOV      r7,r0
000090  460c              MOV      r4,r1
000092  4628              MOV      r0,r5
000094  f7fffffe          BL       __aeabi_f2d
000098  2200              MOVS     r2,#0
00009a  4633              MOV      r3,r6
00009c  f7fffffe          BL       __aeabi_ddiv
0000a0  463a              MOV      r2,r7
0000a2  4623              MOV      r3,r4
0000a4  f7fffffe          BL       __aeabi_dadd
0000a8  f7fffffe          BL       __aeabi_d2f
;;;995    	if (lst >= 24.0) lst -=24.0;
0000ac  490e              LDR      r1,|L9.232|
0000ae  4288              CMP      r0,r1
0000b0  db03              BLT      |L9.186|
0000b2  e8bd47f0          POP      {r4-r10,lr}
0000b6  f7ffbffe          B.W      __aeabi_fsub
                  |L9.186|
;;;996    	return (lst);
;;;997    }
0000ba  e8bd87f0          POP      {r4-r10,pc}
;;;998    
                          ENDP

0000be  0000              DCW      0x0000
                  |L9.192|
                          DCD      0x47495880
                  |L9.196|
                          DCD      0x470ead00
                  |L9.200|
                          DCD      0x4c13aabc
                  |L9.204|
                          DCD      0x8c4c4b7f
                  |L9.208|
                          DCD      0x3f396c6f
                  |L9.212|
                          DCD      0x362c39aa
                  |L9.216|
                          DCD      0x40768fc5
                  |L9.220|
                          DCD      0xb15e3164
                  |L9.224|
                          DCD      0x4071875e
                  |L9.228|
                          DCD      0x402e0000
                  |L9.232|
                          DCD      0x41c00000

                          AREA ||i.minimoon||, CODE, READONLY, ALIGN=2

                  minimoon PROC
;;;906    
;;;907    float * minimoon(float t) {
000000  e92d4ff0          PUSH     {r4-r11,lr}
000004  b093              SUB      sp,sp,#0x4c
;;;908    // takes t and returns the geocentric ra and dec in an array mooneq
;;;909    // claimed good to 5' (angle) in ra and 1' in dec
;;;910    // tallies with another approximate method and with ICE for a couple of dates
;;;911    	float p2 = 6.283185307, arc = 206264.8062, coseps = 0.91748, sineps = 0.39778;
000006  49ff              LDR      r1,|L10.1028|
000008  9104              STR      r1,[sp,#0x10]
00000a  4efd              LDR      r6,|L10.1024|
00000c  49fe              LDR      r1,|L10.1032|
00000e  960d              STR      r6,[sp,#0x34]
;;;912    	float L0, L, LS, F, D, H, S, N, DL, CB, L_moon, B_moon, V, W, X, Y, Z, RHO,dec,ra;
;;;913    	static float mooneq[2];
;;;914    
;;;915    	L0 = frac(0.606433 + 1336.855225 * t);	// mean longitude of moon
000010  910a              STR      r1,[sp,#0x28]
000012  f7fffffe          BL       __aeabi_f2d
000016  460c              MOV      r4,r1
000018  4605              MOV      r5,r0
00001a  4afc              LDR      r2,|L10.1036|
00001c  4bfc              LDR      r3,|L10.1040|
00001e  f7fffffe          BL       __aeabi_dmul
000022  4afc              LDR      r2,|L10.1044|
000024  4bfc              LDR      r3,|L10.1048|
000026  f7fffffe          BL       __aeabi_dadd
00002a  f7fffffe          BL       __aeabi_d2f
00002e  f7fffffe          BL       frac
000032  900c              STR      r0,[sp,#0x30]
000034  4628              MOV      r0,r5
000036  4621              MOV      r1,r4
;;;916    	L = p2 * frac(0.374897 + 1325.552410 * t); //mean anomaly of Moon
000038  4af8              LDR      r2,|L10.1052|
00003a  4bf9              LDR      r3,|L10.1056|
00003c  f7fffffe          BL       __aeabi_dmul
000040  4af8              LDR      r2,|L10.1060|
000042  4bf9              LDR      r3,|L10.1064|
000044  f7fffffe          BL       __aeabi_dadd
000048  f7fffffe          BL       __aeabi_d2f
00004c  f7fffffe          BL       frac
000050  4631              MOV      r1,r6
000052  f7fffffe          BL       __aeabi_fmul
000056  9000              STR      r0,[sp,#0]
000058  4628              MOV      r0,r5
00005a  4621              MOV      r1,r4
;;;917    	LS = p2 * frac(0.993133 + 99.997361 * t); //mean anomaly of Sun
00005c  4af3              LDR      r2,|L10.1068|
00005e  4bf4              LDR      r3,|L10.1072|
000060  f7fffffe          BL       __aeabi_dmul
000064  4af3              LDR      r2,|L10.1076|
000066  4bf4              LDR      r3,|L10.1080|
000068  f7fffffe          BL       __aeabi_dadd
00006c  f7fffffe          BL       __aeabi_d2f
000070  f7fffffe          BL       frac
000074  4631              MOV      r1,r6
000076  f7fffffe          BL       __aeabi_fmul
00007a  4682              MOV      r10,r0
00007c  4628              MOV      r0,r5
00007e  4621              MOV      r1,r4
;;;918    	D = p2 * frac(0.827361 + 1236.853086 * t); //difference in longitude of moon and sun
000080  4aee              LDR      r2,|L10.1084|
000082  4bef              LDR      r3,|L10.1088|
000084  f7fffffe          BL       __aeabi_dmul
000088  4aee              LDR      r2,|L10.1092|
00008a  4bef              LDR      r3,|L10.1096|
00008c  f7fffffe          BL       __aeabi_dadd
000090  f7fffffe          BL       __aeabi_d2f
000094  f7fffffe          BL       frac
000098  4631              MOV      r1,r6
00009a  f7fffffe          BL       __aeabi_fmul
00009e  900f              STR      r0,[sp,#0x3c]
0000a0  4628              MOV      r0,r5
0000a2  4621              MOV      r1,r4
;;;919    	F = p2 * frac(0.259086 + 1342.227825 * t); //mean argument of latitude
0000a4  4ae9              LDR      r2,|L10.1100|
0000a6  4bea              LDR      r3,|L10.1104|
0000a8  f7fffffe          BL       __aeabi_dmul
0000ac  4ae9              LDR      r2,|L10.1108|
0000ae  4bea              LDR      r3,|L10.1112|
0000b0  f7fffffe          BL       __aeabi_dadd
0000b4  f7fffffe          BL       __aeabi_d2f
0000b8  f7fffffe          BL       frac
0000bc  4631              MOV      r1,r6
0000be  f7fffffe          BL       __aeabi_fmul
0000c2  4683              MOV      r11,r0
;;;920    
;;;921    	// corrections to mean longitude in arcsec
;;;922    	DL =  22640 * sin(L);
0000c4  9800              LDR      r0,[sp,#0]
0000c6  f7fffffe          BL       __aeabi_f2d
0000ca  f7fffffe          BL       ||sin||
0000ce  2200              MOVS     r2,#0
0000d0  4be2              LDR      r3,|L10.1116|
0000d2  f7fffffe          BL       __aeabi_dmul
0000d6  f7fffffe          BL       __aeabi_d2f
0000da  4606              MOV      r6,r0
;;;923    	DL += -4586 * sin(L - 2*D);
0000dc  2101              MOVS     r1,#1
0000de  980f              LDR      r0,[sp,#0x3c]
0000e0  f7fffffe          BL       __ARM_scalbnf
0000e4  4605              MOV      r5,r0
0000e6  9007              STR      r0,[sp,#0x1c]
0000e8  9900              LDR      r1,[sp,#0]
0000ea  f7fffffe          BL       __aeabi_frsub
0000ee  f7fffffe          BL       __aeabi_f2d
0000f2  f7fffffe          BL       ||sin||
0000f6  2200              MOVS     r2,#0
0000f8  4bd9              LDR      r3,|L10.1120|
0000fa  f7fffffe          BL       __aeabi_dmul
0000fe  4607              MOV      r7,r0
000100  460c              MOV      r4,r1
000102  4630              MOV      r0,r6
000104  f7fffffe          BL       __aeabi_f2d
000108  463a              MOV      r2,r7
00010a  4623              MOV      r3,r4
00010c  f7fffffe          BL       __aeabi_dadd
000110  f7fffffe          BL       __aeabi_d2f
000114  4604              MOV      r4,r0
000116  4628              MOV      r0,r5
;;;924    	DL += +2370 * sin(2*D);
000118  f7fffffe          BL       __aeabi_f2d
00011c  f7fffffe          BL       ||sin||
000120  2200              MOVS     r2,#0
000122  4bd0              LDR      r3,|L10.1124|
000124  f7fffffe          BL       __aeabi_dmul
000128  4606              MOV      r6,r0
00012a  460d              MOV      r5,r1
00012c  4620              MOV      r0,r4
00012e  f7fffffe          BL       __aeabi_f2d
000132  4632              MOV      r2,r6
000134  462b              MOV      r3,r5
000136  f7fffffe          BL       __aeabi_dadd
00013a  f7fffffe          BL       __aeabi_d2f
00013e  4605              MOV      r5,r0
;;;925    	DL +=  +769 * sin(2*L);
000140  2101              MOVS     r1,#1
000142  9800              LDR      r0,[sp,#0]
000144  f7fffffe          BL       __ARM_scalbnf
000148  4681              MOV      r9,r0
00014a  f7fffffe          BL       __aeabi_f2d
00014e  f7fffffe          BL       ||sin||
000152  2200              MOVS     r2,#0
000154  4bc4              LDR      r3,|L10.1128|
000156  f7fffffe          BL       __aeabi_dmul
00015a  4606              MOV      r6,r0
00015c  460c              MOV      r4,r1
00015e  4628              MOV      r0,r5
000160  f7fffffe          BL       __aeabi_f2d
000164  4632              MOV      r2,r6
000166  4623              MOV      r3,r4
000168  f7fffffe          BL       __aeabi_dadd
00016c  f7fffffe          BL       __aeabi_d2f
000170  4604              MOV      r4,r0
;;;926    	DL +=  -668 * sin(LS);
000172  4650              MOV      r0,r10
000174  f7fffffe          BL       __aeabi_f2d
000178  4680              MOV      r8,r0
00017a  9106              STR      r1,[sp,#0x18]
00017c  f7fffffe          BL       ||sin||
000180  2200              MOVS     r2,#0
000182  4bba              LDR      r3,|L10.1132|
000184  f7fffffe          BL       __aeabi_dmul
000188  4605              MOV      r5,r0
00018a  460e              MOV      r6,r1
00018c  4620              MOV      r0,r4
00018e  f7fffffe          BL       __aeabi_f2d
000192  462a              MOV      r2,r5
000194  4633              MOV      r3,r6
000196  f7fffffe          BL       __aeabi_dadd
00019a  f7fffffe          BL       __aeabi_d2f
00019e  4605              MOV      r5,r0
;;;927    	DL +=  -412 * sin(2*F);
0001a0  2101              MOVS     r1,#1
0001a2  4658              MOV      r0,r11
0001a4  f7fffffe          BL       __ARM_scalbnf
0001a8  9011              STR      r0,[sp,#0x44]
0001aa  f7fffffe          BL       __aeabi_f2d
0001ae  4604              MOV      r4,r0
0001b0  9102              STR      r1,[sp,#8]
0001b2  f7fffffe          BL       ||sin||
0001b6  2200              MOVS     r2,#0
0001b8  4bad              LDR      r3,|L10.1136|
0001ba  f7fffffe          BL       __aeabi_dmul
0001be  4607              MOV      r7,r0
0001c0  460e              MOV      r6,r1
0001c2  4628              MOV      r0,r5
0001c4  f7fffffe          BL       __aeabi_f2d
0001c8  463a              MOV      r2,r7
0001ca  4633              MOV      r3,r6
0001cc  f7fffffe          BL       __aeabi_dadd
0001d0  f7fffffe          BL       __aeabi_d2f
0001d4  4606              MOV      r6,r0
0001d6  4648              MOV      r0,r9
;;;928    	DL +=  -212 * sin(2*L - 2*D);
0001d8  9907              LDR      r1,[sp,#0x1c]
0001da  f7fffffe          BL       __aeabi_fsub
0001de  f7fffffe          BL       __aeabi_f2d
0001e2  f7fffffe          BL       ||sin||
0001e6  2200              MOVS     r2,#0
0001e8  4ba2              LDR      r3,|L10.1140|
0001ea  f7fffffe          BL       __aeabi_dmul
0001ee  4607              MOV      r7,r0
0001f0  460d              MOV      r5,r1
0001f2  4630              MOV      r0,r6
0001f4  f7fffffe          BL       __aeabi_f2d
0001f8  463a              MOV      r2,r7
0001fa  462b              MOV      r3,r5
0001fc  f7fffffe          BL       __aeabi_dadd
000200  f7fffffe          BL       __aeabi_d2f
000204  4606              MOV      r6,r0
;;;929    	DL +=  -206 * sin(L + LS - 2*D);
000206  4651              MOV      r1,r10
000208  9d07              LDR      r5,[sp,#0x1c]
00020a  9800              LDR      r0,[sp,#0]
00020c  f7fffffe          BL       __aeabi_fadd
000210  4681              MOV      r9,r0
000212  4629              MOV      r1,r5
000214  f7fffffe          BL       __aeabi_fsub
000218  f7fffffe          BL       __aeabi_f2d
00021c  f7fffffe          BL       ||sin||
000220  2200              MOVS     r2,#0
000222  4b95              LDR      r3,|L10.1144|
000224  f7fffffe          BL       __aeabi_dmul
000228  4607              MOV      r7,r0
00022a  460d              MOV      r5,r1
00022c  4630              MOV      r0,r6
00022e  f7fffffe          BL       __aeabi_f2d
000232  463a              MOV      r2,r7
000234  462b              MOV      r3,r5
000236  f7fffffe          BL       __aeabi_dadd
00023a  f7fffffe          BL       __aeabi_d2f
00023e  4606              MOV      r6,r0
;;;930    	DL +=  +192 * sin(L + 2*D);
000240  9900              LDR      r1,[sp,#0]
000242  9807              LDR      r0,[sp,#0x1c]
000244  f7fffffe          BL       __aeabi_fadd
000248  f7fffffe          BL       __aeabi_f2d
00024c  f7fffffe          BL       ||sin||
000250  2200              MOVS     r2,#0
000252  4b8a              LDR      r3,|L10.1148|
000254  f7fffffe          BL       __aeabi_dmul
000258  4605              MOV      r5,r0
00025a  460f              MOV      r7,r1
00025c  4630              MOV      r0,r6
00025e  f7fffffe          BL       __aeabi_f2d
000262  462a              MOV      r2,r5
000264  463b              MOV      r3,r7
000266  f7fffffe          BL       __aeabi_dadd
00026a  f7fffffe          BL       __aeabi_d2f
00026e  4606              MOV      r6,r0
;;;931    	DL +=  -165 * sin(LS - 2*D);
000270  4651              MOV      r1,r10
000272  9807              LDR      r0,[sp,#0x1c]
000274  f7fffffe          BL       __aeabi_frsub
000278  f7fffffe          BL       __aeabi_f2d
00027c  f7fffffe          BL       ||sin||
000280  2200              MOVS     r2,#0
000282  4b7f              LDR      r3,|L10.1152|
000284  f7fffffe          BL       __aeabi_dmul
000288  4607              MOV      r7,r0
00028a  460d              MOV      r5,r1
00028c  4630              MOV      r0,r6
00028e  f7fffffe          BL       __aeabi_f2d
000292  463a              MOV      r2,r7
000294  462b              MOV      r3,r5
000296  f7fffffe          BL       __aeabi_dadd
00029a  f7fffffe          BL       __aeabi_d2f
00029e  4606              MOV      r6,r0
;;;932    	DL +=  -125 * sin(D);
0002a0  980f              LDR      r0,[sp,#0x3c]
0002a2  f7fffffe          BL       __aeabi_f2d
0002a6  f7fffffe          BL       ||sin||
0002aa  2200              MOVS     r2,#0
0002ac  4b75              LDR      r3,|L10.1156|
0002ae  f7fffffe          BL       __aeabi_dmul
0002b2  4605              MOV      r5,r0
0002b4  460f              MOV      r7,r1
0002b6  4630              MOV      r0,r6
0002b8  f7fffffe          BL       __aeabi_f2d
0002bc  462a              MOV      r2,r5
0002be  463b              MOV      r3,r7
0002c0  f7fffffe          BL       __aeabi_dadd
0002c4  f7fffffe          BL       __aeabi_d2f
0002c8  4606              MOV      r6,r0
0002ca  4648              MOV      r0,r9
;;;933    	DL +=  -110 * sin(L + LS);
0002cc  f7fffffe          BL       __aeabi_f2d
0002d0  f7fffffe          BL       ||sin||
0002d4  2200              MOVS     r2,#0
0002d6  4b6c              LDR      r3,|L10.1160|
0002d8  f7fffffe          BL       __aeabi_dmul
0002dc  4607              MOV      r7,r0
0002de  460d              MOV      r5,r1
0002e0  4630              MOV      r0,r6
0002e2  f7fffffe          BL       __aeabi_f2d
0002e6  463a              MOV      r2,r7
0002e8  462b              MOV      r3,r5
0002ea  f7fffffe          BL       __aeabi_dadd
0002ee  f7fffffe          BL       __aeabi_d2f
0002f2  4606              MOV      r6,r0
;;;934    	DL +=  +148 * sin(L - LS);
0002f4  4651              MOV      r1,r10
0002f6  9800              LDR      r0,[sp,#0]
0002f8  f7fffffe          BL       __aeabi_fsub
0002fc  f7fffffe          BL       __aeabi_f2d
000300  f7fffffe          BL       ||sin||
000304  2200              MOVS     r2,#0
000306  4b61              LDR      r3,|L10.1164|
000308  f7fffffe          BL       __aeabi_dmul
00030c  4605              MOV      r5,r0
00030e  460f              MOV      r7,r1
000310  4630              MOV      r0,r6
000312  f7fffffe          BL       __aeabi_f2d
000316  462a              MOV      r2,r5
000318  463b              MOV      r3,r7
00031a  f7fffffe          BL       __aeabi_dadd
00031e  f7fffffe          BL       __aeabi_d2f
000322  4607              MOV      r7,r0
;;;935    	DL +=   -55 * sin(2*F - 2*D);
000324  9907              LDR      r1,[sp,#0x1c]
000326  9811              LDR      r0,[sp,#0x44]
000328  f7fffffe          BL       __aeabi_fsub
00032c  f7fffffe          BL       __aeabi_f2d
000330  f7fffffe          BL       ||sin||
000334  2200              MOVS     r2,#0
000336  4b56              LDR      r3,|L10.1168|
000338  f7fffffe          BL       __aeabi_dmul
00033c  4605              MOV      r5,r0
00033e  460e              MOV      r6,r1
000340  4638              MOV      r0,r7
000342  f7fffffe          BL       __aeabi_f2d
000346  462a              MOV      r2,r5
000348  4633              MOV      r3,r6
00034a  f7fffffe          BL       __aeabi_dadd
00034e  f7fffffe          BL       __aeabi_d2f
000352  4681              MOV      r9,r0
000354  4640              MOV      r0,r8
;;;936    
;;;937    	// simplified form of the latitude terms
;;;938    	S = F + (DL + 412 * sin(2*F) + 541* sin(LS)) / arc;
000356  9906              LDR      r1,[sp,#0x18]
000358  f7fffffe          BL       ||sin||
00035c  2200              MOVS     r2,#0
00035e  4b4d              LDR      r3,|L10.1172|
000360  f7fffffe          BL       __aeabi_dmul
000364  4605              MOV      r5,r0
000366  460e              MOV      r6,r1
000368  4620              MOV      r0,r4
00036a  9902              LDR      r1,[sp,#8]
00036c  f7fffffe          BL       ||sin||
000370  2200              MOVS     r2,#0
000372  4b49              LDR      r3,|L10.1176|
000374  f7fffffe          BL       __aeabi_dmul
000378  4604              MOV      r4,r0
00037a  460f              MOV      r7,r1
00037c  4648              MOV      r0,r9
00037e  f7fffffe          BL       __aeabi_f2d
000382  463b              MOV      r3,r7
000384  4622              MOV      r2,r4
000386  f7fffffe          BL       __aeabi_dadd
00038a  462a              MOV      r2,r5
00038c  4633              MOV      r3,r6
00038e  f7fffffe          BL       __aeabi_dadd
000392  f04f4200          MOV      r2,#0x80000000
000396  4b41              LDR      r3,|L10.1180|
000398  f7fffffe          BL       __aeabi_ddiv
00039c  4604              MOV      r4,r0
00039e  460d              MOV      r5,r1
0003a0  4658              MOV      r0,r11
0003a2  f7fffffe          BL       __aeabi_f2d
0003a6  4622              MOV      r2,r4
0003a8  462b              MOV      r3,r5
0003aa  f7fffffe          BL       __aeabi_dadd
0003ae  f7fffffe          BL       __aeabi_d2f
0003b2  4680              MOV      r8,r0
;;;939    	H = F - 2*D;
0003b4  4659              MOV      r1,r11
0003b6  9807              LDR      r0,[sp,#0x1c]
0003b8  f7fffffe          BL       __aeabi_frsub
0003bc  4606              MOV      r6,r0
;;;940    	N =   -526 * sin(H);
0003be  f7fffffe          BL       __aeabi_f2d
0003c2  f7fffffe          BL       ||sin||
0003c6  2200              MOVS     r2,#0
0003c8  4b35              LDR      r3,|L10.1184|
0003ca  f7fffffe          BL       __aeabi_dmul
0003ce  f7fffffe          BL       __aeabi_d2f
0003d2  4607              MOV      r7,r0
;;;941    	N +=   +44 * sin(L + H);
0003d4  4631              MOV      r1,r6
0003d6  9800              LDR      r0,[sp,#0]
0003d8  f7fffffe          BL       __aeabi_fadd
0003dc  f7fffffe          BL       __aeabi_f2d
0003e0  f7fffffe          BL       ||sin||
0003e4  2200              MOVS     r2,#0
0003e6  4b2f              LDR      r3,|L10.1188|
0003e8  f7fffffe          BL       __aeabi_dmul
0003ec  4604              MOV      r4,r0
0003ee  460d              MOV      r5,r1
0003f0  4638              MOV      r0,r7
0003f2  f7fffffe          BL       __aeabi_f2d
0003f6  4622              MOV      r2,r4
0003f8  462b              MOV      r3,r5
0003fa  f7fffffe          BL       __aeabi_dadd
0003fe  e053              B        |L10.1192|
                  |L10.1024|
                          DCD      0x40c90fdb
                  |L10.1028|
                          DCD      0x3f6adff8
                  |L10.1032|
                          DCD      0x3ecba9d2
                  |L10.1036|
                          DCD      0xc01a36e3
                  |L10.1040|
                          DCD      0x4094e36b
                  |L10.1044|
                          DCD      0x2dc6e2a8
                  |L10.1048|
                          DCD      0x3fe367e6
                  |L10.1052|
                          DCD      0xaaf78fef
                  |L10.1056|
                          DCD      0x4094b635
                  |L10.1060|
                          DCD      0xfc9795b3
                  |L10.1064|
                          DCD      0x3fd7fe4f
                  |L10.1068|
                          DCD      0xc33b5393
                  |L10.1072|
                          DCD      0x4058ffd4
                  |L10.1076|
                          DCD      0xdb7281fe
                  |L10.1080|
                          DCD      0x3fefc7be
                  |L10.1084|
                          DCD      0x8f605ab4
                  |L10.1088|
                          DCD      0x40935369
                  |L10.1092|
                          DCD      0xc69f8c22
                  |L10.1096|
                          DCD      0x3fea79bd
                  |L10.1100|
                          DCD      0x4af4f0d8
                  |L10.1104|
                          DCD      0x4094f8e9
                  |L10.1108|
                          DCD      0x72367e41
                  |L10.1112|
                          DCD      0x3fd094dd
                  |L10.1116|
                          DCD      0x40d61c00
                  |L10.1120|
                          DCD      0xc0b1ea00
                  |L10.1124|
                          DCD      0x40a28400
                  |L10.1128|
                          DCD      0x40880800
                  |L10.1132|
                          DCD      0xc084e000
                  |L10.1136|
                          DCD      0xc079c000
                  |L10.1140|
                          DCD      0xc06a8000
                  |L10.1144|
                          DCD      0xc069c000
                  |L10.1148|
                          DCD      0x40680000
                  |L10.1152|
                          DCD      0xc064a000
                  |L10.1156|
                          DCD      0xc05f4000
                  |L10.1160|
                          DCD      0xc05b8000
                  |L10.1164|
                          DCD      0x40628000
                  |L10.1168|
                          DCD      0xc04b8000
                  |L10.1172|
                          DCD      0x4080e800
                  |L10.1176|
                          DCD      0x4079c000
                  |L10.1180|
                          DCD      0x41092dc6
                  |L10.1184|
                          DCD      0xc0807000
                  |L10.1188|
                          DCD      0x40460000
                  |L10.1192|
0004a8  f7fffffe          BL       __aeabi_d2f
0004ac  4605              MOV      r5,r0
;;;942    	N +=   -31 * sin(-L + H);
0004ae  4630              MOV      r0,r6
0004b0  9900              LDR      r1,[sp,#0]
0004b2  f7fffffe          BL       __aeabi_fsub
0004b6  f7fffffe          BL       __aeabi_f2d
0004ba  f7fffffe          BL       ||sin||
0004be  2200              MOVS     r2,#0
0004c0  4b91              LDR      r3,|L10.1800|
0004c2  f7fffffe          BL       __aeabi_dmul
0004c6  4607              MOV      r7,r0
0004c8  460c              MOV      r4,r1
0004ca  4628              MOV      r0,r5
0004cc  f7fffffe          BL       __aeabi_f2d
0004d0  463a              MOV      r2,r7
0004d2  4623              MOV      r3,r4
0004d4  f7fffffe          BL       __aeabi_dadd
0004d8  f7fffffe          BL       __aeabi_d2f
0004dc  4605              MOV      r5,r0
;;;943    	N +=   -23 * sin(LS + H);
0004de  4631              MOV      r1,r6
0004e0  4650              MOV      r0,r10
0004e2  f7fffffe          BL       __aeabi_fadd
0004e6  f7fffffe          BL       __aeabi_f2d
0004ea  f7fffffe          BL       ||sin||
0004ee  2200              MOVS     r2,#0
0004f0  4b86              LDR      r3,|L10.1804|
0004f2  f7fffffe          BL       __aeabi_dmul
0004f6  4607              MOV      r7,r0
0004f8  460c              MOV      r4,r1
0004fa  4628              MOV      r0,r5
0004fc  f7fffffe          BL       __aeabi_f2d
000500  463a              MOV      r2,r7
000502  4623              MOV      r3,r4
000504  f7fffffe          BL       __aeabi_dadd
000508  f7fffffe          BL       __aeabi_d2f
00050c  4604              MOV      r4,r0
;;;944    	N +=   +11 * sin(-LS + H);
00050e  4651              MOV      r1,r10
000510  4630              MOV      r0,r6
000512  f7fffffe          BL       __aeabi_fsub
000516  f7fffffe          BL       __aeabi_f2d
00051a  f7fffffe          BL       ||sin||
00051e  2200              MOVS     r2,#0
000520  4b7b              LDR      r3,|L10.1808|
000522  f7fffffe          BL       __aeabi_dmul
000526  4606              MOV      r6,r0
000528  460d              MOV      r5,r1
00052a  4620              MOV      r0,r4
00052c  f7fffffe          BL       __aeabi_f2d
000530  4632              MOV      r2,r6
000532  462b              MOV      r3,r5
000534  f7fffffe          BL       __aeabi_dadd
000538  f7fffffe          BL       __aeabi_d2f
00053c  4604              MOV      r4,r0
;;;945    	N +=   -25 * sin(-2*L + F);
00053e  f04f4140          MOV      r1,#0xc0000000
000542  9800              LDR      r0,[sp,#0]
000544  f7fffffe          BL       __aeabi_fmul
000548  4659              MOV      r1,r11
00054a  f7fffffe          BL       __aeabi_fadd
00054e  f7fffffe          BL       __aeabi_f2d
000552  f7fffffe          BL       ||sin||
000556  2200              MOVS     r2,#0
000558  4b6e              LDR      r3,|L10.1812|
00055a  f7fffffe          BL       __aeabi_dmul
00055e  4606              MOV      r6,r0
000560  460d              MOV      r5,r1
000562  4620              MOV      r0,r4
000564  f7fffffe          BL       __aeabi_f2d
000568  4632              MOV      r2,r6
00056a  462b              MOV      r3,r5
00056c  f7fffffe          BL       __aeabi_dadd
000570  f7fffffe          BL       __aeabi_d2f
000574  4606              MOV      r6,r0
;;;946    	N +=   +21 * sin(-L + F);
000576  4658              MOV      r0,r11
000578  9900              LDR      r1,[sp,#0]
00057a  f7fffffe          BL       __aeabi_fsub
00057e  f7fffffe          BL       __aeabi_f2d
000582  f7fffffe          BL       ||sin||
000586  2200              MOVS     r2,#0
000588  4b63              LDR      r3,|L10.1816|
00058a  f7fffffe          BL       __aeabi_dmul
00058e  4604              MOV      r4,r0
000590  460d              MOV      r5,r1
000592  4630              MOV      r0,r6
000594  f7fffffe          BL       __aeabi_f2d
000598  4622              MOV      r2,r4
00059a  462b              MOV      r3,r5
00059c  f7fffffe          BL       __aeabi_dadd
0005a0  f7fffffe          BL       __aeabi_d2f
0005a4  4604              MOV      r4,r0
;;;947    
;;;948    	// ecliptic long and lat of Moon in rads
;;;949    	L_moon = p2 * frac(L0 + DL / 1296000);
0005a6  495d              LDR      r1,|L10.1820|
0005a8  4648              MOV      r0,r9
0005aa  f7fffffe          BL       __aeabi_fdiv
0005ae  990c              LDR      r1,[sp,#0x30]
0005b0  f7fffffe          BL       __aeabi_fadd
0005b4  f7fffffe          BL       frac
0005b8  990d              LDR      r1,[sp,#0x34]
0005ba  f7fffffe          BL       __aeabi_fmul
0005be  4605              MOV      r5,r0
;;;950    	B_moon = (18520.0 * sin(S) + N) /arc;
0005c0  4620              MOV      r0,r4
0005c2  f7fffffe          BL       __aeabi_f2d
0005c6  4604              MOV      r4,r0
0005c8  460e              MOV      r6,r1
0005ca  4640              MOV      r0,r8
0005cc  f7fffffe          BL       __aeabi_f2d
0005d0  f7fffffe          BL       ||sin||
0005d4  2200              MOVS     r2,#0
0005d6  4b52              LDR      r3,|L10.1824|
0005d8  f7fffffe          BL       __aeabi_dmul
0005dc  4622              MOV      r2,r4
0005de  4633              MOV      r3,r6
0005e0  f7fffffe          BL       __aeabi_dadd
0005e4  f04f4200          MOV      r2,#0x80000000
0005e8  4b4e              LDR      r3,|L10.1828|
0005ea  f7fffffe          BL       __aeabi_ddiv
0005ee  f7fffffe          BL       __aeabi_d2f
;;;951    
;;;952    	// equatorial coord conversion - note fixed obliquity
;;;953    	CB = cos(B_moon);
0005f2  f7fffffe          BL       __aeabi_f2d
0005f6  468b              MOV      r11,r1
0005f8  4606              MOV      r6,r0
0005fa  f7fffffe          BL       ||cos||
0005fe  f7fffffe          BL       __aeabi_d2f
000602  4604              MOV      r4,r0
;;;954    	X = CB * cos(L_moon);
000604  4628              MOV      r0,r5
000606  f7fffffe          BL       __aeabi_f2d
00060a  468a              MOV      r10,r1
00060c  4605              MOV      r5,r0
00060e  f7fffffe          BL       ||cos||
000612  4607              MOV      r7,r0
000614  4688              MOV      r8,r1
000616  4620              MOV      r0,r4
000618  f7fffffe          BL       __aeabi_f2d
00061c  4689              MOV      r9,r1
00061e  4604              MOV      r4,r0
000620  463a              MOV      r2,r7
000622  4643              MOV      r3,r8
000624  f7fffffe          BL       __aeabi_dmul
000628  f7fffffe          BL       __aeabi_d2f
00062c  4607              MOV      r7,r0
00062e  4628              MOV      r0,r5
000630  4651              MOV      r1,r10
;;;955    	V = CB * sin(L_moon);
000632  f7fffffe          BL       ||sin||
000636  4622              MOV      r2,r4
000638  464b              MOV      r3,r9
00063a  f7fffffe          BL       __aeabi_dmul
00063e  f7fffffe          BL       __aeabi_d2f
000642  4604              MOV      r4,r0
000644  4630              MOV      r0,r6
000646  4659              MOV      r1,r11
;;;956    	W = sin(B_moon);
000648  f7fffffe          BL       ||sin||
00064c  f7fffffe          BL       __aeabi_d2f
000650  4605              MOV      r5,r0
;;;957    	Y = coseps * V - sineps * W;
000652  4601              MOV      r1,r0
000654  980a              LDR      r0,[sp,#0x28]
000656  f7fffffe          BL       __aeabi_fmul
00065a  4606              MOV      r6,r0
00065c  4621              MOV      r1,r4
00065e  9804              LDR      r0,[sp,#0x10]
000660  f7fffffe          BL       __aeabi_fmul
000664  4631              MOV      r1,r6
000666  f7fffffe          BL       __aeabi_fsub
00066a  4606              MOV      r6,r0
;;;958    	Z = sineps * V + coseps * W;
00066c  4629              MOV      r1,r5
00066e  9804              LDR      r0,[sp,#0x10]
000670  f7fffffe          BL       __aeabi_fmul
000674  4605              MOV      r5,r0
000676  4621              MOV      r1,r4
000678  980a              LDR      r0,[sp,#0x28]
00067a  f7fffffe          BL       __aeabi_fmul
00067e  4629              MOV      r1,r5
000680  f7fffffe          BL       __aeabi_fadd
000684  4604              MOV      r4,r0
;;;959    	RHO = sqrt(1.0 - Z*Z);
000686  4601              MOV      r1,r0
000688  f7fffffe          BL       __aeabi_fmul
00068c  f7fffffe          BL       __aeabi_f2d
000690  2200              MOVS     r2,#0
000692  4b25              LDR      r3,|L10.1832|
000694  f7fffffe          BL       __aeabi_drsub
000698  f7fffffe          BL       sqrt
00069c  f7fffffe          BL       __aeabi_d2f
0006a0  4605              MOV      r5,r0
;;;960    	dec = (360.0 / p2) * atan(Z / RHO);
0006a2  4601              MOV      r1,r0
0006a4  4620              MOV      r0,r4
0006a6  f7fffffe          BL       __aeabi_fdiv
0006aa  f7fffffe          BL       __aeabi_f2d
0006ae  f7fffffe          BL       atan
0006b2  4602              MOV      r2,r0
0006b4  460b              MOV      r3,r1
0006b6  481d              LDR      r0,|L10.1836|
0006b8  491d              LDR      r1,|L10.1840|
0006ba  f7fffffe          BL       __aeabi_dmul
0006be  f7fffffe          BL       __aeabi_d2f
0006c2  4604              MOV      r4,r0
;;;961    	ra = (48.0 / p2) * atan(Y / (X + RHO));
0006c4  4629              MOV      r1,r5
0006c6  4638              MOV      r0,r7
0006c8  f7fffffe          BL       __aeabi_fadd
0006cc  4601              MOV      r1,r0
0006ce  4630              MOV      r0,r6
0006d0  f7fffffe          BL       __aeabi_fdiv
0006d4  f7fffffe          BL       __aeabi_f2d
0006d8  f7fffffe          BL       atan
0006dc  4602              MOV      r2,r0
0006de  460b              MOV      r3,r1
0006e0  4814              LDR      r0,|L10.1844|
0006e2  4915              LDR      r1,|L10.1848|
0006e4  f7fffffe          BL       __aeabi_dmul
0006e8  f7fffffe          BL       __aeabi_d2f
;;;962    	if (ra <0 ) ra += 24;
0006ec  f1104fff          CMN      r0,#0x7f800000
0006f0  d302              BCC      |L10.1784|
0006f2  4912              LDR      r1,|L10.1852|
0006f4  f7fffffe          BL       __aeabi_fadd
                  |L10.1784|
;;;963    	mooneq[1] = dec;
0006f8  4911              LDR      r1,|L10.1856|
0006fa  e9c10400          STRD     r0,r4,[r1,#0]
;;;964    	mooneq[0] = ra;
;;;965    	return mooneq;
;;;966    }
0006fe  b013              ADD      sp,sp,#0x4c
000700  4608              MOV      r0,r1                 ;965
000702  e8bd8ff0          POP      {r4-r11,pc}
;;;967    
                          ENDP

000706  0000              DCW      0x0000
                  |L10.1800|
                          DCD      0xc03f0000
                  |L10.1804|
                          DCD      0xc0370000
                  |L10.1808|
                          DCD      0x40260000
                  |L10.1812|
                          DCD      0xc0390000
                  |L10.1816|
                          DCD      0x40350000
                  |L10.1820|
                          DCD      0x499e3400
                  |L10.1824|
                          DCD      0x40d21600
                  |L10.1828|
                          DCD      0x41092dc6
                  |L10.1832|
                          DCD      0x3ff00000
                  |L10.1836|
                          DCD      0x0d03cf26
                  |L10.1840|
                          DCD      0x404ca5dc
                  |L10.1844|
                          DCD      0x966a768f
                  |L10.1848|
                          DCD      0x401e8ec8
                  |L10.1852|
                          DCD      0x41c00000
                  |L10.1856|
                          DCD      ||.data||

                          AREA ||i.minisun||, CODE, READONLY, ALIGN=2

                  minisun PROC
;;;1000   
;;;1001   float * minisun(float t)
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;1002   {
;;;1003   	//  returns the ra and dec of the Sun in an array called suneq[]
;;;1004   	//  in decimal hours, degs referred to the equinox of date and using
;;;1005   	//  obliquity of the ecliptic at J2000.0 (small error for +- 100 yrs)
;;;1006   	//	takes t centuries since J2000.0. Claimed good to 1 arcmin
;;;1007   	float p2 = 6.283185307, coseps = 0.91748, sineps = 0.39778;
000004  f8df8170          LDR      r8,|L11.376|
000008  f8df9170          LDR      r9,|L11.380|
00000c  f8dfa170          LDR      r10,|L11.384|
;;;1008   	float L, M, DL, SL, X, Y, Z, RHO, ra, dec;
;;;1009   	static float suneq[2];
;;;1010   
;;;1011   	M = p2 * frac(0.993133 + 99.997361 * t);
000010  f7fffffe          BL       __aeabi_f2d
000014  468b              MOV      r11,r1
000016  4604              MOV      r4,r0
000018  4a5a              LDR      r2,|L11.388|
00001a  4b5b              LDR      r3,|L11.392|
00001c  f7fffffe          BL       __aeabi_dmul
000020  4a5a              LDR      r2,|L11.396|
000022  4b5b              LDR      r3,|L11.400|
000024  f7fffffe          BL       __aeabi_dadd
000028  f7fffffe          BL       __aeabi_d2f
00002c  f7fffffe          BL       frac
000030  4641              MOV      r1,r8
000032  f7fffffe          BL       __aeabi_fmul
000036  4606              MOV      r6,r0
;;;1012   	DL = 6893.0 * sin(M) + 72.0 * sin(2 * M);
000038  2101              MOVS     r1,#1
00003a  f7fffffe          BL       __ARM_scalbnf
00003e  f7fffffe          BL       __aeabi_f2d
000042  f7fffffe          BL       ||sin||
000046  2200              MOVS     r2,#0
000048  4b52              LDR      r3,|L11.404|
00004a  f7fffffe          BL       __aeabi_dmul
00004e  4607              MOV      r7,r0
000050  460d              MOV      r5,r1
000052  4630              MOV      r0,r6
000054  f7fffffe          BL       __aeabi_f2d
000058  f7fffffe          BL       ||sin||
00005c  2200              MOVS     r2,#0
00005e  4b4e              LDR      r3,|L11.408|
000060  f7fffffe          BL       __aeabi_dmul
000064  463a              MOV      r2,r7
000066  462b              MOV      r3,r5
000068  f7fffffe          BL       __aeabi_dadd
00006c  f7fffffe          BL       __aeabi_d2f
;;;1013   	L = p2 * frac(0.7859453 + M / p2 + (6191.2 * t + DL)/1296000);
000070  f7fffffe          BL       __aeabi_f2d
000074  4607              MOV      r7,r0
000076  460d              MOV      r5,r1
000078  4620              MOV      r0,r4
00007a  4659              MOV      r1,r11
00007c  f04f3233          MOV      r2,#0x33333333
000080  4b46              LDR      r3,|L11.412|
000082  f7fffffe          BL       __aeabi_dmul
000086  463a              MOV      r2,r7
000088  462b              MOV      r3,r5
00008a  f7fffffe          BL       __aeabi_dadd
00008e  2200              MOVS     r2,#0
000090  4b43              LDR      r3,|L11.416|
000092  f7fffffe          BL       __aeabi_ddiv
000096  4605              MOV      r5,r0
000098  460c              MOV      r4,r1
00009a  4641              MOV      r1,r8
00009c  4630              MOV      r0,r6
00009e  f7fffffe          BL       __aeabi_fdiv
0000a2  f7fffffe          BL       __aeabi_f2d
0000a6  4a3f              LDR      r2,|L11.420|
0000a8  4b3f              LDR      r3,|L11.424|
0000aa  f7fffffe          BL       __aeabi_dadd
0000ae  462a              MOV      r2,r5
0000b0  4623              MOV      r3,r4
0000b2  f7fffffe          BL       __aeabi_dadd
0000b6  f7fffffe          BL       __aeabi_d2f
0000ba  f7fffffe          BL       frac
0000be  4641              MOV      r1,r8
0000c0  f7fffffe          BL       __aeabi_fmul
;;;1014   	SL = sin(L);
0000c4  f7fffffe          BL       __aeabi_f2d
0000c8  460d              MOV      r5,r1
0000ca  4604              MOV      r4,r0
0000cc  f7fffffe          BL       ||sin||
0000d0  f7fffffe          BL       __aeabi_d2f
0000d4  4606              MOV      r6,r0
0000d6  4620              MOV      r0,r4
0000d8  4629              MOV      r1,r5
;;;1015   	X = cos(L);
0000da  f7fffffe          BL       ||cos||
0000de  f7fffffe          BL       __aeabi_d2f
0000e2  4605              MOV      r5,r0
;;;1016   	Y = coseps * SL;
0000e4  4631              MOV      r1,r6
0000e6  4648              MOV      r0,r9
0000e8  f7fffffe          BL       __aeabi_fmul
0000ec  4607              MOV      r7,r0
;;;1017   	Z = sineps * SL;
0000ee  4631              MOV      r1,r6
0000f0  4650              MOV      r0,r10
0000f2  f7fffffe          BL       __aeabi_fmul
0000f6  4604              MOV      r4,r0
;;;1018   	RHO = sqrt(1 - Z * Z);
0000f8  4601              MOV      r1,r0
0000fa  f7fffffe          BL       __aeabi_fmul
0000fe  f04f517e          MOV      r1,#0x3f800000
000102  f7fffffe          BL       __aeabi_frsub
000106  f7fffffe          BL       __aeabi_f2d
00010a  f7fffffe          BL       sqrt
00010e  f7fffffe          BL       __aeabi_d2f
000112  4606              MOV      r6,r0
;;;1019   	dec = (360.0 / p2) * atan(Z / RHO);
000114  4601              MOV      r1,r0
000116  4620              MOV      r0,r4
000118  f7fffffe          BL       __aeabi_fdiv
00011c  f7fffffe          BL       __aeabi_f2d
000120  f7fffffe          BL       atan
000124  4602              MOV      r2,r0
000126  460b              MOV      r3,r1
000128  4820              LDR      r0,|L11.428|
00012a  4921              LDR      r1,|L11.432|
00012c  f7fffffe          BL       __aeabi_dmul
000130  f7fffffe          BL       __aeabi_d2f
000134  4604              MOV      r4,r0
;;;1020   	ra = (48.0 / p2) * atan(Y / (X + RHO));
000136  4631              MOV      r1,r6
000138  4628              MOV      r0,r5
00013a  f7fffffe          BL       __aeabi_fadd
00013e  4601              MOV      r1,r0
000140  4638              MOV      r0,r7
000142  f7fffffe          BL       __aeabi_fdiv
000146  f7fffffe          BL       __aeabi_f2d
00014a  f7fffffe          BL       atan
00014e  4602              MOV      r2,r0
000150  460b              MOV      r3,r1
000152  4818              LDR      r0,|L11.436|
000154  4918              LDR      r1,|L11.440|
000156  f7fffffe          BL       __aeabi_dmul
00015a  f7fffffe          BL       __aeabi_d2f
;;;1021   	if (ra <0 ) ra += 24;
00015e  f1104fff          CMN      r0,#0x7f800000
000162  d302              BCC      |L11.362|
000164  4915              LDR      r1,|L11.444|
000166  f7fffffe          BL       __aeabi_fadd
                  |L11.362|
;;;1022   	suneq[1] = dec;
00016a  4915              LDR      r1,|L11.448|
00016c  e9c10400          STRD     r0,r4,[r1,#0]
;;;1023   	suneq[0] = ra;
;;;1024   	return suneq;
000170  4608              MOV      r0,r1
;;;1025   }
000172  e8bd9ff0          POP      {r4-r12,pc}
;;;1026   
                          ENDP

000176  0000              DCW      0x0000
                  |L11.376|
                          DCD      0x40c90fdb
                  |L11.380|
                          DCD      0x3f6adff8
                  |L11.384|
                          DCD      0x3ecba9d2
                  |L11.388|
                          DCD      0xc33b5393
                  |L11.392|
                          DCD      0x4058ffd4
                  |L11.396|
                          DCD      0xdb7281fe
                  |L11.400|
                          DCD      0x3fefc7be
                  |L11.404|
                          DCD      0x40520000
                  |L11.408|
                          DCD      0x40baed00
                  |L11.412|
                          DCD      0x40b82f33
                  |L11.416|
                          DCD      0x4133c680
                  |L11.420|
                          DCD      0xc1fe3cb1
                  |L11.424|
                          DCD      0x3fe92676
                  |L11.428|
                          DCD      0x0d03cf26
                  |L11.432|
                          DCD      0x404ca5dc
                  |L11.436|
                          DCD      0x966a768f
                  |L11.440|
                          DCD      0x401e8ec8
                  |L11.444|
                          DCD      0x41c00000
                  |L11.448|
                          DCD      ||.data||+0x8

                          AREA ||i.mjd||, CODE, READONLY, ALIGN=2

                  mjd PROC
;;;1302   
;;;1303   float mjd(int day, int month, int year, int hour)
000000  e92d4fff          PUSH     {r0-r11,lr}
;;;1304   {
000004  b083              SUB      sp,sp,#0xc
000006  4614              MOV      r4,r2
000008  460d              MOV      r5,r1
;;;1305   	//	Takes the day, month, year and hours in the day and returns the
;;;1306   	//  modified julian day number defined as mjd = jd - 2400000.5
;;;1307   	//  checked OK for Greg era dates - 26th Dec 02
;;;1308   	float a, b;
;;;1309   	if (month <= 2) {
00000a  2902              CMP      r1,#2
00000c  dc01              BGT      |L12.18|
;;;1310   		month = month + 12;
00000e  350c              ADDS     r5,r5,#0xc
;;;1311   		year = year - 1;
000010  1e54              SUBS     r4,r2,#1
                  |L12.18|
;;;1312   	}
;;;1313   	a = 10000.0 * year + 100.0 * month + day;
000012  f7fffffe          BL       __aeabi_i2d
000016  e9cd0100          STRD     r0,r1,[sp,#0]
00001a  4606              MOV      r6,r0
00001c  460f              MOV      r7,r1
00001e  4628              MOV      r0,r5
000020  f7fffffe          BL       __aeabi_i2d
000024  2200              MOVS     r2,#0
000026  4b48              LDR      r3,|L12.328|
000028  f7fffffe          BL       __aeabi_dmul
00002c  4681              MOV      r9,r0
00002e  4688              MOV      r8,r1
000030  4620              MOV      r0,r4
000032  f7fffffe          BL       __aeabi_i2d
000036  468b              MOV      r11,r1
000038  4682              MOV      r10,r0
00003a  2200              MOVS     r2,#0
00003c  4b43              LDR      r3,|L12.332|
00003e  f7fffffe          BL       __aeabi_dmul
000042  464a              MOV      r2,r9
000044  4643              MOV      r3,r8
000046  f7fffffe          BL       __aeabi_dadd
00004a  4632              MOV      r2,r6
00004c  463b              MOV      r3,r7
00004e  f7fffffe          BL       __aeabi_dadd
000052  f7fffffe          BL       __aeabi_d2f
;;;1314   	if (a <= 15821004.1)
000056  493e              LDR      r1,|L12.336|
000058  4288              CMP      r0,r1
00005a  dc14              BGT      |L12.134|
;;;1315   		b = -2 * floor((year + 4716)/4) - 1179;
00005c  f241206c          MOV      r0,#0x126c
000060  4420              ADD      r0,r0,r4
000062  17c1              ASRS     r1,r0,#31
000064  eb007091          ADD      r0,r0,r1,LSR #30
000068  1080              ASRS     r0,r0,#2
00006a  f7fffffe          BL       __aeabi_i2d
00006e  f7fffffe          BL       floor
000072  2200              MOVS     r2,#0
000074  f04f4340          MOV      r3,#0xc0000000
000078  f7fffffe          BL       __aeabi_dmul
00007c  2200              MOVS     r2,#0
00007e  4b35              LDR      r3,|L12.340|
000080  f7fffffe          BL       __aeabi_dsub
000084  e022              B        |L12.204|
                  |L12.134|
;;;1316   	else
;;;1317   		b = floor(year/400) - floor(year/100) + floor(year/4);
000086  17e0              ASRS     r0,r4,#31
000088  eb047090          ADD      r0,r4,r0,LSR #30
00008c  1080              ASRS     r0,r0,#2
00008e  f7fffffe          BL       __aeabi_i2d
000092  f7fffffe          BL       floor
000096  4680              MOV      r8,r0
000098  2064              MOVS     r0,#0x64
00009a  fb94f0f0          SDIV     r0,r4,r0
00009e  4689              MOV      r9,r1
0000a0  f7fffffe          BL       __aeabi_i2d
0000a4  f7fffffe          BL       floor
0000a8  4607              MOV      r7,r0
0000aa  f44f70c8          MOV      r0,#0x190
0000ae  fb94f0f0          SDIV     r0,r4,r0
0000b2  460e              MOV      r6,r1
0000b4  f7fffffe          BL       __aeabi_i2d
0000b8  f7fffffe          BL       floor
0000bc  463a              MOV      r2,r7
0000be  4633              MOV      r3,r6
0000c0  f7fffffe          BL       __aeabi_dsub
0000c4  4642              MOV      r2,r8
0000c6  464b              MOV      r3,r9
0000c8  f7fffffe          BL       __aeabi_dadd
                  |L12.204|
0000cc  f7fffffe          BL       __aeabi_d2f
0000d0  4604              MOV      r4,r0
0000d2  4650              MOV      r0,r10
0000d4  4659              MOV      r1,r11
;;;1318   	a = 365.0 * year - 679004.0;
0000d6  2200              MOVS     r2,#0
0000d8  4b1f              LDR      r3,|L12.344|
0000da  f7fffffe          BL       __aeabi_dmul
0000de  2200              MOVS     r2,#0
0000e0  4b1e              LDR      r3,|L12.348|
0000e2  f7fffffe          BL       __aeabi_dsub
0000e6  f7fffffe          BL       __aeabi_d2f
0000ea  4683              MOV      r11,r0
;;;1319   	return (a + b + floor(30.6001 * (month + 1)) + day + hour/24.0);
0000ec  9806              LDR      r0,[sp,#0x18]
0000ee  f7fffffe          BL       __aeabi_i2d
0000f2  2200              MOVS     r2,#0
0000f4  4b1a              LDR      r3,|L12.352|
0000f6  f7fffffe          BL       __aeabi_ddiv
0000fa  468a              MOV      r10,r1
0000fc  e9dd8100          LDRD     r8,r1,[sp,#0]
000100  4681              MOV      r9,r0
000102  460e              MOV      r6,r1
000104  1c68              ADDS     r0,r5,#1
000106  f7fffffe          BL       __aeabi_i2d
00010a  4a16              LDR      r2,|L12.356|
00010c  4b16              LDR      r3,|L12.360|
00010e  f7fffffe          BL       __aeabi_dmul
000112  f7fffffe          BL       floor
000116  4607              MOV      r7,r0
000118  460d              MOV      r5,r1
00011a  4621              MOV      r1,r4
00011c  4658              MOV      r0,r11
00011e  f7fffffe          BL       __aeabi_fadd
000122  f7fffffe          BL       __aeabi_f2d
000126  463a              MOV      r2,r7
000128  462b              MOV      r3,r5
00012a  f7fffffe          BL       __aeabi_dadd
00012e  4642              MOV      r2,r8
000130  4633              MOV      r3,r6
000132  f7fffffe          BL       __aeabi_dadd
000136  464a              MOV      r2,r9
000138  4653              MOV      r3,r10
00013a  f7fffffe          BL       __aeabi_dadd
00013e  b007              ADD      sp,sp,#0x1c
000140  e8bd4ff0          POP      {r4-r11,lr}
000144  f7ffbffe          B.W      __aeabi_d2f
;;;1320   }
;;;1321   
                          ENDP

                  |L12.328|
                          DCD      0x40590000
                  |L12.332|
                          DCD      0x40c38800
                  |L12.336|
                          DCD      0x4b7168cc
                  |L12.340|
                          DCD      0x40926c00
                  |L12.344|
                          DCD      0x4076d000
                  |L12.348|
                          DCD      0x4124b8b8
                  |L12.352|
                          DCD      0x40380000
                  |L12.356|
                          DCD      0x27525461
                  |L12.360|
                          DCD      0x403e99a0

                          AREA ||i.moon_test||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_pre_padding
                          REQUIRE _printf_sizespec
                          REQUIRE _printf_percent
                          REQUIRE _printf_flags
                          REQUIRE _printf_widthprec
                          REQUIRE _printf_p
                          REQUIRE _printf_s
                          REQUIRE _printf_n
                          REQUIRE _printf_charcount
                          REQUIRE _printf_longlong_hex
                          REQUIRE _printf_str
                          REQUIRE _printf_d
                          REQUIRE _printf_int_dec
                  moon_test PROC
;;;1331   
;;;1332   void moon_test(float dbLon,float dbLat,int year,int month,int day,float TimeZone)
000000  e92d43f0          PUSH     {r4-r9,lr}
;;;1333   {
000004  b085              SUB      sp,sp,#0x14
;;;1334       struct SUN SMTime;
;;;1335       PSunMoonTime pTime=&SMTime;
000006  ae03              ADD      r6,sp,#0xc
000008  e9dd450c          LDRD     r4,r5,[sp,#0x30]      ;1333
00000c  e88d0070          STM      sp,{r4-r6}
;;;1336       u8 hour,minute;
;;;1337       u32 tp;
;;;1338       extern __align(4) u8 dtbuf[50];   								//打印缓存器
;;;1339   
;;;1340       GetSunMoonTime(dbLon, dbLat, year, month, day, TimeZone, pTime);
000010  f7fffffe          BL       GetSunMoonTime
;;;1341       // v1000_debug("\r\n dbMoonRise  %.1f",pTime->dbMoonRise);
;;;1342       // v1000_debug("\r\n dbMoonSet  %.1f",pTime->dbMoonSet);
;;;1343       tp = pTime->dbMoonRise*1000;
000014  4f32              LDR      r7,|L13.224|
000016  9803              LDR      r0,[sp,#0xc]
000018  4639              MOV      r1,r7
00001a  f7fffffe          BL       __aeabi_fmul
00001e  f7fffffe          BL       __aeabi_f2uiz
;;;1344   	hour = (u8)(tp/1000);
000022  f44f767a          MOV      r6,#0x3e8
000026  fbb0f1f6          UDIV     r1,r0,r6
00002a  b2cc              UXTB     r4,r1
;;;1345   	minute = (u8)((tp -hour*1000)*0.06);
00002c  f06f017c          MVN      r1,#0x7c
000030  4361              MULS     r1,r4,r1
000032  eb0000c1          ADD      r0,r0,r1,LSL #3
000036  f7fffffe          BL       __aeabi_ui2d
00003a  f8df80a8          LDR      r8,|L13.228|
00003e  f8df90a8          LDR      r9,|L13.232|
000042  4642              MOV      r2,r8
000044  464b              MOV      r3,r9
000046  f7fffffe          BL       __aeabi_dmul
00004a  f7fffffe          BL       __aeabi_d2uiz
;;;1346       if(gpsx->fixmode!=3)
00004e  4d27              LDR      r5,|L13.236|
000050  b2c3              UXTB     r3,r0                 ;1345
000052  6828              LDR      r0,[r5,#0]  ; gpsx
000054  f8900073          LDRB     r0,[r0,#0x73]
000058  2803              CMP      r0,#3
00005a  d004              BEQ      |L13.102|
;;;1347           v1000_debug((char *)dtbuf,"--:--");	//显示UTC日期
00005c  a124              ADR      r1,|L13.240|
00005e  4826              LDR      r0,|L13.248|
000060  f7fffffe          BL       __2printf
000064  e004              B        |L13.112|
                  |L13.102|
;;;1348       else
;;;1349           sprintf((char *)dtbuf,"%02d:%02d",hour,minute);	//显示UTC日期
000066  4622              MOV      r2,r4
000068  a124              ADR      r1,|L13.252|
00006a  4823              LDR      r0,|L13.248|
00006c  f7fffffe          BL       __2sprintf
                  |L13.112|
;;;1350   	OLED_ShowString(22,32,dtbuf);
000070  4a21              LDR      r2,|L13.248|
000072  2120              MOVS     r1,#0x20
000074  2016              MOVS     r0,#0x16
000076  f7fffffe          BL       OLED_ShowString
;;;1351   
;;;1352       tp = pTime->dbMoonSet*1000;
00007a  4639              MOV      r1,r7
00007c  9804              LDR      r0,[sp,#0x10]
00007e  f7fffffe          BL       __aeabi_fmul
000082  f7fffffe          BL       __aeabi_f2uiz
;;;1353   	hour = (u8)(tp/1000);
000086  fbb0f1f6          UDIV     r1,r0,r6
00008a  b2cc              UXTB     r4,r1
;;;1354   	minute = (u8)((tp -hour*1000)*0.06);
00008c  f06f017c          MVN      r1,#0x7c
000090  4361              MULS     r1,r4,r1
000092  eb0000c1          ADD      r0,r0,r1,LSL #3
000096  f7fffffe          BL       __aeabi_ui2d
00009a  4642              MOV      r2,r8
00009c  464b              MOV      r3,r9
00009e  f7fffffe          BL       __aeabi_dmul
0000a2  f7fffffe          BL       __aeabi_d2uiz
0000a6  b2c3              UXTB     r3,r0
;;;1355       if((gpsx->fixmode!=3)||(pTime->dbMoonSet<0.0))
0000a8  6828              LDR      r0,[r5,#0]  ; gpsx
0000aa  f8900073          LDRB     r0,[r0,#0x73]
0000ae  2803              CMP      r0,#3
0000b0  d103              BNE      |L13.186|
0000b2  9804              LDR      r0,[sp,#0x10]
0000b4  f1104fff          CMN      r0,#0x7f800000
0000b8  d304              BCC      |L13.196|
                  |L13.186|
;;;1356          sprintf((char *)dtbuf,"--:--");	//显示UTC日期
0000ba  a10d              ADR      r1,|L13.240|
0000bc  480e              LDR      r0,|L13.248|
0000be  f7fffffe          BL       __2sprintf
0000c2  e004              B        |L13.206|
                  |L13.196|
;;;1357       else
;;;1358          sprintf((char *)dtbuf,"%02d:%02d",hour,minute);	//显示UTC日期
0000c4  4622              MOV      r2,r4
0000c6  a10d              ADR      r1,|L13.252|
0000c8  480b              LDR      r0,|L13.248|
0000ca  f7fffffe          BL       __2sprintf
                  |L13.206|
;;;1359   	OLED_ShowString(84,32,dtbuf);
0000ce  4a0a              LDR      r2,|L13.248|
0000d0  2120              MOVS     r1,#0x20
0000d2  2054              MOVS     r0,#0x54
0000d4  f7fffffe          BL       OLED_ShowString
;;;1360   }
0000d8  b005              ADD      sp,sp,#0x14
0000da  e8bd83f0          POP      {r4-r9,pc}
;;;1361   
                          ENDP

0000de  0000              DCW      0x0000
                  |L13.224|
                          DCD      0x447a0000
                  |L13.228|
                          DCD      0xeb851eb8
                  |L13.232|
                          DCD      0x3faeb851
                  |L13.236|
                          DCD      gpsx
                  |L13.240|
0000f0  2d2d3a2d          DCB      "--:--",0
0000f4  2d00    
0000f6  00                DCB      0
0000f7  00                DCB      0
                  |L13.248|
                          DCD      dtbuf
                  |L13.252|
0000fc  25303264          DCB      "%02d:%02d",0
000100  3a253032
000104  6400    
000106  00                DCB      0
000107  00                DCB      0

                          AREA ||i.quad||, CODE, READONLY, ALIGN=2

                  quad PROC
;;;1047   
;;;1048   float * quad(float ym, float yz, float yp)
000000  e92d4ff7          PUSH     {r0-r2,r4-r11,lr}
;;;1049   {
000004  b082              SUB      sp,sp,#8
;;;1050   	//  finds the parabola throuh the three points (-1,ym), (0,yz), (1, yp)
;;;1051   	//  and returns the coordinates of the max/min (if any) xe, ye
;;;1052   	//  the values of x where the parabola crosses zero (roots of the quadratic)
;;;1053   	//  and the number of roots (0, 1 or 2) within the interval [-1, 1]
;;;1054   	//  well, this routine is producing sensible answers
;;;1055   	//  results passed as array [nz, z1, z2, xe, ye]
;;;1056   	float a, b, c, dis, dx, xe, ye, z1 = 0.0, z2 = 0.0, nz;
000006  2500              MOVS     r5,#0
000008  462e              MOV      r6,r5
;;;1057   	static float quadout[5];
;;;1058   
;;;1059   	nz = 0;
00000a  462c              MOV      r4,r5
;;;1060   	a = 0.5 * (ym + yp) - yz;
00000c  9803              LDR      r0,[sp,#0xc]
00000e  f7fffffe          BL       __aeabi_f2d
000012  4681              MOV      r9,r0
000014  4688              MOV      r8,r1
000016  9101              STR      r1,[sp,#4]
000018  464f              MOV      r7,r9
00001a  9904              LDR      r1,[sp,#0x10]
00001c  9802              LDR      r0,[sp,#8]
00001e  f7fffffe          BL       __aeabi_fadd
000022  f7fffffe          BL       __aeabi_f2d
000026  f04f3aff          MOV      r10,#0xffffffff
00002a  4652              MOV      r2,r10
00002c  f7fffffe          BL       __ARM_scalbn
000030  463a              MOV      r2,r7
000032  4643              MOV      r3,r8
000034  f7fffffe          BL       __aeabi_dsub
000038  f7fffffe          BL       __aeabi_d2f
00003c  4683              MOV      r11,r0
;;;1061   	b = 0.5 * (yp - ym);
00003e  9904              LDR      r1,[sp,#0x10]
000040  9802              LDR      r0,[sp,#8]
000042  f7fffffe          BL       __aeabi_frsub
000046  4651              MOV      r1,r10
000048  f7fffffe          BL       __ARM_scalbnf
00004c  4607              MOV      r7,r0
;;;1062   	c = yz;
;;;1063   	xe = -b / (2 * a);
00004e  2101              MOVS     r1,#1
000050  4658              MOV      r0,r11
000052  f8dd800c          LDR      r8,[sp,#0xc]
000056  f7fffffe          BL       __ARM_scalbnf
00005a  4601              MOV      r1,r0
00005c  f0874000          EOR      r0,r7,#0x80000000
000060  f7fffffe          BL       __aeabi_fdiv
000064  4682              MOV      r10,r0
;;;1064   	ye = (a * xe + b) * xe + c;
000066  4601              MOV      r1,r0
000068  4658              MOV      r0,r11
00006a  f7fffffe          BL       __aeabi_fmul
00006e  4639              MOV      r1,r7
000070  f7fffffe          BL       __aeabi_fadd
000074  4651              MOV      r1,r10
000076  f7fffffe          BL       __aeabi_fmul
00007a  4641              MOV      r1,r8
00007c  f7fffffe          BL       __aeabi_fadd
;;;1065   	dis = b * b - 4.0 * a * c;
000080  9901              LDR      r1,[sp,#4]
000082  9000              STR      r0,[sp,#0]            ;1064
000084  46c8              MOV      r8,r9
000086  4689              MOV      r9,r1
000088  4658              MOV      r0,r11
00008a  f7fffffe          BL       __aeabi_f2d
00008e  2202              MOVS     r2,#2
000090  f7fffffe          BL       __ARM_scalbn
000094  4642              MOV      r2,r8
000096  464b              MOV      r3,r9
000098  f7fffffe          BL       __aeabi_dmul
00009c  4688              MOV      r8,r1
00009e  4681              MOV      r9,r0
0000a0  4639              MOV      r1,r7
0000a2  4608              MOV      r0,r1
0000a4  f7fffffe          BL       __aeabi_fmul
0000a8  f7fffffe          BL       __aeabi_f2d
0000ac  464a              MOV      r2,r9
0000ae  4643              MOV      r3,r8
0000b0  f7fffffe          BL       __aeabi_dsub
0000b4  f7fffffe          BL       __aeabi_d2f
0000b8  4607              MOV      r7,r0
;;;1066   	if (dis > 0)
0000ba  f5b00f00          CMP      r0,#0x800000
0000be  db33              BLT      |L14.296|
;;;1067   	{
;;;1068   		dx = 0.5 * sqrt(dis) / fabs(a);
0000c0  f02b4000          BIC      r0,r11,#0x80000000
0000c4  f7fffffe          BL       __aeabi_f2d
0000c8  4606              MOV      r6,r0
0000ca  460d              MOV      r5,r1
0000cc  4638              MOV      r0,r7
0000ce  f7fffffe          BL       __aeabi_f2d
0000d2  f7fffffe          BL       sqrt
0000d6  f04f32ff          MOV      r2,#0xffffffff
0000da  f7fffffe          BL       __ARM_scalbn
0000de  4632              MOV      r2,r6
0000e0  462b              MOV      r3,r5
0000e2  f7fffffe          BL       __aeabi_ddiv
0000e6  f7fffffe          BL       __aeabi_d2f
0000ea  4606              MOV      r6,r0
;;;1069   		z1 = xe - dx;
0000ec  4601              MOV      r1,r0
0000ee  4650              MOV      r0,r10
0000f0  f7fffffe          BL       __aeabi_fsub
0000f4  4605              MOV      r5,r0
;;;1070   		z2 = xe + dx;
0000f6  4631              MOV      r1,r6
0000f8  4650              MOV      r0,r10
0000fa  f7fffffe          BL       __aeabi_fadd
0000fe  4606              MOV      r6,r0
;;;1071   		if (fabs(z1) <= 1.0) nz += 1;
000100  f0254100          BIC      r1,r5,#0x80000000
000104  f04f507e          MOV      r0,#0x3f800000
000108  4281              CMP      r1,r0
00010a  dc00              BGT      |L14.270|
00010c  4604              MOV      r4,r0
                  |L14.270|
;;;1072   		if (fabs(z2) <= 1.0) nz += 1;
00010e  f0264100          BIC      r1,r6,#0x80000000
000112  4281              CMP      r1,r0
000114  dc04              BGT      |L14.288|
000116  4601              MOV      r1,r0
000118  4620              MOV      r0,r4
00011a  f7fffffe          BL       __aeabi_fadd
00011e  4604              MOV      r4,r0
                  |L14.288|
;;;1073   		if (z1 < -1.0) z1 = z2;
000120  f1154f81          CMN      r5,#0x40800000
000124  d900              BLS      |L14.296|
000126  4635              MOV      r5,r6
                  |L14.296|
;;;1074   	}
;;;1075   	quadout[0] = nz;
000128  4803              LDR      r0,|L14.312|
00012a  e8800470          STM      r0,{r4-r6,r10}
;;;1076   	quadout[1] = z1;
;;;1077   	quadout[2] = z2;
;;;1078   	quadout[3] = xe;
;;;1079   	quadout[4] = ye;
00012e  9900              LDR      r1,[sp,#0]
;;;1080   	return quadout;
000130  6101              STR      r1,[r0,#0x10]  ; quadout
;;;1081   }
000132  b005              ADD      sp,sp,#0x14
000134  e8bd8ff0          POP      {r4-r11,pc}
;;;1082   
                          ENDP

                  |L14.312|
                          DCD      ||.bss||

                          AREA ||i.rad||, CODE, READONLY, ALIGN=2

                  ||rad|| PROC
;;;14     
;;;15     float rad(float d)
000000  b510              PUSH     {r4,lr}
;;;16     
;;;17     {
;;;18     
;;;19        return d * PI / 180.0;
000002  f7fffffe          BL       __aeabi_f2d
000006  4a06              LDR      r2,|L15.32|
000008  4b06              LDR      r3,|L15.36|
00000a  f7fffffe          BL       __aeabi_dmul
00000e  2200              MOVS     r2,#0
000010  4b05              LDR      r3,|L15.40|
000012  f7fffffe          BL       __aeabi_ddiv
000016  e8bd4010          POP      {r4,lr}
00001a  f7ffbffe          B.W      __aeabi_d2f
;;;20     
;;;21     }
;;;22     
                          ENDP

00001e  0000              DCW      0x0000
                  |L15.32|
                          DCD      0xf01b866e
                  |L15.36|
                          DCD      0x400921f9
                  |L15.40|
                          DCD      0x40668000

                          AREA ||i.range||, CODE, READONLY, ALIGN=2

                  range PROC
;;;975    
;;;976    float range(float x)
000000  b570              PUSH     {r4-r6,lr}
;;;977    {	//returns an angle in degrees in the range 0 to 360
;;;978    	float a, b;
;;;979    	b = x / 360;
000002  4d0b              LDR      r5,|L16.48|
000004  4629              MOV      r1,r5
000006  f7fffffe          BL       __aeabi_fdiv
00000a  4604              MOV      r4,r0
;;;980    	a = 360 * (b - ipart(b));
00000c  f7fffffe          BL       ipart
000010  4621              MOV      r1,r4
000012  f7fffffe          BL       __aeabi_frsub
000016  4629              MOV      r1,r5
000018  f7fffffe          BL       __aeabi_fmul
;;;981    	if (a  < 0 )	a = a + 360;
00001c  f1104fff          CMN      r0,#0x7f800000
000020  d304              BCC      |L16.44|
000022  4629              MOV      r1,r5
000024  e8bd4070          POP      {r4-r6,lr}
000028  f7ffbffe          B.W      __aeabi_fadd
                  |L16.44|
;;;982    	return a;
;;;983    }
00002c  bd70              POP      {r4-r6,pc}
;;;984    
                          ENDP

00002e  0000              DCW      0x0000
                  |L16.48|
                          DCD      0x43b40000

                          AREA ||i.rev180||, CODE, READONLY, ALIGN=2

                  rev180 PROC
;;;724    
;;;725    static float rev180( float x )
000000  b570              PUSH     {r4-r6,lr}
;;;726    /*********************************************/
;;;727    /* Reduce angle to within +180..+180 degrees */
;;;728    /*********************************************/
;;;729    /*********************************************/
;;;730    /* 把角度换算到-180到180度之间				 */
;;;731    /*********************************************/
;;;732    {
;;;733          return( x - 360.0 * floor( x * INV360 + 0.5 ) );
000002  f7fffffe          BL       __aeabi_f2d
000006  460d              MOV      r5,r1
000008  4604              MOV      r4,r0
00000a  4a0b              LDR      r2,|L17.56|
00000c  4b0b              LDR      r3,|L17.60|
00000e  f7fffffe          BL       __aeabi_dmul
000012  2200              MOVS     r2,#0
000014  4b0a              LDR      r3,|L17.64|
000016  f7fffffe          BL       __aeabi_dadd
00001a  f7fffffe          BL       floor
00001e  2200              MOVS     r2,#0
000020  4b08              LDR      r3,|L17.68|
000022  f7fffffe          BL       __aeabi_dmul
000026  4622              MOV      r2,r4
000028  462b              MOV      r3,r5
00002a  f7fffffe          BL       __aeabi_drsub
00002e  e8bd4070          POP      {r4-r6,lr}
000032  f7ffbffe          B.W      __aeabi_d2f
;;;734    }  /* revolution */
;;;735    
                          ENDP

000036  0000              DCW      0x0000
                  |L17.56|
                          DCD      0x16c16c17
                  |L17.60|
                          DCD      0x3f66c16c
                  |L17.64|
                          DCD      0x3fe00000
                  |L17.68|
                          DCD      0x40768000

                          AREA ||i.revolution||, CODE, READONLY, ALIGN=2

                  revolution PROC
;;;713    
;;;714    static float revolution( float x )
000000  b570              PUSH     {r4-r6,lr}
;;;715    /*****************************************/
;;;716    /* Reduce angle to within 0..360 degrees */
;;;717    /*****************************************/
;;;718    /*****************************************/
;;;719    /* 把角度换算到0-360度之间				 */
;;;720    /*****************************************/
;;;721    {
;;;722          return( x - 360.0 * floor( x * INV360 ) );
000002  f7fffffe          BL       __aeabi_f2d
000006  460d              MOV      r5,r1
000008  4604              MOV      r4,r0
00000a  4a0a              LDR      r2,|L18.52|
00000c  4b0a              LDR      r3,|L18.56|
00000e  f7fffffe          BL       __aeabi_dmul
000012  f7fffffe          BL       floor
000016  2200              MOVS     r2,#0
000018  4b08              LDR      r3,|L18.60|
00001a  f7fffffe          BL       __aeabi_dmul
00001e  460b              MOV      r3,r1
000020  4602              MOV      r2,r0
000022  4620              MOV      r0,r4
000024  4629              MOV      r1,r5
000026  f7fffffe          BL       __aeabi_dsub
00002a  e8bd4070          POP      {r4-r6,lr}
00002e  f7ffbffe          B.W      __aeabi_d2f
;;;723    }  /* revolution */
;;;724    
                          ENDP

000032  0000              DCW      0x0000
                  |L18.52|
                          DCD      0x16c16c17
                  |L18.56|
                          DCD      0x3f66c16c
                  |L18.60|
                          DCD      0x40768000

                          AREA ||i.sin_alt||, CODE, READONLY, ALIGN=2

                  sin_alt PROC
;;;1027   
;;;1028   float sin_alt(int iobj, float mjd0, float hour, float glong, float cglat, float sglat)
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;1029   {
000004  4605              MOV      r5,r0
000006  e9ddab0a          LDRD     r10,r11,[sp,#0x28]
00000a  4699              MOV      r9,r3
00000c  4688              MOV      r8,r1
;;;1030   	//  this rather mickey mouse function takes a lot of
;;;1031   	//  arguments and then returns the sine of the altitude of
;;;1032   	//  the object labelled by iobj. iobj = 1 is moon, iobj = 2 is sun
;;;1033   	float mjd, t, ra, dec, tau, salt, rads = 0.0174532925;
00000e  4e36              LDR      r6,|L19.232|
;;;1034   	float *objpos;
;;;1035   	mjd = mjd0 + hour/24.0;
000010  4610              MOV      r0,r2
000012  f7fffffe          BL       __aeabi_f2d
000016  2200              MOVS     r2,#0
000018  4b34              LDR      r3,|L19.236|
00001a  f7fffffe          BL       __aeabi_ddiv
00001e  4607              MOV      r7,r0
000020  460c              MOV      r4,r1
000022  4640              MOV      r0,r8
000024  f7fffffe          BL       __aeabi_f2d
000028  463a              MOV      r2,r7
00002a  4623              MOV      r3,r4
00002c  f7fffffe          BL       __aeabi_dadd
000030  f7fffffe          BL       __aeabi_d2f
000034  4607              MOV      r7,r0
;;;1036   	t = (mjd - 51544.5) / 36525.0;
000036  f7fffffe          BL       __aeabi_f2d
00003a  2200              MOVS     r2,#0
00003c  4b2c              LDR      r3,|L19.240|
00003e  f7fffffe          BL       __aeabi_dsub
000042  2200              MOVS     r2,#0
000044  4b2b              LDR      r3,|L19.244|
000046  f7fffffe          BL       __aeabi_ddiv
00004a  f7fffffe          BL       __aeabi_d2f
;;;1037   	if (iobj == 1)	objpos = minimoon(t);
00004e  2d01              CMP      r5,#1
000050  d046              BEQ      |L19.224|
;;;1038   	else 	objpos = minisun(t);
000052  f7fffffe          BL       minisun
000056  bf00              NOP      
                  |L19.88|
000058  e9d05400          LDRD     r5,r4,[r0,#0]
;;;1039   	ra = objpos[0];
;;;1040   	dec = objpos[1];
;;;1041   	// hour angle of object
;;;1042   	tau = 15.0 * (lmst(mjd, glong) - ra);
00005c  4649              MOV      r1,r9
00005e  4638              MOV      r0,r7
000060  f7fffffe          BL       lmst
000064  4629              MOV      r1,r5
000066  f7fffffe          BL       __aeabi_fsub
00006a  4923              LDR      r1,|L19.248|
00006c  f7fffffe          BL       __aeabi_fmul
000070  4601              MOV      r1,r0
;;;1043   	// sin(alt) of object using the conversion formulas
;;;1044   	salt = sglat * sin(rads*dec) + cglat * cos(rads*dec) * cos(rads*tau);
000072  4630              MOV      r0,r6
000074  f7fffffe          BL       __aeabi_fmul
000078  f7fffffe          BL       __aeabi_f2d
00007c  f7fffffe          BL       ||cos||
000080  4605              MOV      r5,r0
000082  4688              MOV      r8,r1
000084  4621              MOV      r1,r4
000086  4630              MOV      r0,r6
000088  f7fffffe          BL       __aeabi_fmul
00008c  f7fffffe          BL       __aeabi_f2d
000090  4689              MOV      r9,r1
000092  4604              MOV      r4,r0
000094  f7fffffe          BL       ||cos||
000098  4606              MOV      r6,r0
00009a  460f              MOV      r7,r1
00009c  4650              MOV      r0,r10
00009e  f7fffffe          BL       __aeabi_f2d
0000a2  463b              MOV      r3,r7
0000a4  4632              MOV      r2,r6
0000a6  f7fffffe          BL       __aeabi_dmul
0000aa  462a              MOV      r2,r5
0000ac  4643              MOV      r3,r8
0000ae  f7fffffe          BL       __aeabi_dmul
0000b2  4605              MOV      r5,r0
0000b4  460e              MOV      r6,r1
0000b6  4620              MOV      r0,r4
0000b8  4649              MOV      r1,r9
0000ba  f7fffffe          BL       ||sin||
0000be  4607              MOV      r7,r0
0000c0  460c              MOV      r4,r1
0000c2  4658              MOV      r0,r11
0000c4  f7fffffe          BL       __aeabi_f2d
0000c8  463a              MOV      r2,r7
0000ca  4623              MOV      r3,r4
0000cc  f7fffffe          BL       __aeabi_dmul
0000d0  462a              MOV      r2,r5
0000d2  4633              MOV      r3,r6
0000d4  f7fffffe          BL       __aeabi_dadd
0000d8  e8bd5ff0          POP      {r4-r12,lr}
0000dc  f7ffbffe          B.W      __aeabi_d2f
                  |L19.224|
0000e0  f7fffffe          BL       minimoon
0000e4  e7b8              B        |L19.88|
;;;1045   	return salt;
;;;1046   }
;;;1047   
                          ENDP

0000e6  0000              DCW      0x0000
                  |L19.232|
                          DCD      0x3c8efa35
                  |L19.236|
                          DCD      0x40380000
                  |L19.240|
                          DCD      0x40e92b10
                  |L19.244|
                          DCD      0x40e1d5a0
                  |L19.248|
                          DCD      0x41700000

                          AREA ||i.sun_RA_dec||, CODE, READONLY, ALIGN=2

                  sun_RA_dec PROC
;;;679    
;;;680    static void sun_RA_dec( float d, float *RA, float *dec, float *r )
000000  e92d4fff          PUSH     {r0-r11,lr}
;;;681    {
000004  b081              SUB      sp,sp,#4
000006  468b              MOV      r11,r1
000008  461d              MOV      r5,r3
00000a  4682              MOV      r10,r0
;;;682          float lon, obl_ecl, x, y, z;
;;;683    
;;;684          /* Compute Sun's ecliptical coordinates */
;;;685    	  //计算太阳的黄道坐标
;;;686          sunpos( d, &lon, r );
00000c  461a              MOV      r2,r3
00000e  4669              MOV      r1,sp
000010  f7fffffe          BL       sunpos
;;;687    
;;;688          /* Compute ecliptic rectangular coordinates (z=0) */
;;;689          x = *r * cosd(lon);
000014  9800              LDR      r0,[sp,#0]
000016  f7fffffe          BL       __aeabi_f2d
00001a  f8df812c          LDR      r8,|L20.328|
00001e  f8df912c          LDR      r9,|L20.332|
000022  4642              MOV      r2,r8
000024  464b              MOV      r3,r9
000026  f7fffffe          BL       __aeabi_dmul
00002a  f7fffffe          BL       ||cos||
00002e  4606              MOV      r6,r0
000030  460c              MOV      r4,r1
000032  6828              LDR      r0,[r5,#0]
000034  f7fffffe          BL       __aeabi_f2d
000038  4632              MOV      r2,r6
00003a  4623              MOV      r3,r4
00003c  f7fffffe          BL       __aeabi_dmul
000040  f7fffffe          BL       __aeabi_d2f
000044  4607              MOV      r7,r0
;;;690          y = *r * sind(lon);
000046  9800              LDR      r0,[sp,#0]
000048  f7fffffe          BL       __aeabi_f2d
00004c  4642              MOV      r2,r8
00004e  464b              MOV      r3,r9
000050  f7fffffe          BL       __aeabi_dmul
000054  f7fffffe          BL       ||sin||
000058  4606              MOV      r6,r0
00005a  460c              MOV      r4,r1
00005c  6828              LDR      r0,[r5,#0]
00005e  f7fffffe          BL       __aeabi_f2d
000062  4632              MOV      r2,r6
000064  4623              MOV      r3,r4
000066  f7fffffe          BL       __aeabi_dmul
00006a  f7fffffe          BL       __aeabi_d2f
00006e  4604              MOV      r4,r0
;;;691    
;;;692          /* Compute obliquity of ecliptic (inclination of Earth's axis) */
;;;693          obl_ecl = 23.4393 - 3.563E-7 * d;
000070  4650              MOV      r0,r10
000072  f7fffffe          BL       __aeabi_f2d
000076  4a36              LDR      r2,|L20.336|
000078  4b36              LDR      r3,|L20.340|
00007a  f7fffffe          BL       __aeabi_dmul
00007e  4a36              LDR      r2,|L20.344|
000080  4b36              LDR      r3,|L20.348|
000082  f7fffffe          BL       __aeabi_drsub
000086  f7fffffe          BL       __aeabi_d2f
;;;694    
;;;695          /* Convert to equatorial rectangular coordinates - x is unchanged */
;;;696          z = y * sind(obl_ecl);
00008a  f7fffffe          BL       __aeabi_f2d
00008e  4642              MOV      r2,r8
000090  464b              MOV      r3,r9
000092  f7fffffe          BL       __aeabi_dmul
000096  468a              MOV      r10,r1
000098  4605              MOV      r5,r0
00009a  f7fffffe          BL       ||sin||
00009e  4606              MOV      r6,r0
0000a0  4688              MOV      r8,r1
0000a2  4620              MOV      r0,r4
0000a4  f7fffffe          BL       __aeabi_f2d
0000a8  4689              MOV      r9,r1
0000aa  4604              MOV      r4,r0
0000ac  4632              MOV      r2,r6
0000ae  4643              MOV      r3,r8
0000b0  f7fffffe          BL       __aeabi_dmul
0000b4  f7fffffe          BL       __aeabi_d2f
0000b8  4680              MOV      r8,r0
0000ba  4628              MOV      r0,r5
0000bc  4651              MOV      r1,r10
;;;697          y = y * cosd(obl_ecl);
0000be  f7fffffe          BL       ||cos||
0000c2  4622              MOV      r2,r4
0000c4  464b              MOV      r3,r9
0000c6  f7fffffe          BL       __aeabi_dmul
0000ca  f7fffffe          BL       __aeabi_d2f
0000ce  4605              MOV      r5,r0
;;;698    
;;;699          /* Convert to spherical coordinates */
;;;700          *RA = atan2d( y, x );
0000d0  4638              MOV      r0,r7
0000d2  f7fffffe          BL       __aeabi_f2d
0000d6  4606              MOV      r6,r0
0000d8  460c              MOV      r4,r1
0000da  4628              MOV      r0,r5
0000dc  f7fffffe          BL       __aeabi_f2d
0000e0  4632              MOV      r2,r6
0000e2  4623              MOV      r3,r4
0000e4  f7fffffe          BL       atan2
0000e8  4e1d              LDR      r6,|L20.352|
0000ea  f8df9078          LDR      r9,|L20.356|
0000ee  4632              MOV      r2,r6
0000f0  464b              MOV      r3,r9
0000f2  f7fffffe          BL       __aeabi_dmul
0000f6  f7fffffe          BL       __aeabi_d2f
;;;701          *dec = atan2d( z, sqrt(x*x + y*y) );
0000fa  4629              MOV      r1,r5
0000fc  f8cb0000          STR      r0,[r11,#0]
000100  4608              MOV      r0,r1
000102  f7fffffe          BL       __aeabi_fmul
000106  4604              MOV      r4,r0
000108  4639              MOV      r1,r7
00010a  4608              MOV      r0,r1
00010c  f7fffffe          BL       __aeabi_fmul
000110  4621              MOV      r1,r4
000112  f7fffffe          BL       __aeabi_fadd
000116  f7fffffe          BL       __aeabi_f2d
00011a  f7fffffe          BL       sqrt
00011e  4605              MOV      r5,r0
000120  460c              MOV      r4,r1
000122  4640              MOV      r0,r8
000124  f7fffffe          BL       __aeabi_f2d
000128  462a              MOV      r2,r5
00012a  4623              MOV      r3,r4
00012c  f7fffffe          BL       atan2
000130  4632              MOV      r2,r6
000132  464b              MOV      r3,r9
000134  f7fffffe          BL       __aeabi_dmul
000138  f7fffffe          BL       __aeabi_d2f
00013c  9903              LDR      r1,[sp,#0xc]
00013e  6008              STR      r0,[r1,#0]
;;;702    
;;;703    }  /* sun_RA_dec */
000140  b005              ADD      sp,sp,#0x14
000142  e8bd8ff0          POP      {r4-r11,pc}
;;;704    
                          ENDP

000146  0000              DCW      0x0000
                  |L20.328|
                          DCD      0xa50de270
                  |L20.332|
                          DCD      0x3f91df45
                  |L20.336|
                          DCD      0xf8cedada
                  |L20.340|
                          DCD      0x3e97e92f
                  |L20.344|
                          DCD      0xf6fd21ff
                  |L20.348|
                          DCD      0x40377075
                  |L20.352|
                          DCD      0xb05cc3e8
                  |L20.356|
                          DCD      0x404ca5dd

                          AREA ||i.sunpos||, CODE, READONLY, ALIGN=2

                  sunpos PROC
;;;640    
;;;641    static void sunpos( float d, float *lon, float *r )
000000  e92d4ff7          PUSH     {r0-r2,r4-r11,lr}
;;;642    /******************************************************/
;;;643    /* Computes the Sun's ecliptic longitude and distance */
;;;644    /* at an instant given in d, number of days since     */
;;;645    /* 2000 Jan 0.0.  The Sun's ecliptic latitude is not  */
;;;646    /* computed, since it's always very near 0.           */
;;;647    /******************************************************/
;;;648    /******************************************************/
;;;649    /* 计算太阳的黄道经度和距离							  */
;;;650    /* 在d制定的瞬间，太阳的黄道纬度不计算				  */
;;;651    /* 因为它无限接近于0								  */
;;;652    /******************************************************/
;;;653    {
000004  b084              SUB      sp,sp,#0x10
000006  468b              MOV      r11,r1
;;;654          float M,			//太阳的近点距离
;;;655                 w,         //黄道经度
;;;656                            //注：太阳的平黄径 = M + w
;;;657                 e,         //地球轨道的偏移量
;;;658                 E,         //偏近点角
;;;659                 x, y,      //轨道的坐标
;;;660                 v;         //真正的近点距离
;;;661    
;;;662          /* Compute mean elements */
;;;663    	  //计算
;;;664          M = revolution( 356.0470 + 0.9856002585 * d );
000008  f7fffffe          BL       __aeabi_f2d
00000c  460d              MOV      r5,r1
00000e  4604              MOV      r4,r0
000010  4a60              LDR      r2,|L21.404|
000012  4b61              LDR      r3,|L21.408|
000014  f7fffffe          BL       __aeabi_dmul
000018  4a60              LDR      r2,|L21.412|
00001a  4b61              LDR      r3,|L21.416|
00001c  f7fffffe          BL       __aeabi_dadd
000020  f7fffffe          BL       __aeabi_d2f
000024  f7fffffe          BL       revolution
000028  4606              MOV      r6,r0
00002a  4620              MOV      r0,r4
00002c  4629              MOV      r1,r5
;;;665          w = 282.9404 + 4.70935E-5 * d;
00002e  4a5d              LDR      r2,|L21.420|
000030  4b5d              LDR      r3,|L21.424|
000032  f7fffffe          BL       __aeabi_dmul
000036  4a5d              LDR      r2,|L21.428|
000038  4b5d              LDR      r3,|L21.432|
00003a  f7fffffe          BL       __aeabi_dadd
00003e  f7fffffe          BL       __aeabi_d2f
000042  4680              MOV      r8,r0
000044  4620              MOV      r0,r4
000046  4629              MOV      r1,r5
;;;666          e = 0.016709 - 1.151E-9 * d;
000048  4a5a              LDR      r2,|L21.436|
00004a  4b5b              LDR      r3,|L21.440|
00004c  f7fffffe          BL       __aeabi_dmul
000050  4a5a              LDR      r2,|L21.444|
000052  4b5b              LDR      r3,|L21.448|
000054  f7fffffe          BL       __aeabi_drsub
000058  f7fffffe          BL       __aeabi_d2f
00005c  4607              MOV      r7,r0
;;;667    
;;;668          /* Compute true longitude and radius vector */
;;;669    
;;;670          E = M + e * RADEG * sind(M) * ( 1.0 + e * cosd(M) );
00005e  4630              MOV      r0,r6
000060  f7fffffe          BL       __aeabi_f2d
000064  4606              MOV      r6,r0
000066  4a57              LDR      r2,|L21.452|
000068  4b57              LDR      r3,|L21.456|
00006a  9103              STR      r1,[sp,#0xc]
00006c  f7fffffe          BL       __aeabi_dmul
000070  4605              MOV      r5,r0
000072  9102              STR      r1,[sp,#8]
000074  f7fffffe          BL       ||cos||
000078  4682              MOV      r10,r0
00007a  4689              MOV      r9,r1
00007c  4638              MOV      r0,r7
00007e  f7fffffe          BL       __aeabi_f2d
000082  4604              MOV      r4,r0
000084  4652              MOV      r2,r10
000086  464b              MOV      r3,r9
000088  9100              STR      r1,[sp,#0]
00008a  f7fffffe          BL       __aeabi_dmul
00008e  2200              MOVS     r2,#0
000090  4b4e              LDR      r3,|L21.460|
000092  f7fffffe          BL       __aeabi_dadd
000096  4682              MOV      r10,r0
000098  9101              STR      r1,[sp,#4]
00009a  4628              MOV      r0,r5
00009c  9902              LDR      r1,[sp,#8]
00009e  f7fffffe          BL       ||sin||
0000a2  4605              MOV      r5,r0
0000a4  4689              MOV      r9,r1
0000a6  4620              MOV      r0,r4
0000a8  4a49              LDR      r2,|L21.464|
0000aa  4b4a              LDR      r3,|L21.468|
0000ac  9900              LDR      r1,[sp,#0]
0000ae  f7fffffe          BL       __aeabi_dmul
0000b2  462a              MOV      r2,r5
0000b4  464b              MOV      r3,r9
0000b6  f7fffffe          BL       __aeabi_dmul
0000ba  4652              MOV      r2,r10
0000bc  9b01              LDR      r3,[sp,#4]
0000be  f7fffffe          BL       __aeabi_dmul
0000c2  4602              MOV      r2,r0
0000c4  460b              MOV      r3,r1
0000c6  4630              MOV      r0,r6
0000c8  9903              LDR      r1,[sp,#0xc]
0000ca  f7fffffe          BL       __aeabi_dadd
0000ce  f7fffffe          BL       __aeabi_d2f
;;;671                x = cosd(E) - e;
0000d2  4625              MOV      r5,r4
0000d4  9e00              LDR      r6,[sp,#0]
0000d6  f7fffffe          BL       __aeabi_f2d
0000da  4a3a              LDR      r2,|L21.452|
0000dc  4b3a              LDR      r3,|L21.456|
0000de  f7fffffe          BL       __aeabi_dmul
0000e2  468a              MOV      r10,r1
0000e4  4604              MOV      r4,r0
0000e6  f7fffffe          BL       ||cos||
0000ea  462a              MOV      r2,r5
0000ec  4633              MOV      r3,r6
0000ee  f7fffffe          BL       __aeabi_dsub
0000f2  f7fffffe          BL       __aeabi_d2f
0000f6  4681              MOV      r9,r0
0000f8  4620              MOV      r0,r4
0000fa  4651              MOV      r1,r10
;;;672          y = sqrt( 1.0 - e*e ) * sind(E);
0000fc  f7fffffe          BL       ||sin||
000100  460c              MOV      r4,r1
000102  4605              MOV      r5,r0
000104  4639              MOV      r1,r7
000106  4608              MOV      r0,r1
000108  f7fffffe          BL       __aeabi_fmul
00010c  f7fffffe          BL       __aeabi_f2d
000110  2200              MOVS     r2,#0
000112  4b2e              LDR      r3,|L21.460|
000114  f7fffffe          BL       __aeabi_drsub
000118  f7fffffe          BL       sqrt
00011c  462a              MOV      r2,r5
00011e  4623              MOV      r3,r4
000120  f7fffffe          BL       __aeabi_dmul
000124  f7fffffe          BL       __aeabi_d2f
000128  4606              MOV      r6,r0
;;;673          *r = sqrt( x*x + y*y );              /* Solar distance */
00012a  4601              MOV      r1,r0
00012c  f7fffffe          BL       __aeabi_fmul
000130  4604              MOV      r4,r0
000132  4649              MOV      r1,r9
000134  4608              MOV      r0,r1
000136  f7fffffe          BL       __aeabi_fmul
00013a  4621              MOV      r1,r4
00013c  f7fffffe          BL       __aeabi_fadd
000140  f7fffffe          BL       __aeabi_f2d
000144  f7fffffe          BL       sqrt
000148  f7fffffe          BL       __aeabi_d2f
00014c  9906              LDR      r1,[sp,#0x18]
;;;674          v = atan2d( y, x );                  /* True anomaly */
00014e  6008              STR      r0,[r1,#0]
000150  4648              MOV      r0,r9
000152  f7fffffe          BL       __aeabi_f2d
000156  4605              MOV      r5,r0
000158  460c              MOV      r4,r1
00015a  4630              MOV      r0,r6
00015c  f7fffffe          BL       __aeabi_f2d
000160  462a              MOV      r2,r5
000162  4623              MOV      r3,r4
000164  f7fffffe          BL       atan2
000168  4a19              LDR      r2,|L21.464|
00016a  4b1a              LDR      r3,|L21.468|
00016c  f7fffffe          BL       __aeabi_dmul
000170  f7fffffe          BL       __aeabi_d2f
;;;675          *lon = v + w;                        /* True solar longitude */
000174  4641              MOV      r1,r8
000176  f7fffffe          BL       __aeabi_fadd
;;;676          if ( *lon >= 360.0 )
00017a  4917              LDR      r1,|L21.472|
00017c  f8cb0000          STR      r0,[r11,#0]
000180  4288              CMP      r0,r1
000182  db03              BLT      |L21.396|
;;;677                *lon -= 360.0;                   /* Make it 0..360 degrees */
000184  f7fffffe          BL       __aeabi_fsub
000188  f8cb0000          STR      r0,[r11,#0]
                  |L21.396|
;;;678    }
00018c  b007              ADD      sp,sp,#0x1c
00018e  e8bd8ff0          POP      {r4-r11,pc}
;;;679    
                          ENDP

000192  0000              DCW      0x0000
                  |L21.404|
                          DCD      0x8da5f901
                  |L21.408|
                          DCD      0x3fef8a09
                  |L21.412|
                          DCD      0x83126e98
                  |L21.416|
                          DCD      0x407640c0
                  |L21.420|
                          DCD      0x56bdc946
                  |L21.424|
                          DCD      0x3f08b0c8
                  |L21.428|
                          DCD      0xe0ded289
                  |L21.432|
                          DCD      0x4071af0b
                  |L21.436|
                          DCD      0xcaf35bd9
                  |L21.440|
                          DCD      0x3e13c626
                  |L21.444|
                          DCD      0x02320968
                  |L21.448|
                          DCD      0x3f911c2a
                  |L21.452|
                          DCD      0xa50de270
                  |L21.456|
                          DCD      0x3f91df45
                  |L21.460|
                          DCD      0x3ff00000
                  |L21.464|
                          DCD      0xb05cc3e8
                  |L21.468|
                          DCD      0x404ca5dd
                  |L21.472|
                          DCD      0x43b40000

                          AREA ||i.sunriset||, CODE, READONLY, ALIGN=2

                  sunriset PROC
;;;777    
;;;778    int sunriset( int year, int month, int day, float lon, float lat,
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;779                      float altit, int upper_limb, float *trise, float *tset )
;;;780    /***************************************************************************/
;;;781    /* Note: year,month,date = calendar date, 1801-2099 only.             */
;;;782    /*       Eastern longitude positive, Western longitude negative       */
;;;783    /*       Northern latitude positive, Southern latitude negative       */
;;;784    /*       The longitude value IS critical in this function!            */
;;;785    /*       altit = the altitude which the Sun should cross              */
;;;786    /*               Set to -35/60 degrees for rise/set, -6 degrees       */
;;;787    /*               for civil, -12 degrees for nautical and -18          */
;;;788    /*               degrees for astronomical twilight.                   */
;;;789    /*         upper_limb: non-zero -> upper limb, zero -> center         */
;;;790    /*               Set to non-zero (e.g. 1) when computing rise/set     */
;;;791    /*               times, and to zero when computing start/end of       */
;;;792    /*               twilight.                                            */
;;;793    /*        *rise = where to store the rise time                        */
;;;794    /*        *set  = where to store the set  time                        */
;;;795    /*                Both times are relative to the specified altitude,  */
;;;796    /*                and thus this function can be used to compute       */
;;;797    /*                various twilight times, as well as rise/set times   */
;;;798    /* Return value:  0 = sun rises/sets this day, times stored at        */
;;;799    /*                    *trise and *tset.                               */
;;;800    /*               +1 = sun above the specified "horizon" 24 hours.     */
;;;801    /*                    *trise set to time when the sun is at south,    */
;;;802    /*                    minus 12 hours while *tset is set to the south  */
;;;803    /*                    time plus 12 hours. "Day" length = 24 hours     */
;;;804    /*               -1 = sun is below the specified "horizon" 24 hours   */
;;;805    /*                    "Day" length = 0 hours, *trise and *tset are    */
;;;806    /*                    both set to the time when the sun is at south.  */
;;;807    /*                                                                    */
;;;808    /**********************************************************************/
;;;809    /***************************************************************************/
;;;810    /* 中文注释: year,month,date = TIC日期, 范围为1801-2099年             */
;;;811    /*       东经为正, 西经为负	北纬为正，南纬为负					      */
;;;812    /*       经度的值是函数里的关键								          */
;;;813    /*       altit = 日出日落时太阳对地平线的角距，请设置成-35/60度       */
;;;814    /*         upper_limb: 计算日出日落时间设置为1				          */
;;;815    /*        *rise = 保存日出时间					                      */
;;;816    /*        *set  = 保存日落时间					                      */
;;;817    /*                这些计算出来的日出日落时间都是在特定纬度的时间,	  */
;;;818    /* Return value:  0 = 日出日落时间已经保存在*trise和*tset里           */
;;;819    /*               +1 = 时间比该地点快了24个小时以上					  */
;;;820    /*               -1 = 时间比该地点忙了24小时以上					  */
;;;821    /*                                                                    */
;;;822    /**********************************************************************/
;;;823    {
000004  4681              MOV      r9,r0
000006  b08d              SUB      sp,sp,#0x34
000008  4693              MOV      r11,r2
00000a  460d              MOV      r5,r1
;;;824          float  d,		//从2000年1月1日到现在的天数
;;;825          sr,			//日地距，天文学单位
;;;826          sRA,			//黄道经度
;;;827          sdec,			//太阳的倾角
;;;828          sradius,		//太阳的圆周半径
;;;829          t,			//每日的弧度(偏移量)
;;;830          tsouth,		//太阳在黄道南边的时间
;;;831          sidtime;		//本地恒星时
;;;832    
;;;833          int rc = 0;	//函数返回值，通常为0
00000c  2600              MOVS     r6,#0
;;;834    
;;;835        /* Compute d of 12h local mean solar time */
;;;836    	  //计算d
;;;837          d = days_since_2000_Jan_0(year,month,day) + 0.5 - lon/360.0;
00000e  4618              MOV      r0,r3
000010  f7fffffe          BL       __aeabi_f2d
000014  468a              MOV      r10,r1
000016  4604              MOV      r4,r0
000018  2200              MOVS     r2,#0
00001a  4b76              LDR      r3,|L22.500|
00001c  f7fffffe          BL       __aeabi_ddiv
000020  4607              MOV      r7,r0
000022  4688              MOV      r8,r1
000024  f1050009          ADD      r0,r5,#9
000028  210c              MOVS     r1,#0xc
00002a  fb90f1f1          SDIV     r1,r0,r1
00002e  eb010009          ADD      r0,r1,r9
000032  f2401113          MOV      r1,#0x113
000036  434d              MULS     r5,r1,r5
000038  2109              MOVS     r1,#9
00003a  fb95f2f1          SDIV     r2,r5,r1
00003e  f240136f          MOV      r3,#0x16f
000042  ebc000c0          RSB      r0,r0,r0,LSL #3
000046  fb09f103          MUL      r1,r9,r3
00004a  17c3              ASRS     r3,r0,#31
00004c  eb007093          ADD      r0,r0,r3,LSR #30
000050  eba100a0          SUB      r0,r1,r0,ASR #2
000054  1811              ADDS     r1,r2,r0
000056  eb01000b          ADD      r0,r1,r11
00005a  4967              LDR      r1,|L22.504|
00005c  4408              ADD      r0,r0,r1
00005e  f7fffffe          BL       __aeabi_i2d
000062  2200              MOVS     r2,#0
000064  4b65              LDR      r3,|L22.508|
000066  f7fffffe          BL       __aeabi_dadd
00006a  463a              MOV      r2,r7
00006c  4643              MOV      r3,r8
00006e  f7fffffe          BL       __aeabi_dsub
000072  f7fffffe          BL       __aeabi_d2f
000076  4627              MOV      r7,r4
000078  4605              MOV      r5,r0
;;;838    
;;;839          /* Compute local sidereal time of this moment */
;;;840    	  //计算此刻的本地恒星时
;;;841          sidtime = revolution( GMST0(d) + 180.0 + lon );
00007a  4654              MOV      r4,r10
00007c  f7fffffe          BL       __aeabi_f2d
000080  4a5f              LDR      r2,|L22.512|
000082  4b60              LDR      r3,|L22.516|
000084  f7fffffe          BL       __aeabi_dmul
000088  4a5f              LDR      r2,|L22.520|
00008a  4b60              LDR      r3,|L22.524|
00008c  f7fffffe          BL       __aeabi_dadd
000090  f7fffffe          BL       __aeabi_d2f
000094  f7fffffe          BL       revolution
000098  f7fffffe          BL       __aeabi_f2d
00009c  2200              MOVS     r2,#0
00009e  4b5c              LDR      r3,|L22.528|
0000a0  f7fffffe          BL       __aeabi_dadd
0000a4  463a              MOV      r2,r7
0000a6  4623              MOV      r3,r4
0000a8  f7fffffe          BL       __aeabi_dadd
0000ac  f7fffffe          BL       __aeabi_d2f
0000b0  f7fffffe          BL       revolution
0000b4  4604              MOV      r4,r0
;;;842    
;;;843          /* Compute Sun's RA + Decl at this moment */
;;;844    	  //计算此刻太阳的黄道经度和太阳的倾角
;;;845          sun_RA_dec( d, &sRA, &sdec, &sr );
0000b6  ab0b              ADD      r3,sp,#0x2c
0000b8  aa0a              ADD      r2,sp,#0x28
0000ba  a902              ADD      r1,sp,#8
0000bc  4628              MOV      r0,r5
0000be  f7fffffe          BL       sun_RA_dec
;;;846    
;;;847          /* Compute time when Sun is at south - in hours UT */
;;;848    	  //计算太阳在黄道南边的时间
;;;849          tsouth = 12.0 - rev180(sidtime - sRA)/15.0;
0000c2  4620              MOV      r0,r4
0000c4  9902              LDR      r1,[sp,#8]
0000c6  f7fffffe          BL       __aeabi_fsub
0000ca  f7fffffe          BL       rev180
0000ce  f7fffffe          BL       __aeabi_f2d
0000d2  2200              MOVS     r2,#0
0000d4  4b4f              LDR      r3,|L22.532|
0000d6  f7fffffe          BL       __aeabi_ddiv
0000da  2200              MOVS     r2,#0
0000dc  4b4e              LDR      r3,|L22.536|
0000de  f7fffffe          BL       __aeabi_drsub
0000e2  f7fffffe          BL       __aeabi_d2f
;;;850    
;;;851          /* Compute the Sun's apparent radius, degrees */
;;;852    	  //计算太阳的圆周半径
;;;853          sradius = 0.2666 / sr;
0000e6  9003              STR      r0,[sp,#0xc]
0000e8  980b              LDR      r0,[sp,#0x2c]
0000ea  f7fffffe          BL       __aeabi_f2d
0000ee  4602              MOV      r2,r0
0000f0  460b              MOV      r3,r1
0000f2  484a              LDR      r0,|L22.540|
0000f4  494a              LDR      r1,|L22.544|
0000f6  f7fffffe          BL       __aeabi_ddiv
0000fa  f7fffffe          BL       __aeabi_d2f
0000fe  4601              MOV      r1,r0
;;;854    
;;;855          /* Do correction to upper limb, if necessary */
;;;856          if ( upper_limb )
000100  9818              LDR      r0,[sp,#0x60]
000102  b118              CBZ      r0,|L22.268|
;;;857                altit -= sradius;
000104  9817              LDR      r0,[sp,#0x5c]
000106  f7fffffe          BL       __aeabi_fsub
00010a  9017              STR      r0,[sp,#0x5c]
                  |L22.268|
;;;858    
;;;859          /* Compute the diurnal arc that the Sun traverses to reach */
;;;860          /* the specified altitude altit: */
;;;861          {
;;;862                float cost;
;;;863                cost = ( sind(altit) - sind(lat) * sind(sdec) ) /
00010c  980a              LDR      r0,[sp,#0x28]
00010e  f7fffffe          BL       __aeabi_f2d
000112  f8dfa110          LDR      r10,|L22.548|
000116  f8dfb110          LDR      r11,|L22.552|
00011a  4652              MOV      r2,r10
00011c  465b              MOV      r3,r11
00011e  f7fffffe          BL       __aeabi_dmul
000122  f7fffffe          BL       ||cos||
000126  4605              MOV      r5,r0
000128  460f              MOV      r7,r1
00012a  9816              LDR      r0,[sp,#0x58]
00012c  f7fffffe          BL       __aeabi_f2d
000130  4652              MOV      r2,r10
000132  465b              MOV      r3,r11
000134  f7fffffe          BL       __aeabi_dmul
000138  4604              MOV      r4,r0
00013a  9101              STR      r1,[sp,#4]
00013c  f7fffffe          BL       ||cos||
000140  462a              MOV      r2,r5
000142  463b              MOV      r3,r7
000144  f7fffffe          BL       __aeabi_dmul
000148  4680              MOV      r8,r0
00014a  4689              MOV      r9,r1
00014c  980a              LDR      r0,[sp,#0x28]
00014e  f7fffffe          BL       __aeabi_f2d
000152  4652              MOV      r2,r10
000154  465b              MOV      r3,r11
000156  f7fffffe          BL       __aeabi_dmul
00015a  f7fffffe          BL       ||sin||
00015e  4607              MOV      r7,r0
000160  460d              MOV      r5,r1
000162  4620              MOV      r0,r4
000164  9901              LDR      r1,[sp,#4]
000166  f7fffffe          BL       ||sin||
00016a  463a              MOV      r2,r7
00016c  462b              MOV      r3,r5
00016e  f7fffffe          BL       __aeabi_dmul
000172  4605              MOV      r5,r0
000174  460c              MOV      r4,r1
000176  9817              LDR      r0,[sp,#0x5c]
000178  f7fffffe          BL       __aeabi_f2d
00017c  4652              MOV      r2,r10
00017e  465b              MOV      r3,r11
000180  f7fffffe          BL       __aeabi_dmul
000184  f7fffffe          BL       ||sin||
000188  462a              MOV      r2,r5
00018a  4623              MOV      r3,r4
00018c  f7fffffe          BL       __aeabi_dsub
000190  4642              MOV      r2,r8
000192  464b              MOV      r3,r9
000194  f7fffffe          BL       __aeabi_ddiv
000198  f7fffffe          BL       __aeabi_d2f
;;;864                      ( cosd(lat) * cosd(sdec) );
;;;865                if ( cost >= 1.0 )
00019c  f1b05f7e          CMP      r0,#0x3f800000
0001a0  db03              BLT      |L22.426|
;;;866                      rc = -1, t = 0.0;       /* Sun always below altit */
0001a2  f04f36ff          MOV      r6,#0xffffffff
0001a6  2400              MOVS     r4,#0
0001a8  e011              B        |L22.462|
                  |L22.426|
;;;867                else if ( cost == -1.0 )
0001aa  f1104f81          CMN      r0,#0x40800000
0001ae  d01e              BEQ      |L22.494|
;;;868                      rc = +1, t = 12.0;      /* Sun always above altit */
;;;869                else
;;;870                      t = acosd(cost)/15.0;   /* The diurnal arc, hours */
0001b0  f7fffffe          BL       __aeabi_f2d
0001b4  f7fffffe          BL       acos
0001b8  4a1c              LDR      r2,|L22.556|
0001ba  4b1d              LDR      r3,|L22.560|
0001bc  f7fffffe          BL       __aeabi_dmul
0001c0  2200              MOVS     r2,#0
0001c2  4b14              LDR      r3,|L22.532|
0001c4  f7fffffe          BL       __aeabi_ddiv
0001c8  f7fffffe          BL       __aeabi_d2f
0001cc  4604              MOV      r4,r0
                  |L22.462|
;;;871          }
;;;872    
;;;873          /* Store rise and set times - in hours UT */
;;;874          *trise = tsouth - t;
0001ce  4621              MOV      r1,r4
0001d0  9803              LDR      r0,[sp,#0xc]
0001d2  f7fffffe          BL       __aeabi_fsub
0001d6  9919              LDR      r1,[sp,#0x64]
;;;875          *tset  = tsouth + t;
0001d8  6008              STR      r0,[r1,#0]
0001da  4621              MOV      r1,r4
0001dc  9803              LDR      r0,[sp,#0xc]
0001de  f7fffffe          BL       __aeabi_fadd
0001e2  991a              LDR      r1,[sp,#0x68]
;;;876    
;;;877          return rc;
0001e4  6008              STR      r0,[r1,#0]
;;;878    }  /* __sunriset__ */
0001e6  b00d              ADD      sp,sp,#0x34
0001e8  4630              MOV      r0,r6                 ;877
0001ea  e8bd8ff0          POP      {r4-r11,pc}
                  |L22.494|
0001ee  2601              MOVS     r6,#1                 ;868
0001f0  4c10              LDR      r4,|L22.564|
0001f2  e7ec              B        |L22.462|
;;;879    
                          ENDP

                  |L22.500|
                          DCD      0x40768000
                  |L22.504|
                          DCD      0xfff4da5e
                  |L22.508|
                          DCD      0x3fe00000
                  |L22.512|
                          DCD      0x50c753f8
                  |L22.516|
                          DCD      0x3fef8a6c
                  |L22.520|
                          DCD      0x31f8a090
                  |L22.524|
                          DCD      0x408997e6
                  |L22.528|
                          DCD      0x40668000
                  |L22.532|
                          DCD      0x402e0000
                  |L22.536|
                          DCD      0x40280000
                  |L22.540|
                          DCD      0x72474539
                  |L22.544|
                          DCD      0x3fd10ff9
                  |L22.548|
                          DCD      0xa50de270
                  |L22.552|
                          DCD      0x3f91df45
                  |L22.556|
                          DCD      0xb05cc3e8
                  |L22.560|
                          DCD      0x404ca5dd
                  |L22.564|
                          DCD      0x41400000

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  quadout
                          %        20

                          AREA ||.data||, DATA, ALIGN=2

                  mooneq
                          %        8
                  suneq
                          %        8

;*** Start embedded assembler ***

#line 1 "..\\src\\user\\gongshi.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___9_gongshi_c_rad____REV16|
#line 114 "..\\..\\..\\Libraries\\CMSIS\\Include\\core_cmInstr.h"
|__asm___9_gongshi_c_rad____REV16| PROC
#line 115

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___9_gongshi_c_rad____REVSH|
#line 128
|__asm___9_gongshi_c_rad____REVSH| PROC
#line 129

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
